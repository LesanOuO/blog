<!doctype html><html lang=zh-cn dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Linux ä»£ç ç‰‡æ®µ | Lesan's Blog</title><meta name=keywords content="Linux"><meta name=description content="Linuxå…³æœº,é‡å¯
# å…³æœº
shutdown -h now

# é‡å¯
shutdown -r now
æŸ¥çœ‹ç³»ç»Ÿ,CPUä¿¡æ¯
# æŸ¥çœ‹ç³»ç»Ÿå†…æ ¸ä¿¡æ¯
uname -a

# æŸ¥çœ‹ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬
cat /proc/version

# æŸ¥çœ‹å½“å‰ç”¨æˆ·ç¯å¢ƒå˜é‡
env

cat /proc/cpuinfo

# æŸ¥çœ‹æœ‰å‡ ä¸ªé€»è¾‘cpu, åŒ…æ‹¬cpuå‹å·
cat /proc/cpuinfo | grep name | cut -f2 -d: | uniq -c

# æŸ¥çœ‹æœ‰å‡ é¢—cpu,æ¯é¢—åˆ†åˆ«æ˜¯å‡ æ ¸
cat /proc/cpuinfo | grep physical | uniq -c

# æŸ¥çœ‹å½“å‰CPUè¿è¡Œåœ¨32bitè¿˜æ˜¯64bitæ¨¡å¼ä¸‹, å¦‚æœæ˜¯è¿è¡Œåœ¨32bitä¸‹ä¹Ÿä¸ä»£è¡¨CPUä¸æ”¯æŒ64bit
getconf LONG_BIT

# ç»“æœå¤§äº0, è¯´æ˜æ”¯æŒ64bitè®¡ç®—. lmæŒ‡long mode, æ”¯æŒlmåˆ™æ˜¯64bit
cat /proc/cpuinfo | grep flags | grep ' lm ' | wc -l
å»ºç«‹è½¯è¿æ¥
ln -s /usr/local/jdk1.8/ jdk
rpmç›¸å…³
# æŸ¥çœ‹æ˜¯å¦é€šè¿‡rpmå®‰è£…äº†è¯¥è½¯ä»¶
rpm -qa | grep è½¯ä»¶å
sshkey
# åˆ›å»ºsshkey
ssh-keygen -t rsa -C your_email@example.com

#id_rsa.pub çš„å†…å®¹æ‹·è´åˆ°è¦æ§åˆ¶çš„æœåŠ¡å™¨çš„ home/username/.ssh/authorized_keys ä¸­,å¦‚æœæ²¡æœ‰åˆ™æ–°å»º(.sshæƒé™ä¸º700, authorized_keysæƒé™ä¸º600)
å‘½ä»¤é‡å‘½å
# åœ¨å„ä¸ªç”¨æˆ·çš„.bash_profileä¸­æ·»åŠ é‡å‘½åé…ç½®
alias ll='ls -alF'
åŒæ­¥æœåŠ¡å™¨æ—¶é—´
sudo ntpdate -u ntp.api.bz
åå°è¿è¡Œ
# åå°è¿è¡Œ,å¹¶ä¸”æœ‰nohup.outè¾“å‡º
nohup xxx &

# åå°è¿è¡Œ, ä¸è¾“å‡ºä»»ä½•æ—¥å¿—
nohup xxx > /dev/null &

# åå°è¿è¡Œ, å¹¶å°†é”™è¯¯ä¿¡æ¯åšæ ‡å‡†è¾“å‡ºåˆ°æ—¥å¿—ä¸­
nohup xxx >out.log 2>&amp;1 &
å¼ºåˆ¶æ´»åŠ¨ç”¨æˆ·é€€å‡º
# å‘½ä»¤æ¥å®Œæˆå¼ºåˆ¶æ´»åŠ¨ç”¨æˆ·é€€å‡º.å…¶ä¸­TTYè¡¨ç¤ºç»ˆç«¯åç§°
pkill -kill -t [TTY]
æŸ¥çœ‹å‘½ä»¤è·¯å¾„
which <å‘½ä»¤>
æŸ¥çœ‹è¿›ç¨‹æ‰€æœ‰æ‰“å¼€æœ€å¤§fdæ•°
ulimit -n
é…ç½®dns
vim /etc/resolv.conf
nslookup,æŸ¥çœ‹åŸŸåè·¯ç”±è¡¨
nslookup google.com
last,æœ€è¿‘ç™»å½•ä¿¡æ¯åˆ—è¡¨
# æœ€è¿‘ç™»å½•çš„5ä¸ªè´¦å·
last -n 5
è®¾ç½®å›ºå®šip
ifconfig em1  192.168.5.177 netmask 255.255.255.0
æŸ¥çœ‹è¿›ç¨‹å†…åŠ è½½çš„ç¯å¢ƒå˜é‡
# ä¹Ÿå¯ä»¥å» cd /proc ç›®å½•ä¸‹, æŸ¥çœ‹è¿›ç¨‹å†…å­˜ä¸­åŠ è½½çš„ä¸œè¥¿
ps eww -p  XXXXX(è¿›ç¨‹å·)
æŸ¥çœ‹è¿›ç¨‹æ ‘æ‰¾åˆ°æœåŠ¡å™¨è¿›ç¨‹
ps auwxf
æŸ¥çœ‹è¿›ç¨‹å¯åŠ¨è·¯å¾„
cd /proc/xxx(è¿›ç¨‹å·)
ls -all
# cwdå¯¹åº”çš„æ˜¯å¯åŠ¨è·¯å¾„
æ·»åŠ ç”¨æˆ·,é…ç½®sudoæƒé™
# æ–°å¢ç”¨æˆ·
useradd ç”¨æˆ·å
passwd ç”¨æˆ·å

#å¢åŠ sudoæƒé™
vim /etc/sudoers
# ä¿®æ”¹æ–‡ä»¶é‡Œé¢çš„
# root    ALL=(ALL)       ALL
# ç”¨æˆ·å ALL=(ALL)       ALL
å¼ºåˆ¶å…³é—­è¿›ç¨‹ååŒ…å«xxxçš„æ‰€æœ‰è¿›ç¨‹
ps aux|grep xxx | grep -v grep | awk '{print $2}' | xargs kill -9
vimæ“ä½œ
#normalæ¨¡å¼ä¸‹ gè¡¨ç¤ºå…¨å±€, xè¡¨ç¤ºæŸ¥æ‰¾çš„å†…å®¹, yè¡¨ç¤ºæ›¿æ¢åçš„å†…å®¹
:%s/x/y/g

#normalæ¨¡å¼ä¸‹
0  # å…‰æ ‡ç§»åˆ°è¡Œé¦–(æ•°å­—0)
$  # å…‰æ ‡ç§»è‡³è¡Œå°¾
shift + g # è·³åˆ°æ–‡ä»¶æœ€å
gg # è·³åˆ°æ–‡ä»¶å¤´

# æ˜¾ç¤ºè¡Œå·
:set nu

# å»é™¤è¡Œå·
:set nonu

# æ£€ç´¢
/xxx(æ£€ç´¢å†…å®¹)  # ä»å¤´æ£€ç´¢, æŒ‰næŸ¥æ‰¾ä¸‹ä¸€ä¸ª
?xxx(æ£€ç´¢å†…å®¹)  # ä»å°¾éƒ¨æ£€ç´¢
æ‰“å¼€åªè¯»æ–‡ä»¶,ä¿®æ”¹åéœ€è¦ä¿å­˜æ—¶(ä¸ç”¨åˆ‡æ¢ç”¨æˆ·å³å¯ä¿å­˜çš„æ–¹å¼)
# åœ¨normalæ¨¡å¼ä¸‹
:w !sudo tee %
æŸ¥çœ‹ç£ç›˜, æ–‡ä»¶ç›®å½•åŸºæœ¬ä¿¡æ¯
# æŸ¥çœ‹ç£ç›˜æŒ‚è½½æƒ…å†µ
mount

# æŸ¥çœ‹ç£ç›˜åˆ†åŒºä¿¡æ¯
df

# æŸ¥çœ‹ç›®å½•åŠå­ç›®å½•å¤§å°
du -H -h

# æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹å„ä¸ªæ–‡ä»¶, æ–‡ä»¶å¤¹å äº†å¤šå°‘ç©ºé—´, ä¸ä¼šé€’å½’
du -sh *
wcå‘½ä»¤
# æŸ¥çœ‹æ–‡ä»¶é‡Œæœ‰å¤šå°‘è¡Œ
wc -l filename

# çœ‹æ–‡ä»¶é‡Œæœ‰å¤šå°‘ä¸ªword
wc -w filename

# æ–‡ä»¶é‡Œæœ€é•¿çš„é‚£ä¸€è¡Œæ˜¯å¤šå°‘ä¸ªå­—
wc -L filename

# ç»Ÿè®¡å­—èŠ‚æ•°
wc -c
å‹ç¼©å‘½ä»¤
tar czvf xxx.tar å‹ç¼©ç›®å½•

zip -r xxx.zip å‹ç¼©ç›®å½•
è§£å‹ç¼©å‘½ä»¤
tar zxvf xxx.tar

# è§£å‹åˆ°æŒ‡å®šæ–‡ä»¶å¤¹
tar zxvf xxx.tar -C /xxx/yyy/

unzip xxx.zip
å˜æ›´æ–‡ä»¶æ‰€å±ç”¨æˆ·, ç”¨æˆ·ç»„
chown eagleye.eagleye xxx.log
cp, scp, mkdir
#å¤åˆ¶
cp xxx.log

# å¤åˆ¶å¹¶å¼ºåˆ¶è¦†ç›–åŒåæ–‡ä»¶
cp -f xxx.log

# å¤åˆ¶æ–‡ä»¶å¤¹
cp -r xxx(æºæ–‡ä»¶å¤¹) yyy(ç›®æ ‡æ–‡ä»¶å¤¹)

# è¿œç¨‹å¤åˆ¶
scp -P sshç«¯å£ username@10.10.10.101:/home/username/xxx /home/xxx

# çº§è”åˆ›å»ºç›®å½•
mkdir -p /xxx/yyy/zzz

# æ‰¹é‡åˆ›å»ºæ–‡ä»¶å¤¹, ä¼šåœ¨test,mainä¸‹éƒ½åˆ›å»ºjava, resourcesæ–‡ä»¶å¤¹
mkdir -p src/{test,main}/{java,resources}
æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶
diff -u 1.txt 2.txt
æ—¥å¿—è¾“å‡ºçš„å­—èŠ‚æ•°,å¯ä»¥ç”¨ä½œæ€§èƒ½æµ‹è¯•
# å¦‚æœåšæ€§èƒ½æµ‹è¯•, å¯ä»¥æ¯æ‰§è¡Œä¸€æ¬¡, å¾€æ—¥å¿—é‡Œé¢è¾“å‡º â€œ.â€ , è¿™æ ·æ—¥å¿—ä¸­çš„å­—èŠ‚æ•°å°±æ˜¯å®é™…çš„æ€§èƒ½æµ‹è¯•è¿è¡Œçš„æ¬¡æ•°, è¿˜å¯ä»¥çœ‹è§å®æ—¶é€Ÿç‡.
tail -f xxx.log | pv -bt
æŸ¥çœ‹, å»é™¤ç‰¹æ®Šå­—ç¬¦
# æŸ¥çœ‹ç‰¹æ®Šå­—ç¬¦
cat -v xxx.sh

# å»é™¤ç‰¹æ®Šå­—ç¬¦
sed -i 's/^M//gâ€™ env.sh  å»é™¤æ–‡ä»¶çš„ç‰¹æ®Šå­—ç¬¦, æ¯”å¦‚^M:  éœ€è¦è¿™æ ·è¾“å…¥: ctrl+v+enter
å¤„ç†å› ç³»ç»ŸåŸå› å¼•èµ·çš„æ–‡ä»¶ä¸­ç‰¹æ®Šå­—ç¬¦çš„é—®é¢˜
# å¯ä»¥è½¬æ¢ä¸ºè¯¥ç³»ç»Ÿä¸‹çš„æ–‡ä»¶æ ¼å¼
cat file.sh > file.sh_bak

# å…ˆå°†file.shä¸­æ–‡ä»¶å†…å®¹å¤åˆ¶ä¸‹æ¥ç„¶åè¿è¡Œ, ç„¶åç²˜è´´å†…å®¹, æœ€åctrl + d ä¿å­˜é€€å‡º
cat > file1.sh

# åœ¨vimä¸­é€šè¿‡å¦‚ä¸‹è®¾ç½®æ–‡ä»¶ç¼–ç å’Œæ–‡ä»¶æ ¼å¼
:set fileencodings=utf-8 ï¼Œç„¶å w ï¼ˆå­˜ç›˜ï¼‰ä¸€ä¸‹å³å¯è½¬åŒ–ä¸º utf8 æ ¼å¼ï¼Œ
:set fileformat=unix

# åœ¨macä¸‹ä½¿ç”¨dos2unixè¿›è¡Œæ–‡ä»¶æ ¼å¼åŒ–
find . -name &#34;*.sh&#34; | xargs dos2unix
tee, é‡å®šå‘çš„åŒæ—¶è¾“å‡ºåˆ°å±å¹•
awk â€˜{print $0}â€™ xxx.log | tee test.log
grep
# åå‘åŒ¹é…, æŸ¥æ‰¾ä¸åŒ…å«xxxçš„å†…å®¹
grep -v xxx

# æ’é™¤æ‰€æœ‰ç©ºè¡Œ
grep -v '^/pre>'

# è¿”å›ç»“æœ 2,åˆ™è¯´æ˜ç¬¬äºŒè¡Œæ˜¯ç©ºè¡Œ
grep -n â€œ^$â€ 111.txt

# æŸ¥è¯¢ä»¥abcå¼€å¤´çš„è¡Œ
grep -n â€œ^abcâ€ 111.txt

# åŒæ—¶åˆ—å‡ºè¯¥è¯è¯­å‡ºç°åœ¨æ–‡ç« çš„ç¬¬å‡ è¡Œ
grep 'xxx' -n xxx.log

# è®¡ç®—ä¸€ä¸‹è¯¥å­—ä¸²å‡ºç°çš„æ¬¡æ•°
grep 'xxx' -c xxx.log

# æ¯”å¯¹çš„æ—¶å€™ï¼Œä¸è®¡è¾ƒå¤§å°å†™çš„ä¸åŒ
grep 'xxx' -i xxx.log
awk
# ä»¥':' ä¸ºåˆ†éš”ç¬¦,å¦‚æœç¬¬äº”åŸŸæœ‰useråˆ™è¾“å‡ºè¯¥è¡Œ
awk -F ':' '{if ($5 ~ /user/) print $0}' /etc/passwd

# ç»Ÿè®¡å•ä¸ªæ–‡ä»¶ä¸­æŸä¸ªå­—ç¬¦ï¼ˆä¸²ï¼‰(ä¸­æ–‡æ— æ•ˆ)å‡ºç°çš„æ¬¡æ•°
awk -v RS='character' 'END {print --NR}' xxx.txt
find
# åœ¨ç›®å½•ä¸‹æ‰¾åç¼€æ˜¯.mysqlçš„æ–‡ä»¶
find /home/eagleye -name '*.mysql' -print

# ä¼šä» /usr ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾æœ€è¿‘3å¤©ä¹‹å†…å­˜å–è¿‡çš„æ–‡ä»¶ã€‚
find /usr -atime 3 â€“print

# ä¼šä» /usr ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾æœ€è¿‘5å¤©ä¹‹å†…ä¿®æ”¹è¿‡çš„æ–‡ä»¶ã€‚
find /usr -ctime 5 â€“print

# ä¼šä» /doc ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾jacky çš„ã€æ–‡ä»¶åå¼€å¤´æ˜¯ jçš„æ–‡ä»¶ã€‚
find /doc -user jacky -name 'j*' â€“print

# ä¼šä» /doc ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾å¯»æ–‡ä»¶åæ˜¯ ja å¼€å¤´æˆ–è€… maå¼€å¤´çš„æ–‡ä»¶ã€‚
find /doc \( -name 'ja*' -o- -name 'ma*' \) â€“print

#  ä¼šä» /doc ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾åˆ°å‡¡æ˜¯æ–‡ä»¶åç»“å°¾ä¸º bakçš„æ–‡ä»¶ï¼ŒæŠŠå®ƒåˆ é™¤æ‰ã€‚-exec é€‰é¡¹æ˜¯æ‰§è¡Œçš„æ„æ€ï¼Œrm æ˜¯åˆ é™¤å‘½ä»¤ï¼Œ{ } è¡¨ç¤ºæ–‡ä»¶åï¼Œâ€œ\;â€æ˜¯è§„å®šçš„å‘½ä»¤ç»“å°¾ã€‚
find /doc -name '*bak' -exec rm {} \;
æŸ¥çœ‹ä»€ä¹ˆè¿›ç¨‹ä½¿ç”¨äº†è¯¥ç«¯å£
lsof -i:port
è·å–æœ¬æœºipåœ°å€
/sbin/ifconfig -a|grep inet|grep -v 127.0.0.1|grep -v inet6|awk '{print $2}'|tr -d &#34;addr:&#34;
iptables
# æŸ¥çœ‹iptablesçŠ¶æ€
service iptables status

# è¦å°åœä¸€ä¸ªip
iptables -I INPUT -s ***.***.***.*** -j DROP

# è¦è§£å°ä¸€ä¸ªIPï¼Œä½¿ç”¨ä¸‹é¢è¿™æ¡å‘½ä»¤ï¼š
iptables -D INPUT -s ***.***.***.*** -j DROP

å¤‡æ³¨: å‚æ•°-Iæ˜¯è¡¨ç¤ºInsertï¼ˆæ·»åŠ ï¼‰ï¼Œ-Dè¡¨ç¤ºDeleteï¼ˆåˆ é™¤ï¼‰ã€‚åé¢è·Ÿçš„æ˜¯è§„åˆ™ï¼ŒINPUTè¡¨ç¤ºå…¥ç«™ï¼Œ***.***.***.***è¡¨ç¤ºè¦å°åœçš„IPï¼ŒDROPè¡¨ç¤ºæ”¾å¼ƒè¿æ¥ã€‚

#å¼€å¯9090ç«¯å£çš„è®¿é—®
/sbin/iptables -I INPUT -p tcp --dport 9090 -j ACCEPT

# é˜²ç«å¢™å¼€å¯ã€å…³é—­ã€é‡å¯
/etc/init.d/iptables status
/etc/init.d/iptables start
/etc/init.d/iptables stop
/etc/init.d/iptables restart
ncå‘½ä»¤, tcpè°ƒè¯•åˆ©å™¨
#ç»™æŸä¸€ä¸ªendpointå‘é€TCPè¯·æ±‚,å°±å°†dataçš„å†…å®¹å‘é€åˆ°å¯¹ç«¯
nc 192.168.0.11 8000 < data.txt

#ncå¯ä»¥å½“åšæœåŠ¡å™¨ï¼Œç›‘å¬æŸä¸ªç«¯å£å·,æŠŠæŸä¸€æ¬¡è¯·æ±‚çš„å†…å®¹å­˜å‚¨åˆ°received_dataé‡Œ
nc -l 8000 > received_data

#ä¸Šè¾¹åªç›‘å¬ä¸€æ¬¡ï¼Œå¦‚æœå¤šæ¬¡å¯ä»¥åŠ ä¸Š-kå‚æ•°
nc -lk 8000
tcpdump
# dumpå‡ºæœ¬æœº12301ç«¯å£çš„tcpåŒ…
tcpdump -i em1 tcp port 12301 -s 1500 -w abc.pcap
è·Ÿè¸ªç½‘ç»œè·¯ç”±è·¯å¾„
# tracerouteé»˜è®¤ä½¿ç”¨udpæ–¹å¼, å¦‚æœæ˜¯-Iåˆ™æ”¹æˆicmpæ–¹å¼
traceroute -I www.163.com

# ä»ttlç¬¬3è·³è·Ÿè¸ª
traceroute -M 3 www.163.com

# åŠ ä¸Šç«¯å£è·Ÿè¸ª
traceroute -p 8080 192.168.10.11
ss
# æ˜¾ç¤ºæœ¬åœ°æ‰“å¼€çš„æ‰€æœ‰ç«¯å£
ss -l

# æ˜¾ç¤ºæ¯ä¸ªè¿›ç¨‹å…·ä½“æ‰“å¼€çš„socket
ss -pl

# æ˜¾ç¤ºæ‰€æœ‰tcp socket
ss -t -a

# æ˜¾ç¤ºæ‰€æœ‰çš„UDP Socekt
ss -u -a

# æ˜¾ç¤ºæ‰€æœ‰å·²å»ºç«‹çš„SMTPè¿æ¥
ss -o state established '( dport = :smtp or sport = :smtp )'

# æ˜¾ç¤ºæ‰€æœ‰å·²å»ºç«‹çš„HTTPè¿æ¥
ss -o state established '( dport = :http or sport = :http )'

æ‰¾å‡ºæ‰€æœ‰è¿æ¥XæœåŠ¡å™¨çš„è¿›ç¨‹
ss -x src /tmp/.X11-unix/*

åˆ—å‡ºå½“å‰socketç»Ÿè®¡ä¿¡æ¯
ss -s

è§£é‡Šï¼šnetstatæ˜¯éå†/procä¸‹é¢æ¯ä¸ªPIDç›®å½•ï¼Œssç›´æ¥è¯»/proc/netä¸‹é¢çš„ç»Ÿè®¡ä¿¡æ¯ã€‚æ‰€ä»¥ssæ‰§è¡Œçš„æ—¶å€™æ¶ˆè€—èµ„æºä»¥åŠæ¶ˆè€—çš„æ—¶é—´éƒ½æ¯”netstatå°‘å¾ˆå¤š
netstat
# è¾“å‡ºæ¯ä¸ªipçš„è¿æ¥æ•°ï¼Œä»¥åŠæ€»çš„å„ä¸ªçŠ¶æ€çš„è¿æ¥æ•°
netstat -n | awk '/^tcp/ {n=split($(NF-1),array,&#34;:&#34;);if(n<=2)++S[array[(1)]];else++S[array[(4)]];++s[$NF];++N} END {for(a in S){printf(&#34;%-20s %s\n&#34;, a, S[a]);++I}printf(&#34;%-20s %s\n&#34;,&#34;TOTAL_IP&#34;,I);for(a in s) printf(&#34;%-20s %s\n&#34;,a, s[a]);printf(&#34;%-20s %s\n&#34;,&#34;TOTAL_LINK&#34;,N);}'

# ç»Ÿè®¡æ‰€æœ‰è¿æ¥çŠ¶æ€,
# CLOSEDï¼šæ— è¿æ¥æ˜¯æ´»åŠ¨çš„æˆ–æ­£åœ¨è¿›è¡Œ
# LISTENï¼šæœåŠ¡å™¨åœ¨ç­‰å¾…è¿›å…¥å‘¼å«
# SYN_RECVï¼šä¸€ä¸ªè¿æ¥è¯·æ±‚å·²ç»åˆ°è¾¾ï¼Œç­‰å¾…ç¡®è®¤
# SYN_SENTï¼šåº”ç”¨å·²ç»å¼€å§‹ï¼Œæ‰“å¼€ä¸€ä¸ªè¿æ¥
# ESTABLISHEDï¼šæ­£å¸¸æ•°æ®ä¼ è¾“çŠ¶æ€
# FIN_WAIT1ï¼šåº”ç”¨è¯´å®ƒå·²ç»å®Œæˆ
# FIN_WAIT2ï¼šå¦ä¸€è¾¹å·²åŒæ„é‡Šæ”¾
# ITMED_WAITï¼šç­‰å¾…æ‰€æœ‰åˆ†ç»„æ­»æ‰
# CLOSINGï¼šä¸¤è¾¹åŒæ—¶å°è¯•å…³é—­
# TIME_WAITï¼šä¸»åŠ¨å…³é—­è¿æ¥ä¸€ç«¯è¿˜æ²¡æœ‰ç­‰åˆ°å¦ä¸€ç«¯åé¦ˆæœŸé—´çš„çŠ¶æ€
# LAST_ACKï¼šç­‰å¾…æ‰€æœ‰åˆ†ç»„æ­»æ‰
netstat -n | awk '/^tcp/ {++state[$NF]} END {for(key in state) print key,&#34;\t&#34;,state[key]}'

# æŸ¥æ‰¾è¾ƒå¤štime_waitè¿æ¥
netstat -n|grep TIME_WAIT|awk '{print $5}'|sort|uniq -c|sort -rn|head -n20
top
dmesg,æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—
iostat,ç£ç›˜IOæƒ…å†µç›‘æ§
iostat -xz 1

# r/s, w/s, rkB/s, wkB/sï¼šåˆ†åˆ«è¡¨ç¤ºæ¯ç§’è¯»å†™æ¬¡æ•°å’Œæ¯ç§’è¯»å†™æ•°æ®é‡ï¼ˆåƒå­—èŠ‚ï¼‰ã€‚è¯»å†™é‡è¿‡å¤§ï¼Œå¯èƒ½ä¼šå¼•èµ·æ€§èƒ½é—®é¢˜ã€‚
# awaitï¼šIOæ“ä½œçš„å¹³å‡ç­‰å¾…æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’ã€‚è¿™æ˜¯åº”ç”¨ç¨‹åºåœ¨å’Œç£ç›˜äº¤äº’æ—¶ï¼Œéœ€è¦æ¶ˆè€—çš„æ—¶é—´ï¼ŒåŒ…æ‹¬IOç­‰å¾…å’Œå®é™…æ“ä½œçš„è€—æ—¶ã€‚å¦‚æœè¿™ä¸ªæ•°å€¼è¿‡å¤§ï¼Œå¯èƒ½æ˜¯ç¡¬ä»¶è®¾å¤‡é‡åˆ°äº†ç“¶é¢ˆæˆ–è€…å‡ºç°æ•…éšœã€‚
# avgqu-szï¼šå‘è®¾å¤‡å‘å‡ºçš„è¯·æ±‚å¹³å‡æ•°é‡ã€‚å¦‚æœè¿™ä¸ªæ•°å€¼å¤§äº1ï¼Œå¯èƒ½æ˜¯ç¡¬ä»¶è®¾å¤‡å·²ç»é¥±å’Œï¼ˆéƒ¨åˆ†å‰ç«¯ç¡¬ä»¶è®¾å¤‡æ”¯æŒå¹¶è¡Œå†™å…¥ï¼‰ã€‚
# %utilï¼šè®¾å¤‡åˆ©ç”¨ç‡ã€‚è¿™ä¸ªæ•°å€¼è¡¨ç¤ºè®¾å¤‡çš„ç¹å¿™ç¨‹åº¦ï¼Œç»éªŒå€¼æ˜¯å¦‚æœè¶…è¿‡60ï¼Œå¯èƒ½ä¼šå½±å“IOæ€§èƒ½ï¼ˆå¯ä»¥å‚ç…§IOæ“ä½œå¹³å‡ç­‰å¾…æ—¶é—´ï¼‰ã€‚å¦‚æœåˆ°è¾¾100%ï¼Œè¯´æ˜ç¡¬ä»¶è®¾å¤‡å·²ç»é¥±å’Œã€‚
# å¦‚æœæ˜¾ç¤ºçš„æ˜¯é€»è¾‘è®¾å¤‡çš„æ•°æ®ï¼Œé‚£ä¹ˆè®¾å¤‡åˆ©ç”¨ç‡ä¸ä»£è¡¨åç«¯å®é™…çš„ç¡¬ä»¶è®¾å¤‡å·²ç»é¥±å’Œã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå³ä½¿IOæ€§èƒ½ä¸ç†æƒ³ï¼Œä¹Ÿä¸ä¸€å®šæ„å‘³è¿™åº”ç”¨ç¨‹åºæ€§èƒ½ä¼šä¸å¥½ï¼Œå¯ä»¥åˆ©ç”¨è¯¸å¦‚é¢„è¯»å–ã€å†™ç¼“å­˜ç­‰ç­–ç•¥æå‡åº”ç”¨æ€§èƒ½ã€‚
free,å†…å­˜ä½¿ç”¨æƒ…å†µ
free -m

eg:

     total       used       free     shared    buffers     cached
Mem:          1002        769        232          0         62        421
-/+ buffers/cache:          286        715
Swap:          1153          0       1153

ç¬¬ä¸€éƒ¨åˆ†Memè¡Œ:
total å†…å­˜æ€»æ•°: 1002M
used å·²ç»ä½¿ç”¨çš„å†…å­˜æ•°: 769M
free ç©ºé—²çš„å†…å­˜æ•°: 232M
shared å½“å‰å·²ç»åºŸå¼ƒä¸ç”¨,æ€»æ˜¯0
buffers Buffer ç¼“å­˜å†…å­˜æ•°: 62M
cached Page ç¼“å­˜å†…å­˜æ•°:421M

å…³ç³»ï¼štotal(1002M) = used(769M) + free(232M)

ç¬¬äºŒéƒ¨åˆ†(-/+ buffers/cache):
(-buffers/cache) usedå†…å­˜æ•°ï¼š286M (æŒ‡çš„ç¬¬ä¸€éƒ¨åˆ†Memè¡Œä¸­çš„used â€“ buffers â€“ cached)
(+buffers/cache) freeå†…å­˜æ•°: 715M (æŒ‡çš„ç¬¬ä¸€éƒ¨åˆ†Memè¡Œä¸­çš„free + buffers + cached)

å¯è§-buffers/cacheåæ˜ çš„æ˜¯è¢«ç¨‹åºå®å®åœ¨åœ¨åƒæ‰çš„å†…å­˜,è€Œ+buffers/cacheåæ˜ çš„æ˜¯å¯ä»¥æŒªç”¨çš„å†…å­˜æ€»æ•°.

ç¬¬ä¸‰éƒ¨åˆ†æ˜¯æŒ‡äº¤æ¢åˆ†åŒº
sar,æŸ¥çœ‹ç½‘ç»œååçŠ¶æ€
# sarå‘½ä»¤åœ¨è¿™é‡Œå¯ä»¥æŸ¥çœ‹ç½‘ç»œè®¾å¤‡çš„ååç‡ã€‚åœ¨æ’æŸ¥æ€§èƒ½é—®é¢˜æ—¶ï¼Œå¯ä»¥é€šè¿‡ç½‘ç»œè®¾å¤‡çš„ååé‡ï¼Œåˆ¤æ–­ç½‘ç»œè®¾å¤‡æ˜¯å¦å·²ç»é¥±å’Œ
sar -n DEV 1

# sarå‘½ä»¤åœ¨è¿™é‡Œç”¨äºæŸ¥çœ‹TCPè¿æ¥çŠ¶æ€ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š
# active/sï¼šæ¯ç§’æœ¬åœ°å‘èµ·çš„TCPè¿æ¥æ•°ï¼Œæ—¢é€šè¿‡connectè°ƒç”¨åˆ›å»ºçš„TCPè¿æ¥ï¼›
# passive/sï¼šæ¯ç§’è¿œç¨‹å‘èµ·çš„TCPè¿æ¥æ•°ï¼Œå³é€šè¿‡acceptè°ƒç”¨åˆ›å»ºçš„TCPè¿æ¥ï¼›
# retrans/sï¼šæ¯ç§’TCPé‡ä¼ æ•°é‡ï¼›
# TCPè¿æ¥æ•°å¯ä»¥ç”¨æ¥åˆ¤æ–­æ€§èƒ½é—®é¢˜æ˜¯å¦ç”±äºå»ºç«‹äº†è¿‡å¤šçš„è¿æ¥ï¼Œè¿›ä¸€æ­¥å¯ä»¥åˆ¤æ–­æ˜¯ä¸»åŠ¨å‘èµ·çš„è¿æ¥ï¼Œè¿˜æ˜¯è¢«åŠ¨æ¥å—çš„è¿æ¥ã€‚TCPé‡ä¼ å¯èƒ½æ˜¯å› ä¸ºç½‘ç»œç¯å¢ƒæ¶åŠ£ï¼Œæˆ–è€…æœåŠ¡å™¨å‹åŠ›è¿‡å¤§å¯¼è‡´ä¸¢åŒ…
sar -n TCP,ETCP 1
vmstat, ç»™å®šæ—¶é—´ç›‘æ§CPUä½¿ç”¨ç‡, å†…å­˜ä½¿ç”¨, è™šæ‹Ÿå†…å­˜äº¤äº’, IOè¯»å†™
# 2è¡¨ç¤ºæ¯2ç§’é‡‡é›†ä¸€æ¬¡çŠ¶æ€ä¿¡æ¯, 1è¡¨ç¤ºåªé‡‡é›†ä¸€æ¬¡(å¿½ç•¥æ—¢æ˜¯ä¸€ç›´é‡‡é›†)
vmstat 2 1
"><meta name=author content="Lesan"><link rel=canonical href=https://lesanouo.github.io/blog/posts/snippet/linux/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://lesanouo.github.io/blog/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://lesanouo.github.io/blog/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://lesanouo.github.io/blog/favicon.ico><link rel=apple-touch-icon href=https://lesanouo.github.io/blog/favicon.ico><link rel=mask-icon href=https://lesanouo.github.io/blog/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh-cn href=https://lesanouo.github.io/blog/posts/snippet/linux/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:url" content="https://lesanouo.github.io/blog/posts/snippet/linux/"><meta property="og:site_name" content="Lesan's Blog"><meta property="og:title" content="Linux ä»£ç ç‰‡æ®µ"><meta property="og:description" content="Linuxå…³æœº,é‡å¯ # å…³æœº shutdown -h now # é‡å¯ shutdown -r now æŸ¥çœ‹ç³»ç»Ÿ,CPUä¿¡æ¯ # æŸ¥çœ‹ç³»ç»Ÿå†…æ ¸ä¿¡æ¯ uname -a # æŸ¥çœ‹ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬ cat /proc/version # æŸ¥çœ‹å½“å‰ç”¨æˆ·ç¯å¢ƒå˜é‡ env cat /proc/cpuinfo # æŸ¥çœ‹æœ‰å‡ ä¸ªé€»è¾‘cpu, åŒ…æ‹¬cpuå‹å· cat /proc/cpuinfo | grep name | cut -f2 -d: | uniq -c # æŸ¥çœ‹æœ‰å‡ é¢—cpu,æ¯é¢—åˆ†åˆ«æ˜¯å‡ æ ¸ cat /proc/cpuinfo | grep physical | uniq -c # æŸ¥çœ‹å½“å‰CPUè¿è¡Œåœ¨32bitè¿˜æ˜¯64bitæ¨¡å¼ä¸‹, å¦‚æœæ˜¯è¿è¡Œåœ¨32bitä¸‹ä¹Ÿä¸ä»£è¡¨CPUä¸æ”¯æŒ64bit getconf LONG_BIT # ç»“æœå¤§äº0, è¯´æ˜æ”¯æŒ64bitè®¡ç®—. lmæŒ‡long mode, æ”¯æŒlmåˆ™æ˜¯64bit cat /proc/cpuinfo | grep flags | grep ' lm ' | wc -l å»ºç«‹è½¯è¿æ¥ ln -s /usr/local/jdk1.8/ jdk rpmç›¸å…³ # æŸ¥çœ‹æ˜¯å¦é€šè¿‡rpmå®‰è£…äº†è¯¥è½¯ä»¶ rpm -qa | grep è½¯ä»¶å sshkey # åˆ›å»ºsshkey ssh-keygen -t rsa -C your_email@example.com #id_rsa.pub çš„å†…å®¹æ‹·è´åˆ°è¦æ§åˆ¶çš„æœåŠ¡å™¨çš„ home/username/.ssh/authorized_keys ä¸­,å¦‚æœæ²¡æœ‰åˆ™æ–°å»º(.sshæƒé™ä¸º700, authorized_keysæƒé™ä¸º600) å‘½ä»¤é‡å‘½å # åœ¨å„ä¸ªç”¨æˆ·çš„.bash_profileä¸­æ·»åŠ é‡å‘½åé…ç½® alias ll='ls -alF' åŒæ­¥æœåŠ¡å™¨æ—¶é—´ sudo ntpdate -u ntp.api.bz åå°è¿è¡Œ # åå°è¿è¡Œ,å¹¶ä¸”æœ‰nohup.outè¾“å‡º nohup xxx & # åå°è¿è¡Œ, ä¸è¾“å‡ºä»»ä½•æ—¥å¿— nohup xxx > /dev/null & # åå°è¿è¡Œ, å¹¶å°†é”™è¯¯ä¿¡æ¯åšæ ‡å‡†è¾“å‡ºåˆ°æ—¥å¿—ä¸­ nohup xxx >out.log 2>&amp;1 & å¼ºåˆ¶æ´»åŠ¨ç”¨æˆ·é€€å‡º # å‘½ä»¤æ¥å®Œæˆå¼ºåˆ¶æ´»åŠ¨ç”¨æˆ·é€€å‡º.å…¶ä¸­TTYè¡¨ç¤ºç»ˆç«¯åç§° pkill -kill -t [TTY] æŸ¥çœ‹å‘½ä»¤è·¯å¾„ which <å‘½ä»¤> æŸ¥çœ‹è¿›ç¨‹æ‰€æœ‰æ‰“å¼€æœ€å¤§fdæ•° ulimit -n é…ç½®dns vim /etc/resolv.conf nslookup,æŸ¥çœ‹åŸŸåè·¯ç”±è¡¨ nslookup google.com last,æœ€è¿‘ç™»å½•ä¿¡æ¯åˆ—è¡¨ # æœ€è¿‘ç™»å½•çš„5ä¸ªè´¦å· last -n 5 è®¾ç½®å›ºå®šip ifconfig em1 192.168.5.177 netmask 255.255.255.0 æŸ¥çœ‹è¿›ç¨‹å†…åŠ è½½çš„ç¯å¢ƒå˜é‡ # ä¹Ÿå¯ä»¥å» cd /proc ç›®å½•ä¸‹, æŸ¥çœ‹è¿›ç¨‹å†…å­˜ä¸­åŠ è½½çš„ä¸œè¥¿ ps eww -p XXXXX(è¿›ç¨‹å·) æŸ¥çœ‹è¿›ç¨‹æ ‘æ‰¾åˆ°æœåŠ¡å™¨è¿›ç¨‹ ps auwxf æŸ¥çœ‹è¿›ç¨‹å¯åŠ¨è·¯å¾„ cd /proc/xxx(è¿›ç¨‹å·) ls -all # cwdå¯¹åº”çš„æ˜¯å¯åŠ¨è·¯å¾„ æ·»åŠ ç”¨æˆ·,é…ç½®sudoæƒé™ # æ–°å¢ç”¨æˆ· useradd ç”¨æˆ·å passwd ç”¨æˆ·å #å¢åŠ sudoæƒé™ vim /etc/sudoers # ä¿®æ”¹æ–‡ä»¶é‡Œé¢çš„ # root ALL=(ALL) ALL # ç”¨æˆ·å ALL=(ALL) ALL å¼ºåˆ¶å…³é—­è¿›ç¨‹ååŒ…å«xxxçš„æ‰€æœ‰è¿›ç¨‹ ps aux|grep xxx | grep -v grep | awk '{print $2}' | xargs kill -9 vimæ“ä½œ #normalæ¨¡å¼ä¸‹ gè¡¨ç¤ºå…¨å±€, xè¡¨ç¤ºæŸ¥æ‰¾çš„å†…å®¹, yè¡¨ç¤ºæ›¿æ¢åçš„å†…å®¹ :%s/x/y/g #normalæ¨¡å¼ä¸‹ 0 # å…‰æ ‡ç§»åˆ°è¡Œé¦–(æ•°å­—0) $ # å…‰æ ‡ç§»è‡³è¡Œå°¾ shift + g # è·³åˆ°æ–‡ä»¶æœ€å gg # è·³åˆ°æ–‡ä»¶å¤´ # æ˜¾ç¤ºè¡Œå· :set nu # å»é™¤è¡Œå· :set nonu # æ£€ç´¢ /xxx(æ£€ç´¢å†…å®¹) # ä»å¤´æ£€ç´¢, æŒ‰næŸ¥æ‰¾ä¸‹ä¸€ä¸ª ?xxx(æ£€ç´¢å†…å®¹) # ä»å°¾éƒ¨æ£€ç´¢ æ‰“å¼€åªè¯»æ–‡ä»¶,ä¿®æ”¹åéœ€è¦ä¿å­˜æ—¶(ä¸ç”¨åˆ‡æ¢ç”¨æˆ·å³å¯ä¿å­˜çš„æ–¹å¼) # åœ¨normalæ¨¡å¼ä¸‹ :w !sudo tee % æŸ¥çœ‹ç£ç›˜, æ–‡ä»¶ç›®å½•åŸºæœ¬ä¿¡æ¯ # æŸ¥çœ‹ç£ç›˜æŒ‚è½½æƒ…å†µ mount # æŸ¥çœ‹ç£ç›˜åˆ†åŒºä¿¡æ¯ df # æŸ¥çœ‹ç›®å½•åŠå­ç›®å½•å¤§å° du -H -h # æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹å„ä¸ªæ–‡ä»¶, æ–‡ä»¶å¤¹å äº†å¤šå°‘ç©ºé—´, ä¸ä¼šé€’å½’ du -sh * wcå‘½ä»¤ # æŸ¥çœ‹æ–‡ä»¶é‡Œæœ‰å¤šå°‘è¡Œ wc -l filename # çœ‹æ–‡ä»¶é‡Œæœ‰å¤šå°‘ä¸ªword wc -w filename # æ–‡ä»¶é‡Œæœ€é•¿çš„é‚£ä¸€è¡Œæ˜¯å¤šå°‘ä¸ªå­— wc -L filename # ç»Ÿè®¡å­—èŠ‚æ•° wc -c å‹ç¼©å‘½ä»¤ tar czvf xxx.tar å‹ç¼©ç›®å½• zip -r xxx.zip å‹ç¼©ç›®å½• è§£å‹ç¼©å‘½ä»¤ tar zxvf xxx.tar # è§£å‹åˆ°æŒ‡å®šæ–‡ä»¶å¤¹ tar zxvf xxx.tar -C /xxx/yyy/ unzip xxx.zip å˜æ›´æ–‡ä»¶æ‰€å±ç”¨æˆ·, ç”¨æˆ·ç»„ chown eagleye.eagleye xxx.log cp, scp, mkdir #å¤åˆ¶ cp xxx.log # å¤åˆ¶å¹¶å¼ºåˆ¶è¦†ç›–åŒåæ–‡ä»¶ cp -f xxx.log # å¤åˆ¶æ–‡ä»¶å¤¹ cp -r xxx(æºæ–‡ä»¶å¤¹) yyy(ç›®æ ‡æ–‡ä»¶å¤¹) # è¿œç¨‹å¤åˆ¶ scp -P sshç«¯å£ username@10.10.10.101:/home/username/xxx /home/xxx # çº§è”åˆ›å»ºç›®å½• mkdir -p /xxx/yyy/zzz # æ‰¹é‡åˆ›å»ºæ–‡ä»¶å¤¹, ä¼šåœ¨test,mainä¸‹éƒ½åˆ›å»ºjava, resourcesæ–‡ä»¶å¤¹ mkdir -p src/{test,main}/{java,resources} æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶ diff -u 1.txt 2.txt æ—¥å¿—è¾“å‡ºçš„å­—èŠ‚æ•°,å¯ä»¥ç”¨ä½œæ€§èƒ½æµ‹è¯• # å¦‚æœåšæ€§èƒ½æµ‹è¯•, å¯ä»¥æ¯æ‰§è¡Œä¸€æ¬¡, å¾€æ—¥å¿—é‡Œé¢è¾“å‡º â€œ.â€ , è¿™æ ·æ—¥å¿—ä¸­çš„å­—èŠ‚æ•°å°±æ˜¯å®é™…çš„æ€§èƒ½æµ‹è¯•è¿è¡Œçš„æ¬¡æ•°, è¿˜å¯ä»¥çœ‹è§å®æ—¶é€Ÿç‡. tail -f xxx.log | pv -bt æŸ¥çœ‹, å»é™¤ç‰¹æ®Šå­—ç¬¦ # æŸ¥çœ‹ç‰¹æ®Šå­—ç¬¦ cat -v xxx.sh # å»é™¤ç‰¹æ®Šå­—ç¬¦ sed -i 's/^M//gâ€™ env.sh å»é™¤æ–‡ä»¶çš„ç‰¹æ®Šå­—ç¬¦, æ¯”å¦‚^M: éœ€è¦è¿™æ ·è¾“å…¥: ctrl+v+enter å¤„ç†å› ç³»ç»ŸåŸå› å¼•èµ·çš„æ–‡ä»¶ä¸­ç‰¹æ®Šå­—ç¬¦çš„é—®é¢˜ # å¯ä»¥è½¬æ¢ä¸ºè¯¥ç³»ç»Ÿä¸‹çš„æ–‡ä»¶æ ¼å¼ cat file.sh > file.sh_bak # å…ˆå°†file.shä¸­æ–‡ä»¶å†…å®¹å¤åˆ¶ä¸‹æ¥ç„¶åè¿è¡Œ, ç„¶åç²˜è´´å†…å®¹, æœ€åctrl + d ä¿å­˜é€€å‡º cat > file1.sh # åœ¨vimä¸­é€šè¿‡å¦‚ä¸‹è®¾ç½®æ–‡ä»¶ç¼–ç å’Œæ–‡ä»¶æ ¼å¼ :set fileencodings=utf-8 ï¼Œç„¶å w ï¼ˆå­˜ç›˜ï¼‰ä¸€ä¸‹å³å¯è½¬åŒ–ä¸º utf8 æ ¼å¼ï¼Œ :set fileformat=unix # åœ¨macä¸‹ä½¿ç”¨dos2unixè¿›è¡Œæ–‡ä»¶æ ¼å¼åŒ– find . -name &#34;*.sh&#34; | xargs dos2unix tee, é‡å®šå‘çš„åŒæ—¶è¾“å‡ºåˆ°å±å¹• awk â€˜{print $0}â€™ xxx.log | tee test.log grep # åå‘åŒ¹é…, æŸ¥æ‰¾ä¸åŒ…å«xxxçš„å†…å®¹ grep -v xxx # æ’é™¤æ‰€æœ‰ç©ºè¡Œ grep -v '^/pre>' # è¿”å›ç»“æœ 2,åˆ™è¯´æ˜ç¬¬äºŒè¡Œæ˜¯ç©ºè¡Œ grep -n â€œ^$â€ 111.txt # æŸ¥è¯¢ä»¥abcå¼€å¤´çš„è¡Œ grep -n â€œ^abcâ€ 111.txt # åŒæ—¶åˆ—å‡ºè¯¥è¯è¯­å‡ºç°åœ¨æ–‡ç« çš„ç¬¬å‡ è¡Œ grep 'xxx' -n xxx.log # è®¡ç®—ä¸€ä¸‹è¯¥å­—ä¸²å‡ºç°çš„æ¬¡æ•° grep 'xxx' -c xxx.log # æ¯”å¯¹çš„æ—¶å€™ï¼Œä¸è®¡è¾ƒå¤§å°å†™çš„ä¸åŒ grep 'xxx' -i xxx.log awk # ä»¥':' ä¸ºåˆ†éš”ç¬¦,å¦‚æœç¬¬äº”åŸŸæœ‰useråˆ™è¾“å‡ºè¯¥è¡Œ awk -F ':' '{if ($5 ~ /user/) print $0}' /etc/passwd # ç»Ÿè®¡å•ä¸ªæ–‡ä»¶ä¸­æŸä¸ªå­—ç¬¦ï¼ˆä¸²ï¼‰(ä¸­æ–‡æ— æ•ˆ)å‡ºç°çš„æ¬¡æ•° awk -v RS='character' 'END {print --NR}' xxx.txt find # åœ¨ç›®å½•ä¸‹æ‰¾åç¼€æ˜¯.mysqlçš„æ–‡ä»¶ find /home/eagleye -name '*.mysql' -print # ä¼šä» /usr ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾æœ€è¿‘3å¤©ä¹‹å†…å­˜å–è¿‡çš„æ–‡ä»¶ã€‚ find /usr -atime 3 â€“print # ä¼šä» /usr ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾æœ€è¿‘5å¤©ä¹‹å†…ä¿®æ”¹è¿‡çš„æ–‡ä»¶ã€‚ find /usr -ctime 5 â€“print # ä¼šä» /doc ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾jacky çš„ã€æ–‡ä»¶åå¼€å¤´æ˜¯ jçš„æ–‡ä»¶ã€‚ find /doc -user jacky -name 'j*' â€“print # ä¼šä» /doc ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾å¯»æ–‡ä»¶åæ˜¯ ja å¼€å¤´æˆ–è€… maå¼€å¤´çš„æ–‡ä»¶ã€‚ find /doc \( -name 'ja*' -o- -name 'ma*' \) â€“print # ä¼šä» /doc ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾åˆ°å‡¡æ˜¯æ–‡ä»¶åç»“å°¾ä¸º bakçš„æ–‡ä»¶ï¼ŒæŠŠå®ƒåˆ é™¤æ‰ã€‚-exec é€‰é¡¹æ˜¯æ‰§è¡Œçš„æ„æ€ï¼Œrm æ˜¯åˆ é™¤å‘½ä»¤ï¼Œ{ } è¡¨ç¤ºæ–‡ä»¶åï¼Œâ€œ\;â€æ˜¯è§„å®šçš„å‘½ä»¤ç»“å°¾ã€‚ find /doc -name '*bak' -exec rm {} \; æŸ¥çœ‹ä»€ä¹ˆè¿›ç¨‹ä½¿ç”¨äº†è¯¥ç«¯å£ lsof -i:port è·å–æœ¬æœºipåœ°å€ /sbin/ifconfig -a|grep inet|grep -v 127.0.0.1|grep -v inet6|awk '{print $2}'|tr -d &#34;addr:&#34; iptables # æŸ¥çœ‹iptablesçŠ¶æ€ service iptables status # è¦å°åœä¸€ä¸ªip iptables -I INPUT -s ***.***.***.*** -j DROP # è¦è§£å°ä¸€ä¸ªIPï¼Œä½¿ç”¨ä¸‹é¢è¿™æ¡å‘½ä»¤ï¼š iptables -D INPUT -s ***.***.***.*** -j DROP å¤‡æ³¨: å‚æ•°-Iæ˜¯è¡¨ç¤ºInsertï¼ˆæ·»åŠ ï¼‰ï¼Œ-Dè¡¨ç¤ºDeleteï¼ˆåˆ é™¤ï¼‰ã€‚åé¢è·Ÿçš„æ˜¯è§„åˆ™ï¼ŒINPUTè¡¨ç¤ºå…¥ç«™ï¼Œ***.***.***.***è¡¨ç¤ºè¦å°åœçš„IPï¼ŒDROPè¡¨ç¤ºæ”¾å¼ƒè¿æ¥ã€‚ #å¼€å¯9090ç«¯å£çš„è®¿é—® /sbin/iptables -I INPUT -p tcp --dport 9090 -j ACCEPT # é˜²ç«å¢™å¼€å¯ã€å…³é—­ã€é‡å¯ /etc/init.d/iptables status /etc/init.d/iptables start /etc/init.d/iptables stop /etc/init.d/iptables restart ncå‘½ä»¤, tcpè°ƒè¯•åˆ©å™¨ #ç»™æŸä¸€ä¸ªendpointå‘é€TCPè¯·æ±‚,å°±å°†dataçš„å†…å®¹å‘é€åˆ°å¯¹ç«¯ nc 192.168.0.11 8000 < data.txt #ncå¯ä»¥å½“åšæœåŠ¡å™¨ï¼Œç›‘å¬æŸä¸ªç«¯å£å·,æŠŠæŸä¸€æ¬¡è¯·æ±‚çš„å†…å®¹å­˜å‚¨åˆ°received_dataé‡Œ nc -l 8000 > received_data #ä¸Šè¾¹åªç›‘å¬ä¸€æ¬¡ï¼Œå¦‚æœå¤šæ¬¡å¯ä»¥åŠ ä¸Š-kå‚æ•° nc -lk 8000 tcpdump # dumpå‡ºæœ¬æœº12301ç«¯å£çš„tcpåŒ… tcpdump -i em1 tcp port 12301 -s 1500 -w abc.pcap è·Ÿè¸ªç½‘ç»œè·¯ç”±è·¯å¾„ # tracerouteé»˜è®¤ä½¿ç”¨udpæ–¹å¼, å¦‚æœæ˜¯-Iåˆ™æ”¹æˆicmpæ–¹å¼ traceroute -I www.163.com # ä»ttlç¬¬3è·³è·Ÿè¸ª traceroute -M 3 www.163.com # åŠ ä¸Šç«¯å£è·Ÿè¸ª traceroute -p 8080 192.168.10.11 ss # æ˜¾ç¤ºæœ¬åœ°æ‰“å¼€çš„æ‰€æœ‰ç«¯å£ ss -l # æ˜¾ç¤ºæ¯ä¸ªè¿›ç¨‹å…·ä½“æ‰“å¼€çš„socket ss -pl # æ˜¾ç¤ºæ‰€æœ‰tcp socket ss -t -a # æ˜¾ç¤ºæ‰€æœ‰çš„UDP Socekt ss -u -a # æ˜¾ç¤ºæ‰€æœ‰å·²å»ºç«‹çš„SMTPè¿æ¥ ss -o state established '( dport = :smtp or sport = :smtp )' # æ˜¾ç¤ºæ‰€æœ‰å·²å»ºç«‹çš„HTTPè¿æ¥ ss -o state established '( dport = :http or sport = :http )' æ‰¾å‡ºæ‰€æœ‰è¿æ¥XæœåŠ¡å™¨çš„è¿›ç¨‹ ss -x src /tmp/.X11-unix/* åˆ—å‡ºå½“å‰socketç»Ÿè®¡ä¿¡æ¯ ss -s è§£é‡Šï¼šnetstatæ˜¯éå†/procä¸‹é¢æ¯ä¸ªPIDç›®å½•ï¼Œssç›´æ¥è¯»/proc/netä¸‹é¢çš„ç»Ÿè®¡ä¿¡æ¯ã€‚æ‰€ä»¥ssæ‰§è¡Œçš„æ—¶å€™æ¶ˆè€—èµ„æºä»¥åŠæ¶ˆè€—çš„æ—¶é—´éƒ½æ¯”netstatå°‘å¾ˆå¤š netstat # è¾“å‡ºæ¯ä¸ªipçš„è¿æ¥æ•°ï¼Œä»¥åŠæ€»çš„å„ä¸ªçŠ¶æ€çš„è¿æ¥æ•° netstat -n | awk '/^tcp/ {n=split($(NF-1),array,&#34;:&#34;);if(n<=2)++S[array[(1)]];else++S[array[(4)]];++s[$NF];++N} END {for(a in S){printf(&#34;%-20s %s\n&#34;, a, S[a]);++I}printf(&#34;%-20s %s\n&#34;,&#34;TOTAL_IP&#34;,I);for(a in s) printf(&#34;%-20s %s\n&#34;,a, s[a]);printf(&#34;%-20s %s\n&#34;,&#34;TOTAL_LINK&#34;,N);}' # ç»Ÿè®¡æ‰€æœ‰è¿æ¥çŠ¶æ€, # CLOSEDï¼šæ— è¿æ¥æ˜¯æ´»åŠ¨çš„æˆ–æ­£åœ¨è¿›è¡Œ # LISTENï¼šæœåŠ¡å™¨åœ¨ç­‰å¾…è¿›å…¥å‘¼å« # SYN_RECVï¼šä¸€ä¸ªè¿æ¥è¯·æ±‚å·²ç»åˆ°è¾¾ï¼Œç­‰å¾…ç¡®è®¤ # SYN_SENTï¼šåº”ç”¨å·²ç»å¼€å§‹ï¼Œæ‰“å¼€ä¸€ä¸ªè¿æ¥ # ESTABLISHEDï¼šæ­£å¸¸æ•°æ®ä¼ è¾“çŠ¶æ€ # FIN_WAIT1ï¼šåº”ç”¨è¯´å®ƒå·²ç»å®Œæˆ # FIN_WAIT2ï¼šå¦ä¸€è¾¹å·²åŒæ„é‡Šæ”¾ # ITMED_WAITï¼šç­‰å¾…æ‰€æœ‰åˆ†ç»„æ­»æ‰ # CLOSINGï¼šä¸¤è¾¹åŒæ—¶å°è¯•å…³é—­ # TIME_WAITï¼šä¸»åŠ¨å…³é—­è¿æ¥ä¸€ç«¯è¿˜æ²¡æœ‰ç­‰åˆ°å¦ä¸€ç«¯åé¦ˆæœŸé—´çš„çŠ¶æ€ # LAST_ACKï¼šç­‰å¾…æ‰€æœ‰åˆ†ç»„æ­»æ‰ netstat -n | awk '/^tcp/ {++state[$NF]} END {for(key in state) print key,&#34;\t&#34;,state[key]}' # æŸ¥æ‰¾è¾ƒå¤štime_waitè¿æ¥ netstat -n|grep TIME_WAIT|awk '{print $5}'|sort|uniq -c|sort -rn|head -n20 top dmesg,æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿— iostat,ç£ç›˜IOæƒ…å†µç›‘æ§ iostat -xz 1 # r/s, w/s, rkB/s, wkB/sï¼šåˆ†åˆ«è¡¨ç¤ºæ¯ç§’è¯»å†™æ¬¡æ•°å’Œæ¯ç§’è¯»å†™æ•°æ®é‡ï¼ˆåƒå­—èŠ‚ï¼‰ã€‚è¯»å†™é‡è¿‡å¤§ï¼Œå¯èƒ½ä¼šå¼•èµ·æ€§èƒ½é—®é¢˜ã€‚ # awaitï¼šIOæ“ä½œçš„å¹³å‡ç­‰å¾…æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’ã€‚è¿™æ˜¯åº”ç”¨ç¨‹åºåœ¨å’Œç£ç›˜äº¤äº’æ—¶ï¼Œéœ€è¦æ¶ˆè€—çš„æ—¶é—´ï¼ŒåŒ…æ‹¬IOç­‰å¾…å’Œå®é™…æ“ä½œçš„è€—æ—¶ã€‚å¦‚æœè¿™ä¸ªæ•°å€¼è¿‡å¤§ï¼Œå¯èƒ½æ˜¯ç¡¬ä»¶è®¾å¤‡é‡åˆ°äº†ç“¶é¢ˆæˆ–è€…å‡ºç°æ•…éšœã€‚ # avgqu-szï¼šå‘è®¾å¤‡å‘å‡ºçš„è¯·æ±‚å¹³å‡æ•°é‡ã€‚å¦‚æœè¿™ä¸ªæ•°å€¼å¤§äº1ï¼Œå¯èƒ½æ˜¯ç¡¬ä»¶è®¾å¤‡å·²ç»é¥±å’Œï¼ˆéƒ¨åˆ†å‰ç«¯ç¡¬ä»¶è®¾å¤‡æ”¯æŒå¹¶è¡Œå†™å…¥ï¼‰ã€‚ # %utilï¼šè®¾å¤‡åˆ©ç”¨ç‡ã€‚è¿™ä¸ªæ•°å€¼è¡¨ç¤ºè®¾å¤‡çš„ç¹å¿™ç¨‹åº¦ï¼Œç»éªŒå€¼æ˜¯å¦‚æœè¶…è¿‡60ï¼Œå¯èƒ½ä¼šå½±å“IOæ€§èƒ½ï¼ˆå¯ä»¥å‚ç…§IOæ“ä½œå¹³å‡ç­‰å¾…æ—¶é—´ï¼‰ã€‚å¦‚æœåˆ°è¾¾100%ï¼Œè¯´æ˜ç¡¬ä»¶è®¾å¤‡å·²ç»é¥±å’Œã€‚ # å¦‚æœæ˜¾ç¤ºçš„æ˜¯é€»è¾‘è®¾å¤‡çš„æ•°æ®ï¼Œé‚£ä¹ˆè®¾å¤‡åˆ©ç”¨ç‡ä¸ä»£è¡¨åç«¯å®é™…çš„ç¡¬ä»¶è®¾å¤‡å·²ç»é¥±å’Œã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå³ä½¿IOæ€§èƒ½ä¸ç†æƒ³ï¼Œä¹Ÿä¸ä¸€å®šæ„å‘³è¿™åº”ç”¨ç¨‹åºæ€§èƒ½ä¼šä¸å¥½ï¼Œå¯ä»¥åˆ©ç”¨è¯¸å¦‚é¢„è¯»å–ã€å†™ç¼“å­˜ç­‰ç­–ç•¥æå‡åº”ç”¨æ€§èƒ½ã€‚ free,å†…å­˜ä½¿ç”¨æƒ…å†µ free -m eg: total used free shared buffers cached Mem: 1002 769 232 0 62 421 -/+ buffers/cache: 286 715 Swap: 1153 0 1153 ç¬¬ä¸€éƒ¨åˆ†Memè¡Œ: total å†…å­˜æ€»æ•°: 1002M used å·²ç»ä½¿ç”¨çš„å†…å­˜æ•°: 769M free ç©ºé—²çš„å†…å­˜æ•°: 232M shared å½“å‰å·²ç»åºŸå¼ƒä¸ç”¨,æ€»æ˜¯0 buffers Buffer ç¼“å­˜å†…å­˜æ•°: 62M cached Page ç¼“å­˜å†…å­˜æ•°:421M å…³ç³»ï¼štotal(1002M) = used(769M) + free(232M) ç¬¬äºŒéƒ¨åˆ†(-/+ buffers/cache): (-buffers/cache) usedå†…å­˜æ•°ï¼š286M (æŒ‡çš„ç¬¬ä¸€éƒ¨åˆ†Memè¡Œä¸­çš„used â€“ buffers â€“ cached) (+buffers/cache) freeå†…å­˜æ•°: 715M (æŒ‡çš„ç¬¬ä¸€éƒ¨åˆ†Memè¡Œä¸­çš„free + buffers + cached) å¯è§-buffers/cacheåæ˜ çš„æ˜¯è¢«ç¨‹åºå®å®åœ¨åœ¨åƒæ‰çš„å†…å­˜,è€Œ+buffers/cacheåæ˜ çš„æ˜¯å¯ä»¥æŒªç”¨çš„å†…å­˜æ€»æ•°. ç¬¬ä¸‰éƒ¨åˆ†æ˜¯æŒ‡äº¤æ¢åˆ†åŒº sar,æŸ¥çœ‹ç½‘ç»œååçŠ¶æ€ # sarå‘½ä»¤åœ¨è¿™é‡Œå¯ä»¥æŸ¥çœ‹ç½‘ç»œè®¾å¤‡çš„ååç‡ã€‚åœ¨æ’æŸ¥æ€§èƒ½é—®é¢˜æ—¶ï¼Œå¯ä»¥é€šè¿‡ç½‘ç»œè®¾å¤‡çš„ååé‡ï¼Œåˆ¤æ–­ç½‘ç»œè®¾å¤‡æ˜¯å¦å·²ç»é¥±å’Œ sar -n DEV 1 # sarå‘½ä»¤åœ¨è¿™é‡Œç”¨äºæŸ¥çœ‹TCPè¿æ¥çŠ¶æ€ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š # active/sï¼šæ¯ç§’æœ¬åœ°å‘èµ·çš„TCPè¿æ¥æ•°ï¼Œæ—¢é€šè¿‡connectè°ƒç”¨åˆ›å»ºçš„TCPè¿æ¥ï¼› # passive/sï¼šæ¯ç§’è¿œç¨‹å‘èµ·çš„TCPè¿æ¥æ•°ï¼Œå³é€šè¿‡acceptè°ƒç”¨åˆ›å»ºçš„TCPè¿æ¥ï¼› # retrans/sï¼šæ¯ç§’TCPé‡ä¼ æ•°é‡ï¼› # TCPè¿æ¥æ•°å¯ä»¥ç”¨æ¥åˆ¤æ–­æ€§èƒ½é—®é¢˜æ˜¯å¦ç”±äºå»ºç«‹äº†è¿‡å¤šçš„è¿æ¥ï¼Œè¿›ä¸€æ­¥å¯ä»¥åˆ¤æ–­æ˜¯ä¸»åŠ¨å‘èµ·çš„è¿æ¥ï¼Œè¿˜æ˜¯è¢«åŠ¨æ¥å—çš„è¿æ¥ã€‚TCPé‡ä¼ å¯èƒ½æ˜¯å› ä¸ºç½‘ç»œç¯å¢ƒæ¶åŠ£ï¼Œæˆ–è€…æœåŠ¡å™¨å‹åŠ›è¿‡å¤§å¯¼è‡´ä¸¢åŒ… sar -n TCP,ETCP 1 vmstat, ç»™å®šæ—¶é—´ç›‘æ§CPUä½¿ç”¨ç‡, å†…å­˜ä½¿ç”¨, è™šæ‹Ÿå†…å­˜äº¤äº’, IOè¯»å†™ # 2è¡¨ç¤ºæ¯2ç§’é‡‡é›†ä¸€æ¬¡çŠ¶æ€ä¿¡æ¯, 1è¡¨ç¤ºåªé‡‡é›†ä¸€æ¬¡(å¿½ç•¥æ—¢æ˜¯ä¸€ç›´é‡‡é›†) vmstat 2 1 "><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-02-16T00:00:00+00:00"><meta property="article:modified_time" content="2022-02-16T00:00:00+00:00"><meta property="article:tag" content="Linux"><meta name=twitter:card content="summary"><meta name=twitter:title content="Linux ä»£ç ç‰‡æ®µ"><meta name=twitter:description content="Linuxå…³æœº,é‡å¯
# å…³æœº
shutdown -h now

# é‡å¯
shutdown -r now
æŸ¥çœ‹ç³»ç»Ÿ,CPUä¿¡æ¯
# æŸ¥çœ‹ç³»ç»Ÿå†…æ ¸ä¿¡æ¯
uname -a

# æŸ¥çœ‹ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬
cat /proc/version

# æŸ¥çœ‹å½“å‰ç”¨æˆ·ç¯å¢ƒå˜é‡
env

cat /proc/cpuinfo

# æŸ¥çœ‹æœ‰å‡ ä¸ªé€»è¾‘cpu, åŒ…æ‹¬cpuå‹å·
cat /proc/cpuinfo | grep name | cut -f2 -d: | uniq -c

# æŸ¥çœ‹æœ‰å‡ é¢—cpu,æ¯é¢—åˆ†åˆ«æ˜¯å‡ æ ¸
cat /proc/cpuinfo | grep physical | uniq -c

# æŸ¥çœ‹å½“å‰CPUè¿è¡Œåœ¨32bitè¿˜æ˜¯64bitæ¨¡å¼ä¸‹, å¦‚æœæ˜¯è¿è¡Œåœ¨32bitä¸‹ä¹Ÿä¸ä»£è¡¨CPUä¸æ”¯æŒ64bit
getconf LONG_BIT

# ç»“æœå¤§äº0, è¯´æ˜æ”¯æŒ64bitè®¡ç®—. lmæŒ‡long mode, æ”¯æŒlmåˆ™æ˜¯64bit
cat /proc/cpuinfo | grep flags | grep ' lm ' | wc -l
å»ºç«‹è½¯è¿æ¥
ln -s /usr/local/jdk1.8/ jdk
rpmç›¸å…³
# æŸ¥çœ‹æ˜¯å¦é€šè¿‡rpmå®‰è£…äº†è¯¥è½¯ä»¶
rpm -qa | grep è½¯ä»¶å
sshkey
# åˆ›å»ºsshkey
ssh-keygen -t rsa -C your_email@example.com

#id_rsa.pub çš„å†…å®¹æ‹·è´åˆ°è¦æ§åˆ¶çš„æœåŠ¡å™¨çš„ home/username/.ssh/authorized_keys ä¸­,å¦‚æœæ²¡æœ‰åˆ™æ–°å»º(.sshæƒé™ä¸º700, authorized_keysæƒé™ä¸º600)
å‘½ä»¤é‡å‘½å
# åœ¨å„ä¸ªç”¨æˆ·çš„.bash_profileä¸­æ·»åŠ é‡å‘½åé…ç½®
alias ll='ls -alF'
åŒæ­¥æœåŠ¡å™¨æ—¶é—´
sudo ntpdate -u ntp.api.bz
åå°è¿è¡Œ
# åå°è¿è¡Œ,å¹¶ä¸”æœ‰nohup.outè¾“å‡º
nohup xxx &

# åå°è¿è¡Œ, ä¸è¾“å‡ºä»»ä½•æ—¥å¿—
nohup xxx > /dev/null &

# åå°è¿è¡Œ, å¹¶å°†é”™è¯¯ä¿¡æ¯åšæ ‡å‡†è¾“å‡ºåˆ°æ—¥å¿—ä¸­
nohup xxx >out.log 2>&amp;1 &
å¼ºåˆ¶æ´»åŠ¨ç”¨æˆ·é€€å‡º
# å‘½ä»¤æ¥å®Œæˆå¼ºåˆ¶æ´»åŠ¨ç”¨æˆ·é€€å‡º.å…¶ä¸­TTYè¡¨ç¤ºç»ˆç«¯åç§°
pkill -kill -t [TTY]
æŸ¥çœ‹å‘½ä»¤è·¯å¾„
which <å‘½ä»¤>
æŸ¥çœ‹è¿›ç¨‹æ‰€æœ‰æ‰“å¼€æœ€å¤§fdæ•°
ulimit -n
é…ç½®dns
vim /etc/resolv.conf
nslookup,æŸ¥çœ‹åŸŸåè·¯ç”±è¡¨
nslookup google.com
last,æœ€è¿‘ç™»å½•ä¿¡æ¯åˆ—è¡¨
# æœ€è¿‘ç™»å½•çš„5ä¸ªè´¦å·
last -n 5
è®¾ç½®å›ºå®šip
ifconfig em1  192.168.5.177 netmask 255.255.255.0
æŸ¥çœ‹è¿›ç¨‹å†…åŠ è½½çš„ç¯å¢ƒå˜é‡
# ä¹Ÿå¯ä»¥å» cd /proc ç›®å½•ä¸‹, æŸ¥çœ‹è¿›ç¨‹å†…å­˜ä¸­åŠ è½½çš„ä¸œè¥¿
ps eww -p  XXXXX(è¿›ç¨‹å·)
æŸ¥çœ‹è¿›ç¨‹æ ‘æ‰¾åˆ°æœåŠ¡å™¨è¿›ç¨‹
ps auwxf
æŸ¥çœ‹è¿›ç¨‹å¯åŠ¨è·¯å¾„
cd /proc/xxx(è¿›ç¨‹å·)
ls -all
# cwdå¯¹åº”çš„æ˜¯å¯åŠ¨è·¯å¾„
æ·»åŠ ç”¨æˆ·,é…ç½®sudoæƒé™
# æ–°å¢ç”¨æˆ·
useradd ç”¨æˆ·å
passwd ç”¨æˆ·å

#å¢åŠ sudoæƒé™
vim /etc/sudoers
# ä¿®æ”¹æ–‡ä»¶é‡Œé¢çš„
# root    ALL=(ALL)       ALL
# ç”¨æˆ·å ALL=(ALL)       ALL
å¼ºåˆ¶å…³é—­è¿›ç¨‹ååŒ…å«xxxçš„æ‰€æœ‰è¿›ç¨‹
ps aux|grep xxx | grep -v grep | awk '{print $2}' | xargs kill -9
vimæ“ä½œ
#normalæ¨¡å¼ä¸‹ gè¡¨ç¤ºå…¨å±€, xè¡¨ç¤ºæŸ¥æ‰¾çš„å†…å®¹, yè¡¨ç¤ºæ›¿æ¢åçš„å†…å®¹
:%s/x/y/g

#normalæ¨¡å¼ä¸‹
0  # å…‰æ ‡ç§»åˆ°è¡Œé¦–(æ•°å­—0)
$  # å…‰æ ‡ç§»è‡³è¡Œå°¾
shift + g # è·³åˆ°æ–‡ä»¶æœ€å
gg # è·³åˆ°æ–‡ä»¶å¤´

# æ˜¾ç¤ºè¡Œå·
:set nu

# å»é™¤è¡Œå·
:set nonu

# æ£€ç´¢
/xxx(æ£€ç´¢å†…å®¹)  # ä»å¤´æ£€ç´¢, æŒ‰næŸ¥æ‰¾ä¸‹ä¸€ä¸ª
?xxx(æ£€ç´¢å†…å®¹)  # ä»å°¾éƒ¨æ£€ç´¢
æ‰“å¼€åªè¯»æ–‡ä»¶,ä¿®æ”¹åéœ€è¦ä¿å­˜æ—¶(ä¸ç”¨åˆ‡æ¢ç”¨æˆ·å³å¯ä¿å­˜çš„æ–¹å¼)
# åœ¨normalæ¨¡å¼ä¸‹
:w !sudo tee %
æŸ¥çœ‹ç£ç›˜, æ–‡ä»¶ç›®å½•åŸºæœ¬ä¿¡æ¯
# æŸ¥çœ‹ç£ç›˜æŒ‚è½½æƒ…å†µ
mount

# æŸ¥çœ‹ç£ç›˜åˆ†åŒºä¿¡æ¯
df

# æŸ¥çœ‹ç›®å½•åŠå­ç›®å½•å¤§å°
du -H -h

# æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹å„ä¸ªæ–‡ä»¶, æ–‡ä»¶å¤¹å äº†å¤šå°‘ç©ºé—´, ä¸ä¼šé€’å½’
du -sh *
wcå‘½ä»¤
# æŸ¥çœ‹æ–‡ä»¶é‡Œæœ‰å¤šå°‘è¡Œ
wc -l filename

# çœ‹æ–‡ä»¶é‡Œæœ‰å¤šå°‘ä¸ªword
wc -w filename

# æ–‡ä»¶é‡Œæœ€é•¿çš„é‚£ä¸€è¡Œæ˜¯å¤šå°‘ä¸ªå­—
wc -L filename

# ç»Ÿè®¡å­—èŠ‚æ•°
wc -c
å‹ç¼©å‘½ä»¤
tar czvf xxx.tar å‹ç¼©ç›®å½•

zip -r xxx.zip å‹ç¼©ç›®å½•
è§£å‹ç¼©å‘½ä»¤
tar zxvf xxx.tar

# è§£å‹åˆ°æŒ‡å®šæ–‡ä»¶å¤¹
tar zxvf xxx.tar -C /xxx/yyy/

unzip xxx.zip
å˜æ›´æ–‡ä»¶æ‰€å±ç”¨æˆ·, ç”¨æˆ·ç»„
chown eagleye.eagleye xxx.log
cp, scp, mkdir
#å¤åˆ¶
cp xxx.log

# å¤åˆ¶å¹¶å¼ºåˆ¶è¦†ç›–åŒåæ–‡ä»¶
cp -f xxx.log

# å¤åˆ¶æ–‡ä»¶å¤¹
cp -r xxx(æºæ–‡ä»¶å¤¹) yyy(ç›®æ ‡æ–‡ä»¶å¤¹)

# è¿œç¨‹å¤åˆ¶
scp -P sshç«¯å£ username@10.10.10.101:/home/username/xxx /home/xxx

# çº§è”åˆ›å»ºç›®å½•
mkdir -p /xxx/yyy/zzz

# æ‰¹é‡åˆ›å»ºæ–‡ä»¶å¤¹, ä¼šåœ¨test,mainä¸‹éƒ½åˆ›å»ºjava, resourcesæ–‡ä»¶å¤¹
mkdir -p src/{test,main}/{java,resources}
æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶
diff -u 1.txt 2.txt
æ—¥å¿—è¾“å‡ºçš„å­—èŠ‚æ•°,å¯ä»¥ç”¨ä½œæ€§èƒ½æµ‹è¯•
# å¦‚æœåšæ€§èƒ½æµ‹è¯•, å¯ä»¥æ¯æ‰§è¡Œä¸€æ¬¡, å¾€æ—¥å¿—é‡Œé¢è¾“å‡º â€œ.â€ , è¿™æ ·æ—¥å¿—ä¸­çš„å­—èŠ‚æ•°å°±æ˜¯å®é™…çš„æ€§èƒ½æµ‹è¯•è¿è¡Œçš„æ¬¡æ•°, è¿˜å¯ä»¥çœ‹è§å®æ—¶é€Ÿç‡.
tail -f xxx.log | pv -bt
æŸ¥çœ‹, å»é™¤ç‰¹æ®Šå­—ç¬¦
# æŸ¥çœ‹ç‰¹æ®Šå­—ç¬¦
cat -v xxx.sh

# å»é™¤ç‰¹æ®Šå­—ç¬¦
sed -i 's/^M//gâ€™ env.sh  å»é™¤æ–‡ä»¶çš„ç‰¹æ®Šå­—ç¬¦, æ¯”å¦‚^M:  éœ€è¦è¿™æ ·è¾“å…¥: ctrl+v+enter
å¤„ç†å› ç³»ç»ŸåŸå› å¼•èµ·çš„æ–‡ä»¶ä¸­ç‰¹æ®Šå­—ç¬¦çš„é—®é¢˜
# å¯ä»¥è½¬æ¢ä¸ºè¯¥ç³»ç»Ÿä¸‹çš„æ–‡ä»¶æ ¼å¼
cat file.sh > file.sh_bak

# å…ˆå°†file.shä¸­æ–‡ä»¶å†…å®¹å¤åˆ¶ä¸‹æ¥ç„¶åè¿è¡Œ, ç„¶åç²˜è´´å†…å®¹, æœ€åctrl + d ä¿å­˜é€€å‡º
cat > file1.sh

# åœ¨vimä¸­é€šè¿‡å¦‚ä¸‹è®¾ç½®æ–‡ä»¶ç¼–ç å’Œæ–‡ä»¶æ ¼å¼
:set fileencodings=utf-8 ï¼Œç„¶å w ï¼ˆå­˜ç›˜ï¼‰ä¸€ä¸‹å³å¯è½¬åŒ–ä¸º utf8 æ ¼å¼ï¼Œ
:set fileformat=unix

# åœ¨macä¸‹ä½¿ç”¨dos2unixè¿›è¡Œæ–‡ä»¶æ ¼å¼åŒ–
find . -name &#34;*.sh&#34; | xargs dos2unix
tee, é‡å®šå‘çš„åŒæ—¶è¾“å‡ºåˆ°å±å¹•
awk â€˜{print $0}â€™ xxx.log | tee test.log
grep
# åå‘åŒ¹é…, æŸ¥æ‰¾ä¸åŒ…å«xxxçš„å†…å®¹
grep -v xxx

# æ’é™¤æ‰€æœ‰ç©ºè¡Œ
grep -v '^/pre>'

# è¿”å›ç»“æœ 2,åˆ™è¯´æ˜ç¬¬äºŒè¡Œæ˜¯ç©ºè¡Œ
grep -n â€œ^$â€ 111.txt

# æŸ¥è¯¢ä»¥abcå¼€å¤´çš„è¡Œ
grep -n â€œ^abcâ€ 111.txt

# åŒæ—¶åˆ—å‡ºè¯¥è¯è¯­å‡ºç°åœ¨æ–‡ç« çš„ç¬¬å‡ è¡Œ
grep 'xxx' -n xxx.log

# è®¡ç®—ä¸€ä¸‹è¯¥å­—ä¸²å‡ºç°çš„æ¬¡æ•°
grep 'xxx' -c xxx.log

# æ¯”å¯¹çš„æ—¶å€™ï¼Œä¸è®¡è¾ƒå¤§å°å†™çš„ä¸åŒ
grep 'xxx' -i xxx.log
awk
# ä»¥':' ä¸ºåˆ†éš”ç¬¦,å¦‚æœç¬¬äº”åŸŸæœ‰useråˆ™è¾“å‡ºè¯¥è¡Œ
awk -F ':' '{if ($5 ~ /user/) print $0}' /etc/passwd

# ç»Ÿè®¡å•ä¸ªæ–‡ä»¶ä¸­æŸä¸ªå­—ç¬¦ï¼ˆä¸²ï¼‰(ä¸­æ–‡æ— æ•ˆ)å‡ºç°çš„æ¬¡æ•°
awk -v RS='character' 'END {print --NR}' xxx.txt
find
# åœ¨ç›®å½•ä¸‹æ‰¾åç¼€æ˜¯.mysqlçš„æ–‡ä»¶
find /home/eagleye -name '*.mysql' -print

# ä¼šä» /usr ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾æœ€è¿‘3å¤©ä¹‹å†…å­˜å–è¿‡çš„æ–‡ä»¶ã€‚
find /usr -atime 3 â€“print

# ä¼šä» /usr ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾æœ€è¿‘5å¤©ä¹‹å†…ä¿®æ”¹è¿‡çš„æ–‡ä»¶ã€‚
find /usr -ctime 5 â€“print

# ä¼šä» /doc ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾jacky çš„ã€æ–‡ä»¶åå¼€å¤´æ˜¯ jçš„æ–‡ä»¶ã€‚
find /doc -user jacky -name 'j*' â€“print

# ä¼šä» /doc ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾å¯»æ–‡ä»¶åæ˜¯ ja å¼€å¤´æˆ–è€… maå¼€å¤´çš„æ–‡ä»¶ã€‚
find /doc \( -name 'ja*' -o- -name 'ma*' \) â€“print

#  ä¼šä» /doc ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾åˆ°å‡¡æ˜¯æ–‡ä»¶åç»“å°¾ä¸º bakçš„æ–‡ä»¶ï¼ŒæŠŠå®ƒåˆ é™¤æ‰ã€‚-exec é€‰é¡¹æ˜¯æ‰§è¡Œçš„æ„æ€ï¼Œrm æ˜¯åˆ é™¤å‘½ä»¤ï¼Œ{ } è¡¨ç¤ºæ–‡ä»¶åï¼Œâ€œ\;â€æ˜¯è§„å®šçš„å‘½ä»¤ç»“å°¾ã€‚
find /doc -name '*bak' -exec rm {} \;
æŸ¥çœ‹ä»€ä¹ˆè¿›ç¨‹ä½¿ç”¨äº†è¯¥ç«¯å£
lsof -i:port
è·å–æœ¬æœºipåœ°å€
/sbin/ifconfig -a|grep inet|grep -v 127.0.0.1|grep -v inet6|awk '{print $2}'|tr -d &#34;addr:&#34;
iptables
# æŸ¥çœ‹iptablesçŠ¶æ€
service iptables status

# è¦å°åœä¸€ä¸ªip
iptables -I INPUT -s ***.***.***.*** -j DROP

# è¦è§£å°ä¸€ä¸ªIPï¼Œä½¿ç”¨ä¸‹é¢è¿™æ¡å‘½ä»¤ï¼š
iptables -D INPUT -s ***.***.***.*** -j DROP

å¤‡æ³¨: å‚æ•°-Iæ˜¯è¡¨ç¤ºInsertï¼ˆæ·»åŠ ï¼‰ï¼Œ-Dè¡¨ç¤ºDeleteï¼ˆåˆ é™¤ï¼‰ã€‚åé¢è·Ÿçš„æ˜¯è§„åˆ™ï¼ŒINPUTè¡¨ç¤ºå…¥ç«™ï¼Œ***.***.***.***è¡¨ç¤ºè¦å°åœçš„IPï¼ŒDROPè¡¨ç¤ºæ”¾å¼ƒè¿æ¥ã€‚

#å¼€å¯9090ç«¯å£çš„è®¿é—®
/sbin/iptables -I INPUT -p tcp --dport 9090 -j ACCEPT

# é˜²ç«å¢™å¼€å¯ã€å…³é—­ã€é‡å¯
/etc/init.d/iptables status
/etc/init.d/iptables start
/etc/init.d/iptables stop
/etc/init.d/iptables restart
ncå‘½ä»¤, tcpè°ƒè¯•åˆ©å™¨
#ç»™æŸä¸€ä¸ªendpointå‘é€TCPè¯·æ±‚,å°±å°†dataçš„å†…å®¹å‘é€åˆ°å¯¹ç«¯
nc 192.168.0.11 8000 < data.txt

#ncå¯ä»¥å½“åšæœåŠ¡å™¨ï¼Œç›‘å¬æŸä¸ªç«¯å£å·,æŠŠæŸä¸€æ¬¡è¯·æ±‚çš„å†…å®¹å­˜å‚¨åˆ°received_dataé‡Œ
nc -l 8000 > received_data

#ä¸Šè¾¹åªç›‘å¬ä¸€æ¬¡ï¼Œå¦‚æœå¤šæ¬¡å¯ä»¥åŠ ä¸Š-kå‚æ•°
nc -lk 8000
tcpdump
# dumpå‡ºæœ¬æœº12301ç«¯å£çš„tcpåŒ…
tcpdump -i em1 tcp port 12301 -s 1500 -w abc.pcap
è·Ÿè¸ªç½‘ç»œè·¯ç”±è·¯å¾„
# tracerouteé»˜è®¤ä½¿ç”¨udpæ–¹å¼, å¦‚æœæ˜¯-Iåˆ™æ”¹æˆicmpæ–¹å¼
traceroute -I www.163.com

# ä»ttlç¬¬3è·³è·Ÿè¸ª
traceroute -M 3 www.163.com

# åŠ ä¸Šç«¯å£è·Ÿè¸ª
traceroute -p 8080 192.168.10.11
ss
# æ˜¾ç¤ºæœ¬åœ°æ‰“å¼€çš„æ‰€æœ‰ç«¯å£
ss -l

# æ˜¾ç¤ºæ¯ä¸ªè¿›ç¨‹å…·ä½“æ‰“å¼€çš„socket
ss -pl

# æ˜¾ç¤ºæ‰€æœ‰tcp socket
ss -t -a

# æ˜¾ç¤ºæ‰€æœ‰çš„UDP Socekt
ss -u -a

# æ˜¾ç¤ºæ‰€æœ‰å·²å»ºç«‹çš„SMTPè¿æ¥
ss -o state established '( dport = :smtp or sport = :smtp )'

# æ˜¾ç¤ºæ‰€æœ‰å·²å»ºç«‹çš„HTTPè¿æ¥
ss -o state established '( dport = :http or sport = :http )'

æ‰¾å‡ºæ‰€æœ‰è¿æ¥XæœåŠ¡å™¨çš„è¿›ç¨‹
ss -x src /tmp/.X11-unix/*

åˆ—å‡ºå½“å‰socketç»Ÿè®¡ä¿¡æ¯
ss -s

è§£é‡Šï¼šnetstatæ˜¯éå†/procä¸‹é¢æ¯ä¸ªPIDç›®å½•ï¼Œssç›´æ¥è¯»/proc/netä¸‹é¢çš„ç»Ÿè®¡ä¿¡æ¯ã€‚æ‰€ä»¥ssæ‰§è¡Œçš„æ—¶å€™æ¶ˆè€—èµ„æºä»¥åŠæ¶ˆè€—çš„æ—¶é—´éƒ½æ¯”netstatå°‘å¾ˆå¤š
netstat
# è¾“å‡ºæ¯ä¸ªipçš„è¿æ¥æ•°ï¼Œä»¥åŠæ€»çš„å„ä¸ªçŠ¶æ€çš„è¿æ¥æ•°
netstat -n | awk '/^tcp/ {n=split($(NF-1),array,&#34;:&#34;);if(n<=2)++S[array[(1)]];else++S[array[(4)]];++s[$NF];++N} END {for(a in S){printf(&#34;%-20s %s\n&#34;, a, S[a]);++I}printf(&#34;%-20s %s\n&#34;,&#34;TOTAL_IP&#34;,I);for(a in s) printf(&#34;%-20s %s\n&#34;,a, s[a]);printf(&#34;%-20s %s\n&#34;,&#34;TOTAL_LINK&#34;,N);}'

# ç»Ÿè®¡æ‰€æœ‰è¿æ¥çŠ¶æ€,
# CLOSEDï¼šæ— è¿æ¥æ˜¯æ´»åŠ¨çš„æˆ–æ­£åœ¨è¿›è¡Œ
# LISTENï¼šæœåŠ¡å™¨åœ¨ç­‰å¾…è¿›å…¥å‘¼å«
# SYN_RECVï¼šä¸€ä¸ªè¿æ¥è¯·æ±‚å·²ç»åˆ°è¾¾ï¼Œç­‰å¾…ç¡®è®¤
# SYN_SENTï¼šåº”ç”¨å·²ç»å¼€å§‹ï¼Œæ‰“å¼€ä¸€ä¸ªè¿æ¥
# ESTABLISHEDï¼šæ­£å¸¸æ•°æ®ä¼ è¾“çŠ¶æ€
# FIN_WAIT1ï¼šåº”ç”¨è¯´å®ƒå·²ç»å®Œæˆ
# FIN_WAIT2ï¼šå¦ä¸€è¾¹å·²åŒæ„é‡Šæ”¾
# ITMED_WAITï¼šç­‰å¾…æ‰€æœ‰åˆ†ç»„æ­»æ‰
# CLOSINGï¼šä¸¤è¾¹åŒæ—¶å°è¯•å…³é—­
# TIME_WAITï¼šä¸»åŠ¨å…³é—­è¿æ¥ä¸€ç«¯è¿˜æ²¡æœ‰ç­‰åˆ°å¦ä¸€ç«¯åé¦ˆæœŸé—´çš„çŠ¶æ€
# LAST_ACKï¼šç­‰å¾…æ‰€æœ‰åˆ†ç»„æ­»æ‰
netstat -n | awk '/^tcp/ {++state[$NF]} END {for(key in state) print key,&#34;\t&#34;,state[key]}'

# æŸ¥æ‰¾è¾ƒå¤štime_waitè¿æ¥
netstat -n|grep TIME_WAIT|awk '{print $5}'|sort|uniq -c|sort -rn|head -n20
top
dmesg,æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—
iostat,ç£ç›˜IOæƒ…å†µç›‘æ§
iostat -xz 1

# r/s, w/s, rkB/s, wkB/sï¼šåˆ†åˆ«è¡¨ç¤ºæ¯ç§’è¯»å†™æ¬¡æ•°å’Œæ¯ç§’è¯»å†™æ•°æ®é‡ï¼ˆåƒå­—èŠ‚ï¼‰ã€‚è¯»å†™é‡è¿‡å¤§ï¼Œå¯èƒ½ä¼šå¼•èµ·æ€§èƒ½é—®é¢˜ã€‚
# awaitï¼šIOæ“ä½œçš„å¹³å‡ç­‰å¾…æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’ã€‚è¿™æ˜¯åº”ç”¨ç¨‹åºåœ¨å’Œç£ç›˜äº¤äº’æ—¶ï¼Œéœ€è¦æ¶ˆè€—çš„æ—¶é—´ï¼ŒåŒ…æ‹¬IOç­‰å¾…å’Œå®é™…æ“ä½œçš„è€—æ—¶ã€‚å¦‚æœè¿™ä¸ªæ•°å€¼è¿‡å¤§ï¼Œå¯èƒ½æ˜¯ç¡¬ä»¶è®¾å¤‡é‡åˆ°äº†ç“¶é¢ˆæˆ–è€…å‡ºç°æ•…éšœã€‚
# avgqu-szï¼šå‘è®¾å¤‡å‘å‡ºçš„è¯·æ±‚å¹³å‡æ•°é‡ã€‚å¦‚æœè¿™ä¸ªæ•°å€¼å¤§äº1ï¼Œå¯èƒ½æ˜¯ç¡¬ä»¶è®¾å¤‡å·²ç»é¥±å’Œï¼ˆéƒ¨åˆ†å‰ç«¯ç¡¬ä»¶è®¾å¤‡æ”¯æŒå¹¶è¡Œå†™å…¥ï¼‰ã€‚
# %utilï¼šè®¾å¤‡åˆ©ç”¨ç‡ã€‚è¿™ä¸ªæ•°å€¼è¡¨ç¤ºè®¾å¤‡çš„ç¹å¿™ç¨‹åº¦ï¼Œç»éªŒå€¼æ˜¯å¦‚æœè¶…è¿‡60ï¼Œå¯èƒ½ä¼šå½±å“IOæ€§èƒ½ï¼ˆå¯ä»¥å‚ç…§IOæ“ä½œå¹³å‡ç­‰å¾…æ—¶é—´ï¼‰ã€‚å¦‚æœåˆ°è¾¾100%ï¼Œè¯´æ˜ç¡¬ä»¶è®¾å¤‡å·²ç»é¥±å’Œã€‚
# å¦‚æœæ˜¾ç¤ºçš„æ˜¯é€»è¾‘è®¾å¤‡çš„æ•°æ®ï¼Œé‚£ä¹ˆè®¾å¤‡åˆ©ç”¨ç‡ä¸ä»£è¡¨åç«¯å®é™…çš„ç¡¬ä»¶è®¾å¤‡å·²ç»é¥±å’Œã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå³ä½¿IOæ€§èƒ½ä¸ç†æƒ³ï¼Œä¹Ÿä¸ä¸€å®šæ„å‘³è¿™åº”ç”¨ç¨‹åºæ€§èƒ½ä¼šä¸å¥½ï¼Œå¯ä»¥åˆ©ç”¨è¯¸å¦‚é¢„è¯»å–ã€å†™ç¼“å­˜ç­‰ç­–ç•¥æå‡åº”ç”¨æ€§èƒ½ã€‚
free,å†…å­˜ä½¿ç”¨æƒ…å†µ
free -m

eg:

     total       used       free     shared    buffers     cached
Mem:          1002        769        232          0         62        421
-/+ buffers/cache:          286        715
Swap:          1153          0       1153

ç¬¬ä¸€éƒ¨åˆ†Memè¡Œ:
total å†…å­˜æ€»æ•°: 1002M
used å·²ç»ä½¿ç”¨çš„å†…å­˜æ•°: 769M
free ç©ºé—²çš„å†…å­˜æ•°: 232M
shared å½“å‰å·²ç»åºŸå¼ƒä¸ç”¨,æ€»æ˜¯0
buffers Buffer ç¼“å­˜å†…å­˜æ•°: 62M
cached Page ç¼“å­˜å†…å­˜æ•°:421M

å…³ç³»ï¼štotal(1002M) = used(769M) + free(232M)

ç¬¬äºŒéƒ¨åˆ†(-/+ buffers/cache):
(-buffers/cache) usedå†…å­˜æ•°ï¼š286M (æŒ‡çš„ç¬¬ä¸€éƒ¨åˆ†Memè¡Œä¸­çš„used â€“ buffers â€“ cached)
(+buffers/cache) freeå†…å­˜æ•°: 715M (æŒ‡çš„ç¬¬ä¸€éƒ¨åˆ†Memè¡Œä¸­çš„free + buffers + cached)

å¯è§-buffers/cacheåæ˜ çš„æ˜¯è¢«ç¨‹åºå®å®åœ¨åœ¨åƒæ‰çš„å†…å­˜,è€Œ+buffers/cacheåæ˜ çš„æ˜¯å¯ä»¥æŒªç”¨çš„å†…å­˜æ€»æ•°.

ç¬¬ä¸‰éƒ¨åˆ†æ˜¯æŒ‡äº¤æ¢åˆ†åŒº
sar,æŸ¥çœ‹ç½‘ç»œååçŠ¶æ€
# sarå‘½ä»¤åœ¨è¿™é‡Œå¯ä»¥æŸ¥çœ‹ç½‘ç»œè®¾å¤‡çš„ååç‡ã€‚åœ¨æ’æŸ¥æ€§èƒ½é—®é¢˜æ—¶ï¼Œå¯ä»¥é€šè¿‡ç½‘ç»œè®¾å¤‡çš„ååé‡ï¼Œåˆ¤æ–­ç½‘ç»œè®¾å¤‡æ˜¯å¦å·²ç»é¥±å’Œ
sar -n DEV 1

# sarå‘½ä»¤åœ¨è¿™é‡Œç”¨äºæŸ¥çœ‹TCPè¿æ¥çŠ¶æ€ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š
# active/sï¼šæ¯ç§’æœ¬åœ°å‘èµ·çš„TCPè¿æ¥æ•°ï¼Œæ—¢é€šè¿‡connectè°ƒç”¨åˆ›å»ºçš„TCPè¿æ¥ï¼›
# passive/sï¼šæ¯ç§’è¿œç¨‹å‘èµ·çš„TCPè¿æ¥æ•°ï¼Œå³é€šè¿‡acceptè°ƒç”¨åˆ›å»ºçš„TCPè¿æ¥ï¼›
# retrans/sï¼šæ¯ç§’TCPé‡ä¼ æ•°é‡ï¼›
# TCPè¿æ¥æ•°å¯ä»¥ç”¨æ¥åˆ¤æ–­æ€§èƒ½é—®é¢˜æ˜¯å¦ç”±äºå»ºç«‹äº†è¿‡å¤šçš„è¿æ¥ï¼Œè¿›ä¸€æ­¥å¯ä»¥åˆ¤æ–­æ˜¯ä¸»åŠ¨å‘èµ·çš„è¿æ¥ï¼Œè¿˜æ˜¯è¢«åŠ¨æ¥å—çš„è¿æ¥ã€‚TCPé‡ä¼ å¯èƒ½æ˜¯å› ä¸ºç½‘ç»œç¯å¢ƒæ¶åŠ£ï¼Œæˆ–è€…æœåŠ¡å™¨å‹åŠ›è¿‡å¤§å¯¼è‡´ä¸¢åŒ…
sar -n TCP,ETCP 1
vmstat, ç»™å®šæ—¶é—´ç›‘æ§CPUä½¿ç”¨ç‡, å†…å­˜ä½¿ç”¨, è™šæ‹Ÿå†…å­˜äº¤äº’, IOè¯»å†™
# 2è¡¨ç¤ºæ¯2ç§’é‡‡é›†ä¸€æ¬¡çŠ¶æ€ä¿¡æ¯, 1è¡¨ç¤ºåªé‡‡é›†ä¸€æ¬¡(å¿½ç•¥æ—¢æ˜¯ä¸€ç›´é‡‡é›†)
vmstat 2 1
"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"ğŸ“š åšå®¢","item":"https://lesanouo.github.io/blog/posts/"},{"@type":"ListItem","position":2,"name":"Linux ä»£ç ç‰‡æ®µ","item":"https://lesanouo.github.io/blog/posts/snippet/linux/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Linux ä»£ç ç‰‡æ®µ","name":"Linux ä»£ç ç‰‡æ®µ","description":"Linuxå…³æœº,é‡å¯ # å…³æœº shutdown -h now # é‡å¯ shutdown -r now æŸ¥çœ‹ç³»ç»Ÿ,CPUä¿¡æ¯ # æŸ¥çœ‹ç³»ç»Ÿå†…æ ¸ä¿¡æ¯ uname -a # æŸ¥çœ‹ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬ cat /proc/version # æŸ¥çœ‹å½“å‰ç”¨æˆ·ç¯å¢ƒå˜é‡ env cat /proc/cpuinfo # æŸ¥çœ‹æœ‰å‡ ä¸ªé€»è¾‘cpu, åŒ…æ‹¬cpuå‹å· cat /proc/cpuinfo | grep name | cut -f2 -d: | uniq -c # æŸ¥çœ‹æœ‰å‡ é¢—cpu,æ¯é¢—åˆ†åˆ«æ˜¯å‡ æ ¸ cat /proc/cpuinfo | grep physical | uniq -c # æŸ¥çœ‹å½“å‰CPUè¿è¡Œåœ¨32bitè¿˜æ˜¯64bitæ¨¡å¼ä¸‹, å¦‚æœæ˜¯è¿è¡Œåœ¨32bitä¸‹ä¹Ÿä¸ä»£è¡¨CPUä¸æ”¯æŒ64bit getconf LONG_BIT # ç»“æœå¤§äº0, è¯´æ˜æ”¯æŒ64bitè®¡ç®—. lmæŒ‡long mode, æ”¯æŒlmåˆ™æ˜¯64bit cat /proc/cpuinfo | grep flags | grep \u0026#39; lm \u0026#39; | wc -l å»ºç«‹è½¯è¿æ¥ ln -s /usr/local/jdk1.8/ jdk rpmç›¸å…³ # æŸ¥çœ‹æ˜¯å¦é€šè¿‡rpmå®‰è£…äº†è¯¥è½¯ä»¶ rpm -qa | grep è½¯ä»¶å sshkey # åˆ›å»ºsshkey ssh-keygen -t rsa -C your_email@example.com #id_rsa.pub çš„å†…å®¹æ‹·è´åˆ°è¦æ§åˆ¶çš„æœåŠ¡å™¨çš„ home/username/.ssh/authorized_keys ä¸­,å¦‚æœæ²¡æœ‰åˆ™æ–°å»º(.sshæƒé™ä¸º700, authorized_keysæƒé™ä¸º600) å‘½ä»¤é‡å‘½å # åœ¨å„ä¸ªç”¨æˆ·çš„.bash_profileä¸­æ·»åŠ é‡å‘½åé…ç½® alias ll=\u0026#39;ls -alF\u0026#39; åŒæ­¥æœåŠ¡å™¨æ—¶é—´ sudo ntpdate -u ntp.api.bz åå°è¿è¡Œ # åå°è¿è¡Œ,å¹¶ä¸”æœ‰nohup.outè¾“å‡º nohup xxx \u0026amp; # åå°è¿è¡Œ, ä¸è¾“å‡ºä»»ä½•æ—¥å¿— nohup xxx \u0026gt; /dev/null \u0026amp; # åå°è¿è¡Œ, å¹¶å°†é”™è¯¯ä¿¡æ¯åšæ ‡å‡†è¾“å‡ºåˆ°æ—¥å¿—ä¸­ nohup xxx \u0026gt;out.log 2\u0026gt;\u0026amp;1 \u0026amp; å¼ºåˆ¶æ´»åŠ¨ç”¨æˆ·é€€å‡º # å‘½ä»¤æ¥å®Œæˆå¼ºåˆ¶æ´»åŠ¨ç”¨æˆ·é€€å‡º.å…¶ä¸­TTYè¡¨ç¤ºç»ˆç«¯åç§° pkill -kill -t [TTY] æŸ¥çœ‹å‘½ä»¤è·¯å¾„ which \u0026lt;å‘½ä»¤\u0026gt; æŸ¥çœ‹è¿›ç¨‹æ‰€æœ‰æ‰“å¼€æœ€å¤§fdæ•° ulimit -n é…ç½®dns vim /etc/resolv.conf nslookup,æŸ¥çœ‹åŸŸåè·¯ç”±è¡¨ nslookup google.com last,æœ€è¿‘ç™»å½•ä¿¡æ¯åˆ—è¡¨ # æœ€è¿‘ç™»å½•çš„5ä¸ªè´¦å· last -n 5 è®¾ç½®å›ºå®šip ifconfig em1 192.168.5.177 netmask 255.255.255.0 æŸ¥çœ‹è¿›ç¨‹å†…åŠ è½½çš„ç¯å¢ƒå˜é‡ # ä¹Ÿå¯ä»¥å» cd /proc ç›®å½•ä¸‹, æŸ¥çœ‹è¿›ç¨‹å†…å­˜ä¸­åŠ è½½çš„ä¸œè¥¿ ps eww -p XXXXX(è¿›ç¨‹å·) æŸ¥çœ‹è¿›ç¨‹æ ‘æ‰¾åˆ°æœåŠ¡å™¨è¿›ç¨‹ ps auwxf æŸ¥çœ‹è¿›ç¨‹å¯åŠ¨è·¯å¾„ cd /proc/xxx(è¿›ç¨‹å·) ls -all # cwdå¯¹åº”çš„æ˜¯å¯åŠ¨è·¯å¾„ æ·»åŠ ç”¨æˆ·,é…ç½®sudoæƒé™ # æ–°å¢ç”¨æˆ· useradd ç”¨æˆ·å passwd ç”¨æˆ·å #å¢åŠ sudoæƒé™ vim /etc/sudoers # ä¿®æ”¹æ–‡ä»¶é‡Œé¢çš„ # root ALL=(ALL) ALL # ç”¨æˆ·å ALL=(ALL) ALL å¼ºåˆ¶å…³é—­è¿›ç¨‹ååŒ…å«xxxçš„æ‰€æœ‰è¿›ç¨‹ ps aux|grep xxx | grep -v grep | awk \u0026#39;{print $2}\u0026#39; | xargs kill -9 vimæ“ä½œ #normalæ¨¡å¼ä¸‹ gè¡¨ç¤ºå…¨å±€, xè¡¨ç¤ºæŸ¥æ‰¾çš„å†…å®¹, yè¡¨ç¤ºæ›¿æ¢åçš„å†…å®¹ :%s/x/y/g #normalæ¨¡å¼ä¸‹ 0 # å…‰æ ‡ç§»åˆ°è¡Œé¦–(æ•°å­—0) $ # å…‰æ ‡ç§»è‡³è¡Œå°¾ shift + g # è·³åˆ°æ–‡ä»¶æœ€å gg # è·³åˆ°æ–‡ä»¶å¤´ # æ˜¾ç¤ºè¡Œå· :set nu # å»é™¤è¡Œå· :set nonu # æ£€ç´¢ /xxx(æ£€ç´¢å†…å®¹) # ä»å¤´æ£€ç´¢, æŒ‰næŸ¥æ‰¾ä¸‹ä¸€ä¸ª ?xxx(æ£€ç´¢å†…å®¹) # ä»å°¾éƒ¨æ£€ç´¢ æ‰“å¼€åªè¯»æ–‡ä»¶,ä¿®æ”¹åéœ€è¦ä¿å­˜æ—¶(ä¸ç”¨åˆ‡æ¢ç”¨æˆ·å³å¯ä¿å­˜çš„æ–¹å¼) # åœ¨normalæ¨¡å¼ä¸‹ :w !sudo tee % æŸ¥çœ‹ç£ç›˜, æ–‡ä»¶ç›®å½•åŸºæœ¬ä¿¡æ¯ # æŸ¥çœ‹ç£ç›˜æŒ‚è½½æƒ…å†µ mount # æŸ¥çœ‹ç£ç›˜åˆ†åŒºä¿¡æ¯ df # æŸ¥çœ‹ç›®å½•åŠå­ç›®å½•å¤§å° du -H -h # æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹å„ä¸ªæ–‡ä»¶, æ–‡ä»¶å¤¹å äº†å¤šå°‘ç©ºé—´, ä¸ä¼šé€’å½’ du -sh * wcå‘½ä»¤ # æŸ¥çœ‹æ–‡ä»¶é‡Œæœ‰å¤šå°‘è¡Œ wc -l filename # çœ‹æ–‡ä»¶é‡Œæœ‰å¤šå°‘ä¸ªword wc -w filename # æ–‡ä»¶é‡Œæœ€é•¿çš„é‚£ä¸€è¡Œæ˜¯å¤šå°‘ä¸ªå­— wc -L filename # ç»Ÿè®¡å­—èŠ‚æ•° wc -c å‹ç¼©å‘½ä»¤ tar czvf xxx.tar å‹ç¼©ç›®å½• zip -r xxx.zip å‹ç¼©ç›®å½• è§£å‹ç¼©å‘½ä»¤ tar zxvf xxx.tar # è§£å‹åˆ°æŒ‡å®šæ–‡ä»¶å¤¹ tar zxvf xxx.tar -C /xxx/yyy/ unzip xxx.zip å˜æ›´æ–‡ä»¶æ‰€å±ç”¨æˆ·, ç”¨æˆ·ç»„ chown eagleye.eagleye xxx.log cp, scp, mkdir #å¤åˆ¶ cp xxx.log # å¤åˆ¶å¹¶å¼ºåˆ¶è¦†ç›–åŒåæ–‡ä»¶ cp -f xxx.log # å¤åˆ¶æ–‡ä»¶å¤¹ cp -r xxx(æºæ–‡ä»¶å¤¹) yyy(ç›®æ ‡æ–‡ä»¶å¤¹) # è¿œç¨‹å¤åˆ¶ scp -P sshç«¯å£ username@10.10.10.101:/home/username/xxx /home/xxx # çº§è”åˆ›å»ºç›®å½• mkdir -p /xxx/yyy/zzz # æ‰¹é‡åˆ›å»ºæ–‡ä»¶å¤¹, ä¼šåœ¨test,mainä¸‹éƒ½åˆ›å»ºjava, resourcesæ–‡ä»¶å¤¹ mkdir -p src/{test,main}/{java,resources} æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶ diff -u 1.txt 2.txt æ—¥å¿—è¾“å‡ºçš„å­—èŠ‚æ•°,å¯ä»¥ç”¨ä½œæ€§èƒ½æµ‹è¯• # å¦‚æœåšæ€§èƒ½æµ‹è¯•, å¯ä»¥æ¯æ‰§è¡Œä¸€æ¬¡, å¾€æ—¥å¿—é‡Œé¢è¾“å‡º â€œ.â€ , è¿™æ ·æ—¥å¿—ä¸­çš„å­—èŠ‚æ•°å°±æ˜¯å®é™…çš„æ€§èƒ½æµ‹è¯•è¿è¡Œçš„æ¬¡æ•°, è¿˜å¯ä»¥çœ‹è§å®æ—¶é€Ÿç‡. tail -f xxx.log | pv -bt æŸ¥çœ‹, å»é™¤ç‰¹æ®Šå­—ç¬¦ # æŸ¥çœ‹ç‰¹æ®Šå­—ç¬¦ cat -v xxx.sh # å»é™¤ç‰¹æ®Šå­—ç¬¦ sed -i \u0026#39;s/^M//gâ€™ env.sh å»é™¤æ–‡ä»¶çš„ç‰¹æ®Šå­—ç¬¦, æ¯”å¦‚^M: éœ€è¦è¿™æ ·è¾“å…¥: ctrl+v+enter å¤„ç†å› ç³»ç»ŸåŸå› å¼•èµ·çš„æ–‡ä»¶ä¸­ç‰¹æ®Šå­—ç¬¦çš„é—®é¢˜ # å¯ä»¥è½¬æ¢ä¸ºè¯¥ç³»ç»Ÿä¸‹çš„æ–‡ä»¶æ ¼å¼ cat file.sh \u0026gt; file.sh_bak # å…ˆå°†file.shä¸­æ–‡ä»¶å†…å®¹å¤åˆ¶ä¸‹æ¥ç„¶åè¿è¡Œ, ç„¶åç²˜è´´å†…å®¹, æœ€åctrl + d ä¿å­˜é€€å‡º cat \u0026gt; file1.sh # åœ¨vimä¸­é€šè¿‡å¦‚ä¸‹è®¾ç½®æ–‡ä»¶ç¼–ç å’Œæ–‡ä»¶æ ¼å¼ :set fileencodings=utf-8 ï¼Œç„¶å w ï¼ˆå­˜ç›˜ï¼‰ä¸€ä¸‹å³å¯è½¬åŒ–ä¸º utf8 æ ¼å¼ï¼Œ :set fileformat=unix # åœ¨macä¸‹ä½¿ç”¨dos2unixè¿›è¡Œæ–‡ä»¶æ ¼å¼åŒ– find . -name \u0026#34;*.sh\u0026#34; | xargs dos2unix tee, é‡å®šå‘çš„åŒæ—¶è¾“å‡ºåˆ°å±å¹• awk â€˜{print $0}â€™ xxx.log | tee test.log grep # åå‘åŒ¹é…, æŸ¥æ‰¾ä¸åŒ…å«xxxçš„å†…å®¹ grep -v xxx # æ’é™¤æ‰€æœ‰ç©ºè¡Œ grep -v \u0026#39;^/pre\u0026gt;\u0026#39; # è¿”å›ç»“æœ 2,åˆ™è¯´æ˜ç¬¬äºŒè¡Œæ˜¯ç©ºè¡Œ grep -n â€œ^$â€ 111.txt # æŸ¥è¯¢ä»¥abcå¼€å¤´çš„è¡Œ grep -n â€œ^abcâ€ 111.txt # åŒæ—¶åˆ—å‡ºè¯¥è¯è¯­å‡ºç°åœ¨æ–‡ç« çš„ç¬¬å‡ è¡Œ grep \u0026#39;xxx\u0026#39; -n xxx.log # è®¡ç®—ä¸€ä¸‹è¯¥å­—ä¸²å‡ºç°çš„æ¬¡æ•° grep \u0026#39;xxx\u0026#39; -c xxx.log # æ¯”å¯¹çš„æ—¶å€™ï¼Œä¸è®¡è¾ƒå¤§å°å†™çš„ä¸åŒ grep \u0026#39;xxx\u0026#39; -i xxx.log awk # ä»¥\u0026#39;:\u0026#39; ä¸ºåˆ†éš”ç¬¦,å¦‚æœç¬¬äº”åŸŸæœ‰useråˆ™è¾“å‡ºè¯¥è¡Œ awk -F \u0026#39;:\u0026#39; \u0026#39;{if ($5 ~ /user/) print $0}\u0026#39; /etc/passwd # ç»Ÿè®¡å•ä¸ªæ–‡ä»¶ä¸­æŸä¸ªå­—ç¬¦ï¼ˆä¸²ï¼‰(ä¸­æ–‡æ— æ•ˆ)å‡ºç°çš„æ¬¡æ•° awk -v RS=\u0026#39;character\u0026#39; \u0026#39;END {print --NR}\u0026#39; xxx.txt find # åœ¨ç›®å½•ä¸‹æ‰¾åç¼€æ˜¯.mysqlçš„æ–‡ä»¶ find /home/eagleye -name \u0026#39;*.mysql\u0026#39; -print # ä¼šä» /usr ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾æœ€è¿‘3å¤©ä¹‹å†…å­˜å–è¿‡çš„æ–‡ä»¶ã€‚ find /usr -atime 3 â€“print # ä¼šä» /usr ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾æœ€è¿‘5å¤©ä¹‹å†…ä¿®æ”¹è¿‡çš„æ–‡ä»¶ã€‚ find /usr -ctime 5 â€“print # ä¼šä» /doc ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾jacky çš„ã€æ–‡ä»¶åå¼€å¤´æ˜¯ jçš„æ–‡ä»¶ã€‚ find /doc -user jacky -name \u0026#39;j*\u0026#39; â€“print # ä¼šä» /doc ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾å¯»æ–‡ä»¶åæ˜¯ ja å¼€å¤´æˆ–è€… maå¼€å¤´çš„æ–‡ä»¶ã€‚ find /doc \\( -name \u0026#39;ja*\u0026#39; -o- -name \u0026#39;ma*\u0026#39; \\) â€“print # ä¼šä» /doc ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾åˆ°å‡¡æ˜¯æ–‡ä»¶åç»“å°¾ä¸º bakçš„æ–‡ä»¶ï¼ŒæŠŠå®ƒåˆ é™¤æ‰ã€‚-exec é€‰é¡¹æ˜¯æ‰§è¡Œçš„æ„æ€ï¼Œrm æ˜¯åˆ é™¤å‘½ä»¤ï¼Œ{ } è¡¨ç¤ºæ–‡ä»¶åï¼Œâ€œ\\;â€æ˜¯è§„å®šçš„å‘½ä»¤ç»“å°¾ã€‚ find /doc -name \u0026#39;*bak\u0026#39; -exec rm {} \\; æŸ¥çœ‹ä»€ä¹ˆè¿›ç¨‹ä½¿ç”¨äº†è¯¥ç«¯å£ lsof -i:port è·å–æœ¬æœºipåœ°å€ /sbin/ifconfig -a|grep inet|grep -v 127.0.0.1|grep -v inet6|awk \u0026#39;{print $2}\u0026#39;|tr -d \u0026#34;addr:\u0026#34; iptables # æŸ¥çœ‹iptablesçŠ¶æ€ service iptables status # è¦å°åœä¸€ä¸ªip iptables -I INPUT -s ***.***.***.*** -j DROP # è¦è§£å°ä¸€ä¸ªIPï¼Œä½¿ç”¨ä¸‹é¢è¿™æ¡å‘½ä»¤ï¼š iptables -D INPUT -s ***.***.***.*** -j DROP å¤‡æ³¨: å‚æ•°-Iæ˜¯è¡¨ç¤ºInsertï¼ˆæ·»åŠ ï¼‰ï¼Œ-Dè¡¨ç¤ºDeleteï¼ˆåˆ é™¤ï¼‰ã€‚åé¢è·Ÿçš„æ˜¯è§„åˆ™ï¼ŒINPUTè¡¨ç¤ºå…¥ç«™ï¼Œ***.***.***.***è¡¨ç¤ºè¦å°åœçš„IPï¼ŒDROPè¡¨ç¤ºæ”¾å¼ƒè¿æ¥ã€‚ #å¼€å¯9090ç«¯å£çš„è®¿é—® /sbin/iptables -I INPUT -p tcp --dport 9090 -j ACCEPT # é˜²ç«å¢™å¼€å¯ã€å…³é—­ã€é‡å¯ /etc/init.d/iptables status /etc/init.d/iptables start /etc/init.d/iptables stop /etc/init.d/iptables restart ncå‘½ä»¤, tcpè°ƒè¯•åˆ©å™¨ #ç»™æŸä¸€ä¸ªendpointå‘é€TCPè¯·æ±‚,å°±å°†dataçš„å†…å®¹å‘é€åˆ°å¯¹ç«¯ nc 192.168.0.11 8000 \u0026lt; data.txt #ncå¯ä»¥å½“åšæœåŠ¡å™¨ï¼Œç›‘å¬æŸä¸ªç«¯å£å·,æŠŠæŸä¸€æ¬¡è¯·æ±‚çš„å†…å®¹å­˜å‚¨åˆ°received_dataé‡Œ nc -l 8000 \u0026gt; received_data #ä¸Šè¾¹åªç›‘å¬ä¸€æ¬¡ï¼Œå¦‚æœå¤šæ¬¡å¯ä»¥åŠ ä¸Š-kå‚æ•° nc -lk 8000 tcpdump # dumpå‡ºæœ¬æœº12301ç«¯å£çš„tcpåŒ… tcpdump -i em1 tcp port 12301 -s 1500 -w abc.pcap è·Ÿè¸ªç½‘ç»œè·¯ç”±è·¯å¾„ # tracerouteé»˜è®¤ä½¿ç”¨udpæ–¹å¼, å¦‚æœæ˜¯-Iåˆ™æ”¹æˆicmpæ–¹å¼ traceroute -I www.163.com # ä»ttlç¬¬3è·³è·Ÿè¸ª traceroute -M 3 www.163.com # åŠ ä¸Šç«¯å£è·Ÿè¸ª traceroute -p 8080 192.168.10.11 ss # æ˜¾ç¤ºæœ¬åœ°æ‰“å¼€çš„æ‰€æœ‰ç«¯å£ ss -l # æ˜¾ç¤ºæ¯ä¸ªè¿›ç¨‹å…·ä½“æ‰“å¼€çš„socket ss -pl # æ˜¾ç¤ºæ‰€æœ‰tcp socket ss -t -a # æ˜¾ç¤ºæ‰€æœ‰çš„UDP Socekt ss -u -a # æ˜¾ç¤ºæ‰€æœ‰å·²å»ºç«‹çš„SMTPè¿æ¥ ss -o state established \u0026#39;( dport = :smtp or sport = :smtp )\u0026#39; # æ˜¾ç¤ºæ‰€æœ‰å·²å»ºç«‹çš„HTTPè¿æ¥ ss -o state established \u0026#39;( dport = :http or sport = :http )\u0026#39; æ‰¾å‡ºæ‰€æœ‰è¿æ¥XæœåŠ¡å™¨çš„è¿›ç¨‹ ss -x src /tmp/.X11-unix/* åˆ—å‡ºå½“å‰socketç»Ÿè®¡ä¿¡æ¯ ss -s è§£é‡Šï¼šnetstatæ˜¯éå†/procä¸‹é¢æ¯ä¸ªPIDç›®å½•ï¼Œssç›´æ¥è¯»/proc/netä¸‹é¢çš„ç»Ÿè®¡ä¿¡æ¯ã€‚æ‰€ä»¥ssæ‰§è¡Œçš„æ—¶å€™æ¶ˆè€—èµ„æºä»¥åŠæ¶ˆè€—çš„æ—¶é—´éƒ½æ¯”netstatå°‘å¾ˆå¤š netstat # è¾“å‡ºæ¯ä¸ªipçš„è¿æ¥æ•°ï¼Œä»¥åŠæ€»çš„å„ä¸ªçŠ¶æ€çš„è¿æ¥æ•° netstat -n | awk \u0026#39;/^tcp/ {n=split($(NF-1),array,\u0026#34;:\u0026#34;);if(n\u0026lt;=2)++S[array[(1)]];else++S[array[(4)]];++s[$NF];++N} END {for(a in S){printf(\u0026#34;%-20s %s\\n\u0026#34;, a, S[a]);++I}printf(\u0026#34;%-20s %s\\n\u0026#34;,\u0026#34;TOTAL_IP\u0026#34;,I);for(a in s) printf(\u0026#34;%-20s %s\\n\u0026#34;,a, s[a]);printf(\u0026#34;%-20s %s\\n\u0026#34;,\u0026#34;TOTAL_LINK\u0026#34;,N);}\u0026#39; # ç»Ÿè®¡æ‰€æœ‰è¿æ¥çŠ¶æ€, # CLOSEDï¼šæ— è¿æ¥æ˜¯æ´»åŠ¨çš„æˆ–æ­£åœ¨è¿›è¡Œ # LISTENï¼šæœåŠ¡å™¨åœ¨ç­‰å¾…è¿›å…¥å‘¼å« # SYN_RECVï¼šä¸€ä¸ªè¿æ¥è¯·æ±‚å·²ç»åˆ°è¾¾ï¼Œç­‰å¾…ç¡®è®¤ # SYN_SENTï¼šåº”ç”¨å·²ç»å¼€å§‹ï¼Œæ‰“å¼€ä¸€ä¸ªè¿æ¥ # ESTABLISHEDï¼šæ­£å¸¸æ•°æ®ä¼ è¾“çŠ¶æ€ # FIN_WAIT1ï¼šåº”ç”¨è¯´å®ƒå·²ç»å®Œæˆ # FIN_WAIT2ï¼šå¦ä¸€è¾¹å·²åŒæ„é‡Šæ”¾ # ITMED_WAITï¼šç­‰å¾…æ‰€æœ‰åˆ†ç»„æ­»æ‰ # CLOSINGï¼šä¸¤è¾¹åŒæ—¶å°è¯•å…³é—­ # TIME_WAITï¼šä¸»åŠ¨å…³é—­è¿æ¥ä¸€ç«¯è¿˜æ²¡æœ‰ç­‰åˆ°å¦ä¸€ç«¯åé¦ˆæœŸé—´çš„çŠ¶æ€ # LAST_ACKï¼šç­‰å¾…æ‰€æœ‰åˆ†ç»„æ­»æ‰ netstat -n | awk \u0026#39;/^tcp/ {++state[$NF]} END {for(key in state) print key,\u0026#34;\\t\u0026#34;,state[key]}\u0026#39; # æŸ¥æ‰¾è¾ƒå¤štime_waitè¿æ¥ netstat -n|grep TIME_WAIT|awk \u0026#39;{print $5}\u0026#39;|sort|uniq -c|sort -rn|head -n20 top dmesg,æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿— iostat,ç£ç›˜IOæƒ…å†µç›‘æ§ iostat -xz 1 # r/s, w/s, rkB/s, wkB/sï¼šåˆ†åˆ«è¡¨ç¤ºæ¯ç§’è¯»å†™æ¬¡æ•°å’Œæ¯ç§’è¯»å†™æ•°æ®é‡ï¼ˆåƒå­—èŠ‚ï¼‰ã€‚è¯»å†™é‡è¿‡å¤§ï¼Œå¯èƒ½ä¼šå¼•èµ·æ€§èƒ½é—®é¢˜ã€‚ # awaitï¼šIOæ“ä½œçš„å¹³å‡ç­‰å¾…æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’ã€‚è¿™æ˜¯åº”ç”¨ç¨‹åºåœ¨å’Œç£ç›˜äº¤äº’æ—¶ï¼Œéœ€è¦æ¶ˆè€—çš„æ—¶é—´ï¼ŒåŒ…æ‹¬IOç­‰å¾…å’Œå®é™…æ“ä½œçš„è€—æ—¶ã€‚å¦‚æœè¿™ä¸ªæ•°å€¼è¿‡å¤§ï¼Œå¯èƒ½æ˜¯ç¡¬ä»¶è®¾å¤‡é‡åˆ°äº†ç“¶é¢ˆæˆ–è€…å‡ºç°æ•…éšœã€‚ # avgqu-szï¼šå‘è®¾å¤‡å‘å‡ºçš„è¯·æ±‚å¹³å‡æ•°é‡ã€‚å¦‚æœè¿™ä¸ªæ•°å€¼å¤§äº1ï¼Œå¯èƒ½æ˜¯ç¡¬ä»¶è®¾å¤‡å·²ç»é¥±å’Œï¼ˆéƒ¨åˆ†å‰ç«¯ç¡¬ä»¶è®¾å¤‡æ”¯æŒå¹¶è¡Œå†™å…¥ï¼‰ã€‚ # %utilï¼šè®¾å¤‡åˆ©ç”¨ç‡ã€‚è¿™ä¸ªæ•°å€¼è¡¨ç¤ºè®¾å¤‡çš„ç¹å¿™ç¨‹åº¦ï¼Œç»éªŒå€¼æ˜¯å¦‚æœè¶…è¿‡60ï¼Œå¯èƒ½ä¼šå½±å“IOæ€§èƒ½ï¼ˆå¯ä»¥å‚ç…§IOæ“ä½œå¹³å‡ç­‰å¾…æ—¶é—´ï¼‰ã€‚å¦‚æœåˆ°è¾¾100%ï¼Œè¯´æ˜ç¡¬ä»¶è®¾å¤‡å·²ç»é¥±å’Œã€‚ # å¦‚æœæ˜¾ç¤ºçš„æ˜¯é€»è¾‘è®¾å¤‡çš„æ•°æ®ï¼Œé‚£ä¹ˆè®¾å¤‡åˆ©ç”¨ç‡ä¸ä»£è¡¨åç«¯å®é™…çš„ç¡¬ä»¶è®¾å¤‡å·²ç»é¥±å’Œã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå³ä½¿IOæ€§èƒ½ä¸ç†æƒ³ï¼Œä¹Ÿä¸ä¸€å®šæ„å‘³è¿™åº”ç”¨ç¨‹åºæ€§èƒ½ä¼šä¸å¥½ï¼Œå¯ä»¥åˆ©ç”¨è¯¸å¦‚é¢„è¯»å–ã€å†™ç¼“å­˜ç­‰ç­–ç•¥æå‡åº”ç”¨æ€§èƒ½ã€‚ free,å†…å­˜ä½¿ç”¨æƒ…å†µ free -m eg: total used free shared buffers cached Mem: 1002 769 232 0 62 421 -/+ buffers/cache: 286 715 Swap: 1153 0 1153 ç¬¬ä¸€éƒ¨åˆ†Memè¡Œ: total å†…å­˜æ€»æ•°: 1002M used å·²ç»ä½¿ç”¨çš„å†…å­˜æ•°: 769M free ç©ºé—²çš„å†…å­˜æ•°: 232M shared å½“å‰å·²ç»åºŸå¼ƒä¸ç”¨,æ€»æ˜¯0 buffers Buffer ç¼“å­˜å†…å­˜æ•°: 62M cached Page ç¼“å­˜å†…å­˜æ•°:421M å…³ç³»ï¼štotal(1002M) = used(769M) + free(232M) ç¬¬äºŒéƒ¨åˆ†(-/+ buffers/cache): (-buffers/cache) usedå†…å­˜æ•°ï¼š286M (æŒ‡çš„ç¬¬ä¸€éƒ¨åˆ†Memè¡Œä¸­çš„used â€“ buffers â€“ cached) (+buffers/cache) freeå†…å­˜æ•°: 715M (æŒ‡çš„ç¬¬ä¸€éƒ¨åˆ†Memè¡Œä¸­çš„free + buffers + cached) å¯è§-buffers/cacheåæ˜ çš„æ˜¯è¢«ç¨‹åºå®å®åœ¨åœ¨åƒæ‰çš„å†…å­˜,è€Œ+buffers/cacheåæ˜ çš„æ˜¯å¯ä»¥æŒªç”¨çš„å†…å­˜æ€»æ•°. ç¬¬ä¸‰éƒ¨åˆ†æ˜¯æŒ‡äº¤æ¢åˆ†åŒº sar,æŸ¥çœ‹ç½‘ç»œååçŠ¶æ€ # sarå‘½ä»¤åœ¨è¿™é‡Œå¯ä»¥æŸ¥çœ‹ç½‘ç»œè®¾å¤‡çš„ååç‡ã€‚åœ¨æ’æŸ¥æ€§èƒ½é—®é¢˜æ—¶ï¼Œå¯ä»¥é€šè¿‡ç½‘ç»œè®¾å¤‡çš„ååé‡ï¼Œåˆ¤æ–­ç½‘ç»œè®¾å¤‡æ˜¯å¦å·²ç»é¥±å’Œ sar -n DEV 1 # sarå‘½ä»¤åœ¨è¿™é‡Œç”¨äºæŸ¥çœ‹TCPè¿æ¥çŠ¶æ€ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š # active/sï¼šæ¯ç§’æœ¬åœ°å‘èµ·çš„TCPè¿æ¥æ•°ï¼Œæ—¢é€šè¿‡connectè°ƒç”¨åˆ›å»ºçš„TCPè¿æ¥ï¼› # passive/sï¼šæ¯ç§’è¿œç¨‹å‘èµ·çš„TCPè¿æ¥æ•°ï¼Œå³é€šè¿‡acceptè°ƒç”¨åˆ›å»ºçš„TCPè¿æ¥ï¼› # retrans/sï¼šæ¯ç§’TCPé‡ä¼ æ•°é‡ï¼› # TCPè¿æ¥æ•°å¯ä»¥ç”¨æ¥åˆ¤æ–­æ€§èƒ½é—®é¢˜æ˜¯å¦ç”±äºå»ºç«‹äº†è¿‡å¤šçš„è¿æ¥ï¼Œè¿›ä¸€æ­¥å¯ä»¥åˆ¤æ–­æ˜¯ä¸»åŠ¨å‘èµ·çš„è¿æ¥ï¼Œè¿˜æ˜¯è¢«åŠ¨æ¥å—çš„è¿æ¥ã€‚TCPé‡ä¼ å¯èƒ½æ˜¯å› ä¸ºç½‘ç»œç¯å¢ƒæ¶åŠ£ï¼Œæˆ–è€…æœåŠ¡å™¨å‹åŠ›è¿‡å¤§å¯¼è‡´ä¸¢åŒ… sar -n TCP,ETCP 1 vmstat, ç»™å®šæ—¶é—´ç›‘æ§CPUä½¿ç”¨ç‡, å†…å­˜ä½¿ç”¨, è™šæ‹Ÿå†…å­˜äº¤äº’, IOè¯»å†™ # 2è¡¨ç¤ºæ¯2ç§’é‡‡é›†ä¸€æ¬¡çŠ¶æ€ä¿¡æ¯, 1è¡¨ç¤ºåªé‡‡é›†ä¸€æ¬¡(å¿½ç•¥æ—¢æ˜¯ä¸€ç›´é‡‡é›†) vmstat 2 1 ","keywords":["Linux"],"articleBody":"Linuxå…³æœº,é‡å¯ # å…³æœº shutdown -h now # é‡å¯ shutdown -r now æŸ¥çœ‹ç³»ç»Ÿ,CPUä¿¡æ¯ # æŸ¥çœ‹ç³»ç»Ÿå†…æ ¸ä¿¡æ¯ uname -a # æŸ¥çœ‹ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬ cat /proc/version # æŸ¥çœ‹å½“å‰ç”¨æˆ·ç¯å¢ƒå˜é‡ env cat /proc/cpuinfo # æŸ¥çœ‹æœ‰å‡ ä¸ªé€»è¾‘cpu, åŒ…æ‹¬cpuå‹å· cat /proc/cpuinfo | grep name | cut -f2 -d: | uniq -c # æŸ¥çœ‹æœ‰å‡ é¢—cpu,æ¯é¢—åˆ†åˆ«æ˜¯å‡ æ ¸ cat /proc/cpuinfo | grep physical | uniq -c # æŸ¥çœ‹å½“å‰CPUè¿è¡Œåœ¨32bitè¿˜æ˜¯64bitæ¨¡å¼ä¸‹, å¦‚æœæ˜¯è¿è¡Œåœ¨32bitä¸‹ä¹Ÿä¸ä»£è¡¨CPUä¸æ”¯æŒ64bit getconf LONG_BIT # ç»“æœå¤§äº0, è¯´æ˜æ”¯æŒ64bitè®¡ç®—. lmæŒ‡long mode, æ”¯æŒlmåˆ™æ˜¯64bit cat /proc/cpuinfo | grep flags | grep ' lm ' | wc -l å»ºç«‹è½¯è¿æ¥ ln -s /usr/local/jdk1.8/ jdk rpmç›¸å…³ # æŸ¥çœ‹æ˜¯å¦é€šè¿‡rpmå®‰è£…äº†è¯¥è½¯ä»¶ rpm -qa | grep è½¯ä»¶å sshkey # åˆ›å»ºsshkey ssh-keygen -t rsa -C your_email@example.com #id_rsa.pub çš„å†…å®¹æ‹·è´åˆ°è¦æ§åˆ¶çš„æœåŠ¡å™¨çš„ home/username/.ssh/authorized_keys ä¸­,å¦‚æœæ²¡æœ‰åˆ™æ–°å»º(.sshæƒé™ä¸º700, authorized_keysæƒé™ä¸º600) å‘½ä»¤é‡å‘½å # åœ¨å„ä¸ªç”¨æˆ·çš„.bash_profileä¸­æ·»åŠ é‡å‘½åé…ç½® alias ll='ls -alF' åŒæ­¥æœåŠ¡å™¨æ—¶é—´ sudo ntpdate -u ntp.api.bz åå°è¿è¡Œ # åå°è¿è¡Œ,å¹¶ä¸”æœ‰nohup.outè¾“å‡º nohup xxx \u0026 # åå°è¿è¡Œ, ä¸è¾“å‡ºä»»ä½•æ—¥å¿— nohup xxx \u003e /dev/null \u0026 # åå°è¿è¡Œ, å¹¶å°†é”™è¯¯ä¿¡æ¯åšæ ‡å‡†è¾“å‡ºåˆ°æ—¥å¿—ä¸­ nohup xxx \u003eout.log 2\u003e\u00261 \u0026 å¼ºåˆ¶æ´»åŠ¨ç”¨æˆ·é€€å‡º # å‘½ä»¤æ¥å®Œæˆå¼ºåˆ¶æ´»åŠ¨ç”¨æˆ·é€€å‡º.å…¶ä¸­TTYè¡¨ç¤ºç»ˆç«¯åç§° pkill -kill -t [TTY] æŸ¥çœ‹å‘½ä»¤è·¯å¾„ which \u003cå‘½ä»¤\u003e æŸ¥çœ‹è¿›ç¨‹æ‰€æœ‰æ‰“å¼€æœ€å¤§fdæ•° ulimit -n é…ç½®dns vim /etc/resolv.conf nslookup,æŸ¥çœ‹åŸŸåè·¯ç”±è¡¨ nslookup google.com last,æœ€è¿‘ç™»å½•ä¿¡æ¯åˆ—è¡¨ # æœ€è¿‘ç™»å½•çš„5ä¸ªè´¦å· last -n 5 è®¾ç½®å›ºå®šip ifconfig em1 192.168.5.177 netmask 255.255.255.0 æŸ¥çœ‹è¿›ç¨‹å†…åŠ è½½çš„ç¯å¢ƒå˜é‡ # ä¹Ÿå¯ä»¥å» cd /proc ç›®å½•ä¸‹, æŸ¥çœ‹è¿›ç¨‹å†…å­˜ä¸­åŠ è½½çš„ä¸œè¥¿ ps eww -p XXXXX(è¿›ç¨‹å·) æŸ¥çœ‹è¿›ç¨‹æ ‘æ‰¾åˆ°æœåŠ¡å™¨è¿›ç¨‹ ps auwxf æŸ¥çœ‹è¿›ç¨‹å¯åŠ¨è·¯å¾„ cd /proc/xxx(è¿›ç¨‹å·) ls -all # cwdå¯¹åº”çš„æ˜¯å¯åŠ¨è·¯å¾„ æ·»åŠ ç”¨æˆ·,é…ç½®sudoæƒé™ # æ–°å¢ç”¨æˆ· useradd ç”¨æˆ·å passwd ç”¨æˆ·å #å¢åŠ sudoæƒé™ vim /etc/sudoers # ä¿®æ”¹æ–‡ä»¶é‡Œé¢çš„ # root ALL=(ALL) ALL # ç”¨æˆ·å ALL=(ALL) ALL å¼ºåˆ¶å…³é—­è¿›ç¨‹ååŒ…å«xxxçš„æ‰€æœ‰è¿›ç¨‹ ps aux|grep xxx | grep -v grep | awk '{print $2}' | xargs kill -9 vimæ“ä½œ #normalæ¨¡å¼ä¸‹ gè¡¨ç¤ºå…¨å±€, xè¡¨ç¤ºæŸ¥æ‰¾çš„å†…å®¹, yè¡¨ç¤ºæ›¿æ¢åçš„å†…å®¹ :%s/x/y/g #normalæ¨¡å¼ä¸‹ 0 # å…‰æ ‡ç§»åˆ°è¡Œé¦–(æ•°å­—0) $ # å…‰æ ‡ç§»è‡³è¡Œå°¾ shift + g # è·³åˆ°æ–‡ä»¶æœ€å gg # è·³åˆ°æ–‡ä»¶å¤´ # æ˜¾ç¤ºè¡Œå· :set nu # å»é™¤è¡Œå· :set nonu # æ£€ç´¢ /xxx(æ£€ç´¢å†…å®¹) # ä»å¤´æ£€ç´¢, æŒ‰næŸ¥æ‰¾ä¸‹ä¸€ä¸ª ?xxx(æ£€ç´¢å†…å®¹) # ä»å°¾éƒ¨æ£€ç´¢ æ‰“å¼€åªè¯»æ–‡ä»¶,ä¿®æ”¹åéœ€è¦ä¿å­˜æ—¶(ä¸ç”¨åˆ‡æ¢ç”¨æˆ·å³å¯ä¿å­˜çš„æ–¹å¼) # åœ¨normalæ¨¡å¼ä¸‹ :w !sudo tee % æŸ¥çœ‹ç£ç›˜, æ–‡ä»¶ç›®å½•åŸºæœ¬ä¿¡æ¯ # æŸ¥çœ‹ç£ç›˜æŒ‚è½½æƒ…å†µ mount # æŸ¥çœ‹ç£ç›˜åˆ†åŒºä¿¡æ¯ df # æŸ¥çœ‹ç›®å½•åŠå­ç›®å½•å¤§å° du -H -h # æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹å„ä¸ªæ–‡ä»¶, æ–‡ä»¶å¤¹å äº†å¤šå°‘ç©ºé—´, ä¸ä¼šé€’å½’ du -sh * wcå‘½ä»¤ # æŸ¥çœ‹æ–‡ä»¶é‡Œæœ‰å¤šå°‘è¡Œ wc -l filename # çœ‹æ–‡ä»¶é‡Œæœ‰å¤šå°‘ä¸ªword wc -w filename # æ–‡ä»¶é‡Œæœ€é•¿çš„é‚£ä¸€è¡Œæ˜¯å¤šå°‘ä¸ªå­— wc -L filename # ç»Ÿè®¡å­—èŠ‚æ•° wc -c å‹ç¼©å‘½ä»¤ tar czvf xxx.tar å‹ç¼©ç›®å½• zip -r xxx.zip å‹ç¼©ç›®å½• è§£å‹ç¼©å‘½ä»¤ tar zxvf xxx.tar # è§£å‹åˆ°æŒ‡å®šæ–‡ä»¶å¤¹ tar zxvf xxx.tar -C /xxx/yyy/ unzip xxx.zip å˜æ›´æ–‡ä»¶æ‰€å±ç”¨æˆ·, ç”¨æˆ·ç»„ chown eagleye.eagleye xxx.log cp, scp, mkdir #å¤åˆ¶ cp xxx.log # å¤åˆ¶å¹¶å¼ºåˆ¶è¦†ç›–åŒåæ–‡ä»¶ cp -f xxx.log # å¤åˆ¶æ–‡ä»¶å¤¹ cp -r xxx(æºæ–‡ä»¶å¤¹) yyy(ç›®æ ‡æ–‡ä»¶å¤¹) # è¿œç¨‹å¤åˆ¶ scp -P sshç«¯å£ username@10.10.10.101:/home/username/xxx /home/xxx # çº§è”åˆ›å»ºç›®å½• mkdir -p /xxx/yyy/zzz # æ‰¹é‡åˆ›å»ºæ–‡ä»¶å¤¹, ä¼šåœ¨test,mainä¸‹éƒ½åˆ›å»ºjava, resourcesæ–‡ä»¶å¤¹ mkdir -p src/{test,main}/{java,resources} æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶ diff -u 1.txt 2.txt æ—¥å¿—è¾“å‡ºçš„å­—èŠ‚æ•°,å¯ä»¥ç”¨ä½œæ€§èƒ½æµ‹è¯• # å¦‚æœåšæ€§èƒ½æµ‹è¯•, å¯ä»¥æ¯æ‰§è¡Œä¸€æ¬¡, å¾€æ—¥å¿—é‡Œé¢è¾“å‡º â€œ.â€ , è¿™æ ·æ—¥å¿—ä¸­çš„å­—èŠ‚æ•°å°±æ˜¯å®é™…çš„æ€§èƒ½æµ‹è¯•è¿è¡Œçš„æ¬¡æ•°, è¿˜å¯ä»¥çœ‹è§å®æ—¶é€Ÿç‡. tail -f xxx.log | pv -bt æŸ¥çœ‹, å»é™¤ç‰¹æ®Šå­—ç¬¦ # æŸ¥çœ‹ç‰¹æ®Šå­—ç¬¦ cat -v xxx.sh # å»é™¤ç‰¹æ®Šå­—ç¬¦ sed -i 's/^M//gâ€™ env.sh å»é™¤æ–‡ä»¶çš„ç‰¹æ®Šå­—ç¬¦, æ¯”å¦‚^M: éœ€è¦è¿™æ ·è¾“å…¥: ctrl+v+enter å¤„ç†å› ç³»ç»ŸåŸå› å¼•èµ·çš„æ–‡ä»¶ä¸­ç‰¹æ®Šå­—ç¬¦çš„é—®é¢˜ # å¯ä»¥è½¬æ¢ä¸ºè¯¥ç³»ç»Ÿä¸‹çš„æ–‡ä»¶æ ¼å¼ cat file.sh \u003e file.sh_bak # å…ˆå°†file.shä¸­æ–‡ä»¶å†…å®¹å¤åˆ¶ä¸‹æ¥ç„¶åè¿è¡Œ, ç„¶åç²˜è´´å†…å®¹, æœ€åctrl + d ä¿å­˜é€€å‡º cat \u003e file1.sh # åœ¨vimä¸­é€šè¿‡å¦‚ä¸‹è®¾ç½®æ–‡ä»¶ç¼–ç å’Œæ–‡ä»¶æ ¼å¼ :set fileencodings=utf-8 ï¼Œç„¶å w ï¼ˆå­˜ç›˜ï¼‰ä¸€ä¸‹å³å¯è½¬åŒ–ä¸º utf8 æ ¼å¼ï¼Œ :set fileformat=unix # åœ¨macä¸‹ä½¿ç”¨dos2unixè¿›è¡Œæ–‡ä»¶æ ¼å¼åŒ– find . -name \"*.sh\" | xargs dos2unix tee, é‡å®šå‘çš„åŒæ—¶è¾“å‡ºåˆ°å±å¹• awk â€˜{print $0}â€™ xxx.log | tee test.log grep # åå‘åŒ¹é…, æŸ¥æ‰¾ä¸åŒ…å«xxxçš„å†…å®¹ grep -v xxx # æ’é™¤æ‰€æœ‰ç©ºè¡Œ grep -v '^/pre\u003e' # è¿”å›ç»“æœ 2,åˆ™è¯´æ˜ç¬¬äºŒè¡Œæ˜¯ç©ºè¡Œ grep -n â€œ^$â€ 111.txt # æŸ¥è¯¢ä»¥abcå¼€å¤´çš„è¡Œ grep -n â€œ^abcâ€ 111.txt # åŒæ—¶åˆ—å‡ºè¯¥è¯è¯­å‡ºç°åœ¨æ–‡ç« çš„ç¬¬å‡ è¡Œ grep 'xxx' -n xxx.log # è®¡ç®—ä¸€ä¸‹è¯¥å­—ä¸²å‡ºç°çš„æ¬¡æ•° grep 'xxx' -c xxx.log # æ¯”å¯¹çš„æ—¶å€™ï¼Œä¸è®¡è¾ƒå¤§å°å†™çš„ä¸åŒ grep 'xxx' -i xxx.log awk # ä»¥':' ä¸ºåˆ†éš”ç¬¦,å¦‚æœç¬¬äº”åŸŸæœ‰useråˆ™è¾“å‡ºè¯¥è¡Œ awk -F ':' '{if ($5 ~ /user/) print $0}' /etc/passwd # ç»Ÿè®¡å•ä¸ªæ–‡ä»¶ä¸­æŸä¸ªå­—ç¬¦ï¼ˆä¸²ï¼‰(ä¸­æ–‡æ— æ•ˆ)å‡ºç°çš„æ¬¡æ•° awk -v RS='character' 'END {print --NR}' xxx.txt find # åœ¨ç›®å½•ä¸‹æ‰¾åç¼€æ˜¯.mysqlçš„æ–‡ä»¶ find /home/eagleye -name '*.mysql' -print # ä¼šä» /usr ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾æœ€è¿‘3å¤©ä¹‹å†…å­˜å–è¿‡çš„æ–‡ä»¶ã€‚ find /usr -atime 3 â€“print # ä¼šä» /usr ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾æœ€è¿‘5å¤©ä¹‹å†…ä¿®æ”¹è¿‡çš„æ–‡ä»¶ã€‚ find /usr -ctime 5 â€“print # ä¼šä» /doc ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾jacky çš„ã€æ–‡ä»¶åå¼€å¤´æ˜¯ jçš„æ–‡ä»¶ã€‚ find /doc -user jacky -name 'j*' â€“print # ä¼šä» /doc ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾å¯»æ–‡ä»¶åæ˜¯ ja å¼€å¤´æˆ–è€… maå¼€å¤´çš„æ–‡ä»¶ã€‚ find /doc \\( -name 'ja*' -o- -name 'ma*' \\) â€“print # ä¼šä» /doc ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾åˆ°å‡¡æ˜¯æ–‡ä»¶åç»“å°¾ä¸º bakçš„æ–‡ä»¶ï¼ŒæŠŠå®ƒåˆ é™¤æ‰ã€‚-exec é€‰é¡¹æ˜¯æ‰§è¡Œçš„æ„æ€ï¼Œrm æ˜¯åˆ é™¤å‘½ä»¤ï¼Œ{ } è¡¨ç¤ºæ–‡ä»¶åï¼Œâ€œ\\;â€æ˜¯è§„å®šçš„å‘½ä»¤ç»“å°¾ã€‚ find /doc -name '*bak' -exec rm {} \\; æŸ¥çœ‹ä»€ä¹ˆè¿›ç¨‹ä½¿ç”¨äº†è¯¥ç«¯å£ lsof -i:port è·å–æœ¬æœºipåœ°å€ /sbin/ifconfig -a|grep inet|grep -v 127.0.0.1|grep -v inet6|awk '{print $2}'|tr -d \"addr:\" iptables # æŸ¥çœ‹iptablesçŠ¶æ€ service iptables status # è¦å°åœä¸€ä¸ªip iptables -I INPUT -s ***.***.***.*** -j DROP # è¦è§£å°ä¸€ä¸ªIPï¼Œä½¿ç”¨ä¸‹é¢è¿™æ¡å‘½ä»¤ï¼š iptables -D INPUT -s ***.***.***.*** -j DROP å¤‡æ³¨: å‚æ•°-Iæ˜¯è¡¨ç¤ºInsertï¼ˆæ·»åŠ ï¼‰ï¼Œ-Dè¡¨ç¤ºDeleteï¼ˆåˆ é™¤ï¼‰ã€‚åé¢è·Ÿçš„æ˜¯è§„åˆ™ï¼ŒINPUTè¡¨ç¤ºå…¥ç«™ï¼Œ***.***.***.***è¡¨ç¤ºè¦å°åœçš„IPï¼ŒDROPè¡¨ç¤ºæ”¾å¼ƒè¿æ¥ã€‚ #å¼€å¯9090ç«¯å£çš„è®¿é—® /sbin/iptables -I INPUT -p tcp --dport 9090 -j ACCEPT # é˜²ç«å¢™å¼€å¯ã€å…³é—­ã€é‡å¯ /etc/init.d/iptables status /etc/init.d/iptables start /etc/init.d/iptables stop /etc/init.d/iptables restart ncå‘½ä»¤, tcpè°ƒè¯•åˆ©å™¨ #ç»™æŸä¸€ä¸ªendpointå‘é€TCPè¯·æ±‚,å°±å°†dataçš„å†…å®¹å‘é€åˆ°å¯¹ç«¯ nc 192.168.0.11 8000 \u003c data.txt #ncå¯ä»¥å½“åšæœåŠ¡å™¨ï¼Œç›‘å¬æŸä¸ªç«¯å£å·,æŠŠæŸä¸€æ¬¡è¯·æ±‚çš„å†…å®¹å­˜å‚¨åˆ°received_dataé‡Œ nc -l 8000 \u003e received_data #ä¸Šè¾¹åªç›‘å¬ä¸€æ¬¡ï¼Œå¦‚æœå¤šæ¬¡å¯ä»¥åŠ ä¸Š-kå‚æ•° nc -lk 8000 tcpdump # dumpå‡ºæœ¬æœº12301ç«¯å£çš„tcpåŒ… tcpdump -i em1 tcp port 12301 -s 1500 -w abc.pcap è·Ÿè¸ªç½‘ç»œè·¯ç”±è·¯å¾„ # tracerouteé»˜è®¤ä½¿ç”¨udpæ–¹å¼, å¦‚æœæ˜¯-Iåˆ™æ”¹æˆicmpæ–¹å¼ traceroute -I www.163.com # ä»ttlç¬¬3è·³è·Ÿè¸ª traceroute -M 3 www.163.com # åŠ ä¸Šç«¯å£è·Ÿè¸ª traceroute -p 8080 192.168.10.11 ss # æ˜¾ç¤ºæœ¬åœ°æ‰“å¼€çš„æ‰€æœ‰ç«¯å£ ss -l # æ˜¾ç¤ºæ¯ä¸ªè¿›ç¨‹å…·ä½“æ‰“å¼€çš„socket ss -pl # æ˜¾ç¤ºæ‰€æœ‰tcp socket ss -t -a # æ˜¾ç¤ºæ‰€æœ‰çš„UDP Socekt ss -u -a # æ˜¾ç¤ºæ‰€æœ‰å·²å»ºç«‹çš„SMTPè¿æ¥ ss -o state established '( dport = :smtp or sport = :smtp )' # æ˜¾ç¤ºæ‰€æœ‰å·²å»ºç«‹çš„HTTPè¿æ¥ ss -o state established '( dport = :http or sport = :http )' æ‰¾å‡ºæ‰€æœ‰è¿æ¥XæœåŠ¡å™¨çš„è¿›ç¨‹ ss -x src /tmp/.X11-unix/* åˆ—å‡ºå½“å‰socketç»Ÿè®¡ä¿¡æ¯ ss -s è§£é‡Šï¼šnetstatæ˜¯éå†/procä¸‹é¢æ¯ä¸ªPIDç›®å½•ï¼Œssç›´æ¥è¯»/proc/netä¸‹é¢çš„ç»Ÿè®¡ä¿¡æ¯ã€‚æ‰€ä»¥ssæ‰§è¡Œçš„æ—¶å€™æ¶ˆè€—èµ„æºä»¥åŠæ¶ˆè€—çš„æ—¶é—´éƒ½æ¯”netstatå°‘å¾ˆå¤š netstat # è¾“å‡ºæ¯ä¸ªipçš„è¿æ¥æ•°ï¼Œä»¥åŠæ€»çš„å„ä¸ªçŠ¶æ€çš„è¿æ¥æ•° netstat -n | awk '/^tcp/ {n=split($(NF-1),array,\":\");if(n\u003c=2)++S[array[(1)]];else++S[array[(4)]];++s[$NF];++N} END {for(a in S){printf(\"%-20s %s\\n\", a, S[a]);++I}printf(\"%-20s %s\\n\",\"TOTAL_IP\",I);for(a in s) printf(\"%-20s %s\\n\",a, s[a]);printf(\"%-20s %s\\n\",\"TOTAL_LINK\",N);}' # ç»Ÿè®¡æ‰€æœ‰è¿æ¥çŠ¶æ€, # CLOSEDï¼šæ— è¿æ¥æ˜¯æ´»åŠ¨çš„æˆ–æ­£åœ¨è¿›è¡Œ # LISTENï¼šæœåŠ¡å™¨åœ¨ç­‰å¾…è¿›å…¥å‘¼å« # SYN_RECVï¼šä¸€ä¸ªè¿æ¥è¯·æ±‚å·²ç»åˆ°è¾¾ï¼Œç­‰å¾…ç¡®è®¤ # SYN_SENTï¼šåº”ç”¨å·²ç»å¼€å§‹ï¼Œæ‰“å¼€ä¸€ä¸ªè¿æ¥ # ESTABLISHEDï¼šæ­£å¸¸æ•°æ®ä¼ è¾“çŠ¶æ€ # FIN_WAIT1ï¼šåº”ç”¨è¯´å®ƒå·²ç»å®Œæˆ # FIN_WAIT2ï¼šå¦ä¸€è¾¹å·²åŒæ„é‡Šæ”¾ # ITMED_WAITï¼šç­‰å¾…æ‰€æœ‰åˆ†ç»„æ­»æ‰ # CLOSINGï¼šä¸¤è¾¹åŒæ—¶å°è¯•å…³é—­ # TIME_WAITï¼šä¸»åŠ¨å…³é—­è¿æ¥ä¸€ç«¯è¿˜æ²¡æœ‰ç­‰åˆ°å¦ä¸€ç«¯åé¦ˆæœŸé—´çš„çŠ¶æ€ # LAST_ACKï¼šç­‰å¾…æ‰€æœ‰åˆ†ç»„æ­»æ‰ netstat -n | awk '/^tcp/ {++state[$NF]} END {for(key in state) print key,\"\\t\",state[key]}' # æŸ¥æ‰¾è¾ƒå¤štime_waitè¿æ¥ netstat -n|grep TIME_WAIT|awk '{print $5}'|sort|uniq -c|sort -rn|head -n20 top dmesg,æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿— iostat,ç£ç›˜IOæƒ…å†µç›‘æ§ iostat -xz 1 # r/s, w/s, rkB/s, wkB/sï¼šåˆ†åˆ«è¡¨ç¤ºæ¯ç§’è¯»å†™æ¬¡æ•°å’Œæ¯ç§’è¯»å†™æ•°æ®é‡ï¼ˆåƒå­—èŠ‚ï¼‰ã€‚è¯»å†™é‡è¿‡å¤§ï¼Œå¯èƒ½ä¼šå¼•èµ·æ€§èƒ½é—®é¢˜ã€‚ # awaitï¼šIOæ“ä½œçš„å¹³å‡ç­‰å¾…æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’ã€‚è¿™æ˜¯åº”ç”¨ç¨‹åºåœ¨å’Œç£ç›˜äº¤äº’æ—¶ï¼Œéœ€è¦æ¶ˆè€—çš„æ—¶é—´ï¼ŒåŒ…æ‹¬IOç­‰å¾…å’Œå®é™…æ“ä½œçš„è€—æ—¶ã€‚å¦‚æœè¿™ä¸ªæ•°å€¼è¿‡å¤§ï¼Œå¯èƒ½æ˜¯ç¡¬ä»¶è®¾å¤‡é‡åˆ°äº†ç“¶é¢ˆæˆ–è€…å‡ºç°æ•…éšœã€‚ # avgqu-szï¼šå‘è®¾å¤‡å‘å‡ºçš„è¯·æ±‚å¹³å‡æ•°é‡ã€‚å¦‚æœè¿™ä¸ªæ•°å€¼å¤§äº1ï¼Œå¯èƒ½æ˜¯ç¡¬ä»¶è®¾å¤‡å·²ç»é¥±å’Œï¼ˆéƒ¨åˆ†å‰ç«¯ç¡¬ä»¶è®¾å¤‡æ”¯æŒå¹¶è¡Œå†™å…¥ï¼‰ã€‚ # %utilï¼šè®¾å¤‡åˆ©ç”¨ç‡ã€‚è¿™ä¸ªæ•°å€¼è¡¨ç¤ºè®¾å¤‡çš„ç¹å¿™ç¨‹åº¦ï¼Œç»éªŒå€¼æ˜¯å¦‚æœè¶…è¿‡60ï¼Œå¯èƒ½ä¼šå½±å“IOæ€§èƒ½ï¼ˆå¯ä»¥å‚ç…§IOæ“ä½œå¹³å‡ç­‰å¾…æ—¶é—´ï¼‰ã€‚å¦‚æœåˆ°è¾¾100%ï¼Œè¯´æ˜ç¡¬ä»¶è®¾å¤‡å·²ç»é¥±å’Œã€‚ # å¦‚æœæ˜¾ç¤ºçš„æ˜¯é€»è¾‘è®¾å¤‡çš„æ•°æ®ï¼Œé‚£ä¹ˆè®¾å¤‡åˆ©ç”¨ç‡ä¸ä»£è¡¨åç«¯å®é™…çš„ç¡¬ä»¶è®¾å¤‡å·²ç»é¥±å’Œã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå³ä½¿IOæ€§èƒ½ä¸ç†æƒ³ï¼Œä¹Ÿä¸ä¸€å®šæ„å‘³è¿™åº”ç”¨ç¨‹åºæ€§èƒ½ä¼šä¸å¥½ï¼Œå¯ä»¥åˆ©ç”¨è¯¸å¦‚é¢„è¯»å–ã€å†™ç¼“å­˜ç­‰ç­–ç•¥æå‡åº”ç”¨æ€§èƒ½ã€‚ free,å†…å­˜ä½¿ç”¨æƒ…å†µ free -m eg: total used free shared buffers cached Mem: 1002 769 232 0 62 421 -/+ buffers/cache: 286 715 Swap: 1153 0 1153 ç¬¬ä¸€éƒ¨åˆ†Memè¡Œ: total å†…å­˜æ€»æ•°: 1002M used å·²ç»ä½¿ç”¨çš„å†…å­˜æ•°: 769M free ç©ºé—²çš„å†…å­˜æ•°: 232M shared å½“å‰å·²ç»åºŸå¼ƒä¸ç”¨,æ€»æ˜¯0 buffers Buffer ç¼“å­˜å†…å­˜æ•°: 62M cached Page ç¼“å­˜å†…å­˜æ•°:421M å…³ç³»ï¼štotal(1002M) = used(769M) + free(232M) ç¬¬äºŒéƒ¨åˆ†(-/+ buffers/cache): (-buffers/cache) usedå†…å­˜æ•°ï¼š286M (æŒ‡çš„ç¬¬ä¸€éƒ¨åˆ†Memè¡Œä¸­çš„used â€“ buffers â€“ cached) (+buffers/cache) freeå†…å­˜æ•°: 715M (æŒ‡çš„ç¬¬ä¸€éƒ¨åˆ†Memè¡Œä¸­çš„free + buffers + cached) å¯è§-buffers/cacheåæ˜ çš„æ˜¯è¢«ç¨‹åºå®å®åœ¨åœ¨åƒæ‰çš„å†…å­˜,è€Œ+buffers/cacheåæ˜ çš„æ˜¯å¯ä»¥æŒªç”¨çš„å†…å­˜æ€»æ•°. ç¬¬ä¸‰éƒ¨åˆ†æ˜¯æŒ‡äº¤æ¢åˆ†åŒº sar,æŸ¥çœ‹ç½‘ç»œååçŠ¶æ€ # sarå‘½ä»¤åœ¨è¿™é‡Œå¯ä»¥æŸ¥çœ‹ç½‘ç»œè®¾å¤‡çš„ååç‡ã€‚åœ¨æ’æŸ¥æ€§èƒ½é—®é¢˜æ—¶ï¼Œå¯ä»¥é€šè¿‡ç½‘ç»œè®¾å¤‡çš„ååé‡ï¼Œåˆ¤æ–­ç½‘ç»œè®¾å¤‡æ˜¯å¦å·²ç»é¥±å’Œ sar -n DEV 1 # sarå‘½ä»¤åœ¨è¿™é‡Œç”¨äºæŸ¥çœ‹TCPè¿æ¥çŠ¶æ€ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š # active/sï¼šæ¯ç§’æœ¬åœ°å‘èµ·çš„TCPè¿æ¥æ•°ï¼Œæ—¢é€šè¿‡connectè°ƒç”¨åˆ›å»ºçš„TCPè¿æ¥ï¼› # passive/sï¼šæ¯ç§’è¿œç¨‹å‘èµ·çš„TCPè¿æ¥æ•°ï¼Œå³é€šè¿‡acceptè°ƒç”¨åˆ›å»ºçš„TCPè¿æ¥ï¼› # retrans/sï¼šæ¯ç§’TCPé‡ä¼ æ•°é‡ï¼› # TCPè¿æ¥æ•°å¯ä»¥ç”¨æ¥åˆ¤æ–­æ€§èƒ½é—®é¢˜æ˜¯å¦ç”±äºå»ºç«‹äº†è¿‡å¤šçš„è¿æ¥ï¼Œè¿›ä¸€æ­¥å¯ä»¥åˆ¤æ–­æ˜¯ä¸»åŠ¨å‘èµ·çš„è¿æ¥ï¼Œè¿˜æ˜¯è¢«åŠ¨æ¥å—çš„è¿æ¥ã€‚TCPé‡ä¼ å¯èƒ½æ˜¯å› ä¸ºç½‘ç»œç¯å¢ƒæ¶åŠ£ï¼Œæˆ–è€…æœåŠ¡å™¨å‹åŠ›è¿‡å¤§å¯¼è‡´ä¸¢åŒ… sar -n TCP,ETCP 1 vmstat, ç»™å®šæ—¶é—´ç›‘æ§CPUä½¿ç”¨ç‡, å†…å­˜ä½¿ç”¨, è™šæ‹Ÿå†…å­˜äº¤äº’, IOè¯»å†™ # 2è¡¨ç¤ºæ¯2ç§’é‡‡é›†ä¸€æ¬¡çŠ¶æ€ä¿¡æ¯, 1è¡¨ç¤ºåªé‡‡é›†ä¸€æ¬¡(å¿½ç•¥æ—¢æ˜¯ä¸€ç›´é‡‡é›†) vmstat 2 1 ","wordCount":"4157","inLanguage":"zh-cn","datePublished":"2022-02-16T00:00:00Z","dateModified":"2022-02-16T00:00:00Z","author":{"@type":"Person","name":"Lesan"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://lesanouo.github.io/blog/posts/snippet/linux/"},"publisher":{"@type":"Organization","name":"Lesan's Blog","logo":{"@type":"ImageObject","url":"https://lesanouo.github.io/blog/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://lesanouo.github.io/blog/ accesskey=h title="Lesan's Blog (Alt + H)">Lesan's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://lesanouo.github.io/blog/archives title="ğŸ“š å½’æ¡£"><span>ğŸ“š å½’æ¡£</span></a></li><li><a href=https://lesanouo.github.io/blog/categories/ title="ğŸ—ƒï¸ åˆ†ç±»"><span>ğŸ—ƒï¸ åˆ†ç±»</span></a></li><li><a href=https://lesanouo.github.io/blog/tags/ title="ğŸ·ï¸ æ ‡ç­¾"><span>ğŸ·ï¸ æ ‡ç­¾</span></a></li><li><a href=https://lesanouo.github.io/blog/search/ title="ğŸ” æœç´¢"><span>ğŸ” æœç´¢</span></a></li><li><a href=https://lesanouo.github.io/blog/about/ title="ğŸ‘¨â€ğŸ’» å…³äºæˆ‘"><span>ğŸ‘¨â€ğŸ’» å…³äºæˆ‘</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://lesanouo.github.io/blog/>Home</a>&nbsp;Â»&nbsp;<a href=https://lesanouo.github.io/blog/posts/>ğŸ“š åšå®¢</a></div><h1 class="post-title entry-hint-parent">Linux ä»£ç ç‰‡æ®µ</h1><div class=post-meta><span title='2022-02-16 00:00:00 +0000 UTC'>2022-02-16</span>&nbsp;Â·&nbsp;9 min&nbsp;Â·&nbsp;Lesan</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#linux%e5%85%b3%e6%9c%ba%e9%87%8d%e5%90%af aria-label=Linuxå…³æœº,é‡å¯>Linuxå…³æœº,é‡å¯</a></li><li><a href=#%e6%9f%a5%e7%9c%8b%e7%b3%bb%e7%bb%9fcpu%e4%bf%a1%e6%81%af aria-label=æŸ¥çœ‹ç³»ç»Ÿ,CPUä¿¡æ¯>æŸ¥çœ‹ç³»ç»Ÿ,CPUä¿¡æ¯</a></li><li><a href=#%e5%bb%ba%e7%ab%8b%e8%bd%af%e8%bf%9e%e6%8e%a5 aria-label=å»ºç«‹è½¯è¿æ¥>å»ºç«‹è½¯è¿æ¥</a></li><li><a href=#rpm%e7%9b%b8%e5%85%b3 aria-label=rpmç›¸å…³>rpmç›¸å…³</a></li><li><a href=#sshkey aria-label=sshkey>sshkey</a></li><li><a href=#%e5%91%bd%e4%bb%a4%e9%87%8d%e5%91%bd%e5%90%8d aria-label=å‘½ä»¤é‡å‘½å>å‘½ä»¤é‡å‘½å</a></li><li><a href=#%e5%90%8c%e6%ad%a5%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%97%b6%e9%97%b4 aria-label=åŒæ­¥æœåŠ¡å™¨æ—¶é—´>åŒæ­¥æœåŠ¡å™¨æ—¶é—´</a></li><li><a href=#%e5%90%8e%e5%8f%b0%e8%bf%90%e8%a1%8c aria-label=åå°è¿è¡Œ>åå°è¿è¡Œ</a></li><li><a href=#%e5%bc%ba%e5%88%b6%e6%b4%bb%e5%8a%a8%e7%94%a8%e6%88%b7%e9%80%80%e5%87%ba aria-label=å¼ºåˆ¶æ´»åŠ¨ç”¨æˆ·é€€å‡º>å¼ºåˆ¶æ´»åŠ¨ç”¨æˆ·é€€å‡º</a></li><li><a href=#%e6%9f%a5%e7%9c%8b%e5%91%bd%e4%bb%a4%e8%b7%af%e5%be%84 aria-label=æŸ¥çœ‹å‘½ä»¤è·¯å¾„>æŸ¥çœ‹å‘½ä»¤è·¯å¾„</a></li><li><a href=#%e6%9f%a5%e7%9c%8b%e8%bf%9b%e7%a8%8b%e6%89%80%e6%9c%89%e6%89%93%e5%bc%80%e6%9c%80%e5%a4%a7fd%e6%95%b0 aria-label=æŸ¥çœ‹è¿›ç¨‹æ‰€æœ‰æ‰“å¼€æœ€å¤§fdæ•°>æŸ¥çœ‹è¿›ç¨‹æ‰€æœ‰æ‰“å¼€æœ€å¤§fdæ•°</a></li><li><a href=#%e9%85%8d%e7%bd%aedns aria-label=é…ç½®dns>é…ç½®dns</a></li><li><a href=#nslookup%e6%9f%a5%e7%9c%8b%e5%9f%9f%e5%90%8d%e8%b7%af%e7%94%b1%e8%a1%a8 aria-label=nslookup,æŸ¥çœ‹åŸŸåè·¯ç”±è¡¨>nslookup,æŸ¥çœ‹åŸŸåè·¯ç”±è¡¨</a></li><li><a href=#last%e6%9c%80%e8%bf%91%e7%99%bb%e5%bd%95%e4%bf%a1%e6%81%af%e5%88%97%e8%a1%a8 aria-label=last,æœ€è¿‘ç™»å½•ä¿¡æ¯åˆ—è¡¨>last,æœ€è¿‘ç™»å½•ä¿¡æ¯åˆ—è¡¨</a></li><li><a href=#%e8%ae%be%e7%bd%ae%e5%9b%ba%e5%ae%9aip aria-label=è®¾ç½®å›ºå®šip>è®¾ç½®å›ºå®šip</a></li><li><a href=#%e6%9f%a5%e7%9c%8b%e8%bf%9b%e7%a8%8b%e5%86%85%e5%8a%a0%e8%bd%bd%e7%9a%84%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f aria-label=æŸ¥çœ‹è¿›ç¨‹å†…åŠ è½½çš„ç¯å¢ƒå˜é‡>æŸ¥çœ‹è¿›ç¨‹å†…åŠ è½½çš„ç¯å¢ƒå˜é‡</a></li><li><a href=#%e6%9f%a5%e7%9c%8b%e8%bf%9b%e7%a8%8b%e6%a0%91%e6%89%be%e5%88%b0%e6%9c%8d%e5%8a%a1%e5%99%a8%e8%bf%9b%e7%a8%8b aria-label=æŸ¥çœ‹è¿›ç¨‹æ ‘æ‰¾åˆ°æœåŠ¡å™¨è¿›ç¨‹>æŸ¥çœ‹è¿›ç¨‹æ ‘æ‰¾åˆ°æœåŠ¡å™¨è¿›ç¨‹</a></li><li><a href=#%e6%9f%a5%e7%9c%8b%e8%bf%9b%e7%a8%8b%e5%90%af%e5%8a%a8%e8%b7%af%e5%be%84 aria-label=æŸ¥çœ‹è¿›ç¨‹å¯åŠ¨è·¯å¾„>æŸ¥çœ‹è¿›ç¨‹å¯åŠ¨è·¯å¾„</a></li><li><a href=#%e6%b7%bb%e5%8a%a0%e7%94%a8%e6%88%b7%e9%85%8d%e7%bd%aesudo%e6%9d%83%e9%99%90 aria-label=æ·»åŠ ç”¨æˆ·,é…ç½®sudoæƒé™>æ·»åŠ ç”¨æˆ·,é…ç½®sudoæƒé™</a></li><li><a href=#%e5%bc%ba%e5%88%b6%e5%85%b3%e9%97%ad%e8%bf%9b%e7%a8%8b%e5%90%8d%e5%8c%85%e5%90%abxxx%e7%9a%84%e6%89%80%e6%9c%89%e8%bf%9b%e7%a8%8b aria-label=å¼ºåˆ¶å…³é—­è¿›ç¨‹ååŒ…å«xxxçš„æ‰€æœ‰è¿›ç¨‹>å¼ºåˆ¶å…³é—­è¿›ç¨‹ååŒ…å«xxxçš„æ‰€æœ‰è¿›ç¨‹</a></li><li><a href=#vim%e6%93%8d%e4%bd%9c aria-label=vimæ“ä½œ>vimæ“ä½œ</a></li><li><a href=#%e6%89%93%e5%bc%80%e5%8f%aa%e8%af%bb%e6%96%87%e4%bb%b6%e4%bf%ae%e6%94%b9%e5%90%8e%e9%9c%80%e8%a6%81%e4%bf%9d%e5%ad%98%e6%97%b6%e4%b8%8d%e7%94%a8%e5%88%87%e6%8d%a2%e7%94%a8%e6%88%b7%e5%8d%b3%e5%8f%af%e4%bf%9d%e5%ad%98%e7%9a%84%e6%96%b9%e5%bc%8f aria-label=æ‰“å¼€åªè¯»æ–‡ä»¶,ä¿®æ”¹åéœ€è¦ä¿å­˜æ—¶(ä¸ç”¨åˆ‡æ¢ç”¨æˆ·å³å¯ä¿å­˜çš„æ–¹å¼)>æ‰“å¼€åªè¯»æ–‡ä»¶,ä¿®æ”¹åéœ€è¦ä¿å­˜æ—¶(ä¸ç”¨åˆ‡æ¢ç”¨æˆ·å³å¯ä¿å­˜çš„æ–¹å¼)</a></li><li><a href=#%e6%9f%a5%e7%9c%8b%e7%a3%81%e7%9b%98-%e6%96%87%e4%bb%b6%e7%9b%ae%e5%bd%95%e5%9f%ba%e6%9c%ac%e4%bf%a1%e6%81%af aria-label="æŸ¥çœ‹ç£ç›˜, æ–‡ä»¶ç›®å½•åŸºæœ¬ä¿¡æ¯">æŸ¥çœ‹ç£ç›˜, æ–‡ä»¶ç›®å½•åŸºæœ¬ä¿¡æ¯</a></li><li><a href=#wc%e5%91%bd%e4%bb%a4 aria-label=wcå‘½ä»¤>wcå‘½ä»¤</a></li><li><a href=#%e5%8e%8b%e7%bc%a9%e5%91%bd%e4%bb%a4 aria-label=å‹ç¼©å‘½ä»¤>å‹ç¼©å‘½ä»¤</a></li><li><a href=#%e8%a7%a3%e5%8e%8b%e7%bc%a9%e5%91%bd%e4%bb%a4 aria-label=è§£å‹ç¼©å‘½ä»¤>è§£å‹ç¼©å‘½ä»¤</a></li><li><a href=#%e5%8f%98%e6%9b%b4%e6%96%87%e4%bb%b6%e6%89%80%e5%b1%9e%e7%94%a8%e6%88%b7-%e7%94%a8%e6%88%b7%e7%bb%84 aria-label="å˜æ›´æ–‡ä»¶æ‰€å±ç”¨æˆ·, ç”¨æˆ·ç»„">å˜æ›´æ–‡ä»¶æ‰€å±ç”¨æˆ·, ç”¨æˆ·ç»„</a></li><li><a href=#cp-scp-mkdir aria-label="cp, scp, mkdir">cp, scp, mkdir</a></li><li><a href=#%e6%af%94%e8%be%83%e4%b8%a4%e4%b8%aa%e6%96%87%e4%bb%b6 aria-label=æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶>æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶</a></li><li><a href=#%e6%97%a5%e5%bf%97%e8%be%93%e5%87%ba%e7%9a%84%e5%ad%97%e8%8a%82%e6%95%b0%e5%8f%af%e4%bb%a5%e7%94%a8%e4%bd%9c%e6%80%a7%e8%83%bd%e6%b5%8b%e8%af%95 aria-label=æ—¥å¿—è¾“å‡ºçš„å­—èŠ‚æ•°,å¯ä»¥ç”¨ä½œæ€§èƒ½æµ‹è¯•>æ—¥å¿—è¾“å‡ºçš„å­—èŠ‚æ•°,å¯ä»¥ç”¨ä½œæ€§èƒ½æµ‹è¯•</a></li><li><a href=#%e6%9f%a5%e7%9c%8b-%e5%8e%bb%e9%99%a4%e7%89%b9%e6%ae%8a%e5%ad%97%e7%ac%a6 aria-label="æŸ¥çœ‹, å»é™¤ç‰¹æ®Šå­—ç¬¦">æŸ¥çœ‹, å»é™¤ç‰¹æ®Šå­—ç¬¦</a></li><li><a href=#%e5%a4%84%e7%90%86%e5%9b%a0%e7%b3%bb%e7%bb%9f%e5%8e%9f%e5%9b%a0%e5%bc%95%e8%b5%b7%e7%9a%84%e6%96%87%e4%bb%b6%e4%b8%ad%e7%89%b9%e6%ae%8a%e5%ad%97%e7%ac%a6%e7%9a%84%e9%97%ae%e9%a2%98 aria-label=å¤„ç†å› ç³»ç»ŸåŸå› å¼•èµ·çš„æ–‡ä»¶ä¸­ç‰¹æ®Šå­—ç¬¦çš„é—®é¢˜>å¤„ç†å› ç³»ç»ŸåŸå› å¼•èµ·çš„æ–‡ä»¶ä¸­ç‰¹æ®Šå­—ç¬¦çš„é—®é¢˜</a></li><li><a href=#tee-%e9%87%8d%e5%ae%9a%e5%90%91%e7%9a%84%e5%90%8c%e6%97%b6%e8%be%93%e5%87%ba%e5%88%b0%e5%b1%8f%e5%b9%95 aria-label="tee, é‡å®šå‘çš„åŒæ—¶è¾“å‡ºåˆ°å±å¹•">tee, é‡å®šå‘çš„åŒæ—¶è¾“å‡ºåˆ°å±å¹•</a></li><li><a href=#grep aria-label=grep>grep</a></li><li><a href=#awk aria-label=awk>awk</a></li><li><a href=#find aria-label=find>find</a></li><li><a href=#%e6%9f%a5%e7%9c%8b%e4%bb%80%e4%b9%88%e8%bf%9b%e7%a8%8b%e4%bd%bf%e7%94%a8%e4%ba%86%e8%af%a5%e7%ab%af%e5%8f%a3 aria-label=æŸ¥çœ‹ä»€ä¹ˆè¿›ç¨‹ä½¿ç”¨äº†è¯¥ç«¯å£>æŸ¥çœ‹ä»€ä¹ˆè¿›ç¨‹ä½¿ç”¨äº†è¯¥ç«¯å£</a></li><li><a href=#%e8%8e%b7%e5%8f%96%e6%9c%ac%e6%9c%baip%e5%9c%b0%e5%9d%80 aria-label=è·å–æœ¬æœºipåœ°å€>è·å–æœ¬æœºipåœ°å€</a></li><li><a href=#iptables aria-label=iptables>iptables</a></li><li><a href=#nc%e5%91%bd%e4%bb%a4-tcp%e8%b0%83%e8%af%95%e5%88%a9%e5%99%a8 aria-label="ncå‘½ä»¤, tcpè°ƒè¯•åˆ©å™¨">ncå‘½ä»¤, tcpè°ƒè¯•åˆ©å™¨</a></li><li><a href=#tcpdump aria-label=tcpdump>tcpdump</a></li><li><a href=#%e8%b7%9f%e8%b8%aa%e7%bd%91%e7%bb%9c%e8%b7%af%e7%94%b1%e8%b7%af%e5%be%84 aria-label=è·Ÿè¸ªç½‘ç»œè·¯ç”±è·¯å¾„>è·Ÿè¸ªç½‘ç»œè·¯ç”±è·¯å¾„</a></li><li><a href=#ss aria-label=ss>ss</a></li><li><a href=#netstat aria-label=netstat>netstat</a></li><li><a href=#top aria-label=top>top</a></li><li><a href=#dmesg%e6%9f%a5%e7%9c%8b%e7%b3%bb%e7%bb%9f%e6%97%a5%e5%bf%97 aria-label=dmesg,æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—>dmesg,æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—</a></li><li><a href=#iostat%e7%a3%81%e7%9b%98io%e6%83%85%e5%86%b5%e7%9b%91%e6%8e%a7 aria-label=iostat,ç£ç›˜IOæƒ…å†µç›‘æ§>iostat,ç£ç›˜IOæƒ…å†µç›‘æ§</a></li><li><a href=#free%e5%86%85%e5%ad%98%e4%bd%bf%e7%94%a8%e6%83%85%e5%86%b5 aria-label=free,å†…å­˜ä½¿ç”¨æƒ…å†µ>free,å†…å­˜ä½¿ç”¨æƒ…å†µ</a></li><li><a href=#sar%e6%9f%a5%e7%9c%8b%e7%bd%91%e7%bb%9c%e5%90%9e%e5%90%90%e7%8a%b6%e6%80%81 aria-label=sar,æŸ¥çœ‹ç½‘ç»œååçŠ¶æ€>sar,æŸ¥çœ‹ç½‘ç»œååçŠ¶æ€</a></li><li><a href=#vmstat-%e7%bb%99%e5%ae%9a%e6%97%b6%e9%97%b4%e7%9b%91%e6%8e%a7cpu%e4%bd%bf%e7%94%a8%e7%8e%87-%e5%86%85%e5%ad%98%e4%bd%bf%e7%94%a8-%e8%99%9a%e6%8b%9f%e5%86%85%e5%ad%98%e4%ba%a4%e4%ba%92-io%e8%af%bb%e5%86%99 aria-label="vmstat, ç»™å®šæ—¶é—´ç›‘æ§CPUä½¿ç”¨ç‡, å†…å­˜ä½¿ç”¨, è™šæ‹Ÿå†…å­˜äº¤äº’, IOè¯»å†™">vmstat, ç»™å®šæ—¶é—´ç›‘æ§CPUä½¿ç”¨ç‡, å†…å­˜ä½¿ç”¨, è™šæ‹Ÿå†…å­˜äº¤äº’, IOè¯»å†™</a></li></ul></div></details></div><div class=post-content><h2 id=linuxå…³æœºé‡å¯>Linuxå…³æœº,é‡å¯<a hidden class=anchor aria-hidden=true href=#linuxå…³æœºé‡å¯>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># å…³æœº</span>
</span></span><span class=line><span class=cl>shutdown -h now
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># é‡å¯</span>
</span></span><span class=line><span class=cl>shutdown -r now
</span></span></code></pre></div><h2 id=æŸ¥çœ‹ç³»ç»Ÿcpuä¿¡æ¯>æŸ¥çœ‹ç³»ç»Ÿ,CPUä¿¡æ¯<a hidden class=anchor aria-hidden=true href=#æŸ¥çœ‹ç³»ç»Ÿcpuä¿¡æ¯>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># æŸ¥çœ‹ç³»ç»Ÿå†…æ ¸ä¿¡æ¯</span>
</span></span><span class=line><span class=cl>uname -a
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æŸ¥çœ‹ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬</span>
</span></span><span class=line><span class=cl>cat /proc/version
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æŸ¥çœ‹å½“å‰ç”¨æˆ·ç¯å¢ƒå˜é‡</span>
</span></span><span class=line><span class=cl>env
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>cat /proc/cpuinfo
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æŸ¥çœ‹æœ‰å‡ ä¸ªé€»è¾‘cpu, åŒ…æ‹¬cpuå‹å·</span>
</span></span><span class=line><span class=cl>cat /proc/cpuinfo <span class=p>|</span> grep name <span class=p>|</span> cut -f2 -d: <span class=p>|</span> uniq -c
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æŸ¥çœ‹æœ‰å‡ é¢—cpu,æ¯é¢—åˆ†åˆ«æ˜¯å‡ æ ¸</span>
</span></span><span class=line><span class=cl>cat /proc/cpuinfo <span class=p>|</span> grep physical <span class=p>|</span> uniq -c
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æŸ¥çœ‹å½“å‰CPUè¿è¡Œåœ¨32bitè¿˜æ˜¯64bitæ¨¡å¼ä¸‹, å¦‚æœæ˜¯è¿è¡Œåœ¨32bitä¸‹ä¹Ÿä¸ä»£è¡¨CPUä¸æ”¯æŒ64bit</span>
</span></span><span class=line><span class=cl>getconf LONG_BIT
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç»“æœå¤§äº0, è¯´æ˜æ”¯æŒ64bitè®¡ç®—. lmæŒ‡long mode, æ”¯æŒlmåˆ™æ˜¯64bit</span>
</span></span><span class=line><span class=cl>cat /proc/cpuinfo <span class=p>|</span> grep flags <span class=p>|</span> grep <span class=s1>&#39; lm &#39;</span> <span class=p>|</span> wc -l
</span></span></code></pre></div><h2 id=å»ºç«‹è½¯è¿æ¥>å»ºç«‹è½¯è¿æ¥<a hidden class=anchor aria-hidden=true href=#å»ºç«‹è½¯è¿æ¥>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ln -s /usr/local/jdk1.8/ jdk
</span></span></code></pre></div><h2 id=rpmç›¸å…³>rpmç›¸å…³<a hidden class=anchor aria-hidden=true href=#rpmç›¸å…³>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># æŸ¥çœ‹æ˜¯å¦é€šè¿‡rpmå®‰è£…äº†è¯¥è½¯ä»¶</span>
</span></span><span class=line><span class=cl>rpm -qa <span class=p>|</span> grep è½¯ä»¶å
</span></span></code></pre></div><h2 id=sshkey>sshkey<a hidden class=anchor aria-hidden=true href=#sshkey>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># åˆ›å»ºsshkey</span>
</span></span><span class=line><span class=cl>ssh-keygen -t rsa -C your_email@example.com
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#id_rsa.pub çš„å†…å®¹æ‹·è´åˆ°è¦æ§åˆ¶çš„æœåŠ¡å™¨çš„ home/username/.ssh/authorized_keys ä¸­,å¦‚æœæ²¡æœ‰åˆ™æ–°å»º(.sshæƒé™ä¸º700, authorized_keysæƒé™ä¸º600)</span>
</span></span></code></pre></div><h2 id=å‘½ä»¤é‡å‘½å>å‘½ä»¤é‡å‘½å<a hidden class=anchor aria-hidden=true href=#å‘½ä»¤é‡å‘½å>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># åœ¨å„ä¸ªç”¨æˆ·çš„.bash_profileä¸­æ·»åŠ é‡å‘½åé…ç½®</span>
</span></span><span class=line><span class=cl><span class=nb>alias</span> <span class=nv>ll</span><span class=o>=</span><span class=s1>&#39;ls -alF&#39;</span>
</span></span></code></pre></div><h2 id=åŒæ­¥æœåŠ¡å™¨æ—¶é—´>åŒæ­¥æœåŠ¡å™¨æ—¶é—´<a hidden class=anchor aria-hidden=true href=#åŒæ­¥æœåŠ¡å™¨æ—¶é—´>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ntpdate -u ntp.api.bz
</span></span></code></pre></div><h2 id=åå°è¿è¡Œ>åå°è¿è¡Œ<a hidden class=anchor aria-hidden=true href=#åå°è¿è¡Œ>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># åå°è¿è¡Œ,å¹¶ä¸”æœ‰nohup.outè¾“å‡º</span>
</span></span><span class=line><span class=cl>nohup xxx <span class=p>&amp;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åå°è¿è¡Œ, ä¸è¾“å‡ºä»»ä½•æ—¥å¿—</span>
</span></span><span class=line><span class=cl>nohup xxx &gt; /dev/null <span class=p>&amp;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åå°è¿è¡Œ, å¹¶å°†é”™è¯¯ä¿¡æ¯åšæ ‡å‡†è¾“å‡ºåˆ°æ—¥å¿—ä¸­</span>
</span></span><span class=line><span class=cl>nohup xxx &gt;out.log 2&gt;<span class=p>&amp;</span><span class=m>1</span> <span class=p>&amp;</span>
</span></span></code></pre></div><h2 id=å¼ºåˆ¶æ´»åŠ¨ç”¨æˆ·é€€å‡º>å¼ºåˆ¶æ´»åŠ¨ç”¨æˆ·é€€å‡º<a hidden class=anchor aria-hidden=true href=#å¼ºåˆ¶æ´»åŠ¨ç”¨æˆ·é€€å‡º>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># å‘½ä»¤æ¥å®Œæˆå¼ºåˆ¶æ´»åŠ¨ç”¨æˆ·é€€å‡º.å…¶ä¸­TTYè¡¨ç¤ºç»ˆç«¯åç§°</span>
</span></span><span class=line><span class=cl>pkill -kill -t <span class=o>[</span>TTY<span class=o>]</span>
</span></span></code></pre></div><h2 id=æŸ¥çœ‹å‘½ä»¤è·¯å¾„>æŸ¥çœ‹å‘½ä»¤è·¯å¾„<a hidden class=anchor aria-hidden=true href=#æŸ¥çœ‹å‘½ä»¤è·¯å¾„>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>which &lt;å‘½ä»¤&gt;
</span></span></code></pre></div><h2 id=æŸ¥çœ‹è¿›ç¨‹æ‰€æœ‰æ‰“å¼€æœ€å¤§fdæ•°>æŸ¥çœ‹è¿›ç¨‹æ‰€æœ‰æ‰“å¼€æœ€å¤§fdæ•°<a hidden class=anchor aria-hidden=true href=#æŸ¥çœ‹è¿›ç¨‹æ‰€æœ‰æ‰“å¼€æœ€å¤§fdæ•°>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>ulimit</span> -n
</span></span></code></pre></div><h2 id=é…ç½®dns>é…ç½®dns<a hidden class=anchor aria-hidden=true href=#é…ç½®dns>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vim /etc/resolv.conf
</span></span></code></pre></div><h2 id=nslookupæŸ¥çœ‹åŸŸåè·¯ç”±è¡¨>nslookup,æŸ¥çœ‹åŸŸåè·¯ç”±è¡¨<a hidden class=anchor aria-hidden=true href=#nslookupæŸ¥çœ‹åŸŸåè·¯ç”±è¡¨>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>nslookup google.com
</span></span></code></pre></div><h2 id=lastæœ€è¿‘ç™»å½•ä¿¡æ¯åˆ—è¡¨>last,æœ€è¿‘ç™»å½•ä¿¡æ¯åˆ—è¡¨<a hidden class=anchor aria-hidden=true href=#lastæœ€è¿‘ç™»å½•ä¿¡æ¯åˆ—è¡¨>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># æœ€è¿‘ç™»å½•çš„5ä¸ªè´¦å·</span>
</span></span><span class=line><span class=cl>last -n <span class=m>5</span>
</span></span></code></pre></div><h2 id=è®¾ç½®å›ºå®šip>è®¾ç½®å›ºå®šip<a hidden class=anchor aria-hidden=true href=#è®¾ç½®å›ºå®šip>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ifconfig em1  192.168.5.177 netmask 255.255.255.0
</span></span></code></pre></div><h2 id=æŸ¥çœ‹è¿›ç¨‹å†…åŠ è½½çš„ç¯å¢ƒå˜é‡>æŸ¥çœ‹è¿›ç¨‹å†…åŠ è½½çš„ç¯å¢ƒå˜é‡<a hidden class=anchor aria-hidden=true href=#æŸ¥çœ‹è¿›ç¨‹å†…åŠ è½½çš„ç¯å¢ƒå˜é‡>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># ä¹Ÿå¯ä»¥å» cd /proc ç›®å½•ä¸‹, æŸ¥çœ‹è¿›ç¨‹å†…å­˜ä¸­åŠ è½½çš„ä¸œè¥¿</span>
</span></span><span class=line><span class=cl>ps eww -p  XXXXX<span class=o>(</span>è¿›ç¨‹å·<span class=o>)</span>
</span></span></code></pre></div><h2 id=æŸ¥çœ‹è¿›ç¨‹æ ‘æ‰¾åˆ°æœåŠ¡å™¨è¿›ç¨‹>æŸ¥çœ‹è¿›ç¨‹æ ‘æ‰¾åˆ°æœåŠ¡å™¨è¿›ç¨‹<a hidden class=anchor aria-hidden=true href=#æŸ¥çœ‹è¿›ç¨‹æ ‘æ‰¾åˆ°æœåŠ¡å™¨è¿›ç¨‹>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ps auwxf
</span></span></code></pre></div><h2 id=æŸ¥çœ‹è¿›ç¨‹å¯åŠ¨è·¯å¾„>æŸ¥çœ‹è¿›ç¨‹å¯åŠ¨è·¯å¾„<a hidden class=anchor aria-hidden=true href=#æŸ¥çœ‹è¿›ç¨‹å¯åŠ¨è·¯å¾„>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /proc/xxx<span class=o>(</span>è¿›ç¨‹å·<span class=o>)</span>
</span></span><span class=line><span class=cl>ls -all
</span></span><span class=line><span class=cl><span class=c1># cwdå¯¹åº”çš„æ˜¯å¯åŠ¨è·¯å¾„</span>
</span></span></code></pre></div><h2 id=æ·»åŠ ç”¨æˆ·é…ç½®sudoæƒé™>æ·»åŠ ç”¨æˆ·,é…ç½®sudoæƒé™<a hidden class=anchor aria-hidden=true href=#æ·»åŠ ç”¨æˆ·é…ç½®sudoæƒé™>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># æ–°å¢ç”¨æˆ·</span>
</span></span><span class=line><span class=cl>useradd ç”¨æˆ·å
</span></span><span class=line><span class=cl>passwd ç”¨æˆ·å
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#å¢åŠ sudoæƒé™</span>
</span></span><span class=line><span class=cl>vim /etc/sudoers
</span></span><span class=line><span class=cl><span class=c1># ä¿®æ”¹æ–‡ä»¶é‡Œé¢çš„</span>
</span></span><span class=line><span class=cl><span class=c1># root    ALL=(ALL)       ALL</span>
</span></span><span class=line><span class=cl><span class=c1># ç”¨æˆ·å ALL=(ALL)       ALL</span>
</span></span></code></pre></div><h2 id=å¼ºåˆ¶å…³é—­è¿›ç¨‹ååŒ…å«xxxçš„æ‰€æœ‰è¿›ç¨‹>å¼ºåˆ¶å…³é—­è¿›ç¨‹ååŒ…å«xxxçš„æ‰€æœ‰è¿›ç¨‹<a hidden class=anchor aria-hidden=true href=#å¼ºåˆ¶å…³é—­è¿›ç¨‹ååŒ…å«xxxçš„æ‰€æœ‰è¿›ç¨‹>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ps aux<span class=p>|</span>grep xxx <span class=p>|</span> grep -v grep <span class=p>|</span> awk <span class=s1>&#39;{print $2}&#39;</span> <span class=p>|</span> xargs <span class=nb>kill</span> -9
</span></span></code></pre></div><h2 id=vimæ“ä½œ>vimæ“ä½œ<a hidden class=anchor aria-hidden=true href=#vimæ“ä½œ>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>#normalæ¨¡å¼ä¸‹ gè¡¨ç¤ºå…¨å±€, xè¡¨ç¤ºæŸ¥æ‰¾çš„å†…å®¹, yè¡¨ç¤ºæ›¿æ¢åçš„å†…å®¹</span>
</span></span><span class=line><span class=cl>:%s/x/y/g
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#normalæ¨¡å¼ä¸‹</span>
</span></span><span class=line><span class=cl><span class=m>0</span>  <span class=c1># å…‰æ ‡ç§»åˆ°è¡Œé¦–(æ•°å­—0)</span>
</span></span><span class=line><span class=cl>$  <span class=c1># å…‰æ ‡ç§»è‡³è¡Œå°¾</span>
</span></span><span class=line><span class=cl><span class=nb>shift</span> + g <span class=c1># è·³åˆ°æ–‡ä»¶æœ€å</span>
</span></span><span class=line><span class=cl>gg <span class=c1># è·³åˆ°æ–‡ä»¶å¤´</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ˜¾ç¤ºè¡Œå·</span>
</span></span><span class=line><span class=cl>:set nu
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å»é™¤è¡Œå·</span>
</span></span><span class=line><span class=cl>:set nonu
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ£€ç´¢</span>
</span></span><span class=line><span class=cl>/xxx<span class=o>(</span>æ£€ç´¢å†…å®¹<span class=o>)</span>  <span class=c1># ä»å¤´æ£€ç´¢, æŒ‰næŸ¥æ‰¾ä¸‹ä¸€ä¸ª</span>
</span></span><span class=line><span class=cl>?xxx<span class=o>(</span>æ£€ç´¢å†…å®¹<span class=o>)</span>  <span class=c1># ä»å°¾éƒ¨æ£€ç´¢</span>
</span></span></code></pre></div><h2 id=æ‰“å¼€åªè¯»æ–‡ä»¶ä¿®æ”¹åéœ€è¦ä¿å­˜æ—¶ä¸ç”¨åˆ‡æ¢ç”¨æˆ·å³å¯ä¿å­˜çš„æ–¹å¼>æ‰“å¼€åªè¯»æ–‡ä»¶,ä¿®æ”¹åéœ€è¦ä¿å­˜æ—¶(ä¸ç”¨åˆ‡æ¢ç”¨æˆ·å³å¯ä¿å­˜çš„æ–¹å¼)<a hidden class=anchor aria-hidden=true href=#æ‰“å¼€åªè¯»æ–‡ä»¶ä¿®æ”¹åéœ€è¦ä¿å­˜æ—¶ä¸ç”¨åˆ‡æ¢ç”¨æˆ·å³å¯ä¿å­˜çš„æ–¹å¼>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># åœ¨normalæ¨¡å¼ä¸‹</span>
</span></span><span class=line><span class=cl>:w !sudo tee %
</span></span></code></pre></div><h2 id=æŸ¥çœ‹ç£ç›˜-æ–‡ä»¶ç›®å½•åŸºæœ¬ä¿¡æ¯>æŸ¥çœ‹ç£ç›˜, æ–‡ä»¶ç›®å½•åŸºæœ¬ä¿¡æ¯<a hidden class=anchor aria-hidden=true href=#æŸ¥çœ‹ç£ç›˜-æ–‡ä»¶ç›®å½•åŸºæœ¬ä¿¡æ¯>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># æŸ¥çœ‹ç£ç›˜æŒ‚è½½æƒ…å†µ</span>
</span></span><span class=line><span class=cl>mount
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æŸ¥çœ‹ç£ç›˜åˆ†åŒºä¿¡æ¯</span>
</span></span><span class=line><span class=cl>df
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æŸ¥çœ‹ç›®å½•åŠå­ç›®å½•å¤§å°</span>
</span></span><span class=line><span class=cl>du -H -h
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹å„ä¸ªæ–‡ä»¶, æ–‡ä»¶å¤¹å äº†å¤šå°‘ç©ºé—´, ä¸ä¼šé€’å½’</span>
</span></span><span class=line><span class=cl>du -sh *
</span></span></code></pre></div><h2 id=wcå‘½ä»¤>wcå‘½ä»¤<a hidden class=anchor aria-hidden=true href=#wcå‘½ä»¤>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># æŸ¥çœ‹æ–‡ä»¶é‡Œæœ‰å¤šå°‘è¡Œ</span>
</span></span><span class=line><span class=cl>wc -l filename
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># çœ‹æ–‡ä»¶é‡Œæœ‰å¤šå°‘ä¸ªword</span>
</span></span><span class=line><span class=cl>wc -w filename
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ–‡ä»¶é‡Œæœ€é•¿çš„é‚£ä¸€è¡Œæ˜¯å¤šå°‘ä¸ªå­—</span>
</span></span><span class=line><span class=cl>wc -L filename
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç»Ÿè®¡å­—èŠ‚æ•°</span>
</span></span><span class=line><span class=cl>wc -c
</span></span></code></pre></div><h2 id=å‹ç¼©å‘½ä»¤>å‹ç¼©å‘½ä»¤<a hidden class=anchor aria-hidden=true href=#å‹ç¼©å‘½ä»¤>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>tar czvf xxx.tar å‹ç¼©ç›®å½•
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>zip -r xxx.zip å‹ç¼©ç›®å½•
</span></span></code></pre></div><h2 id=è§£å‹ç¼©å‘½ä»¤>è§£å‹ç¼©å‘½ä»¤<a hidden class=anchor aria-hidden=true href=#è§£å‹ç¼©å‘½ä»¤>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>tar zxvf xxx.tar
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># è§£å‹åˆ°æŒ‡å®šæ–‡ä»¶å¤¹</span>
</span></span><span class=line><span class=cl>tar zxvf xxx.tar -C /xxx/yyy/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>unzip xxx.zip
</span></span></code></pre></div><h2 id=å˜æ›´æ–‡ä»¶æ‰€å±ç”¨æˆ·-ç”¨æˆ·ç»„>å˜æ›´æ–‡ä»¶æ‰€å±ç”¨æˆ·, ç”¨æˆ·ç»„<a hidden class=anchor aria-hidden=true href=#å˜æ›´æ–‡ä»¶æ‰€å±ç”¨æˆ·-ç”¨æˆ·ç»„>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>chown eagleye.eagleye xxx.log
</span></span></code></pre></div><h2 id=cp-scp-mkdir>cp, scp, mkdir<a hidden class=anchor aria-hidden=true href=#cp-scp-mkdir>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>#å¤åˆ¶</span>
</span></span><span class=line><span class=cl>cp xxx.log
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å¤åˆ¶å¹¶å¼ºåˆ¶è¦†ç›–åŒåæ–‡ä»¶</span>
</span></span><span class=line><span class=cl>cp -f xxx.log
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å¤åˆ¶æ–‡ä»¶å¤¹</span>
</span></span><span class=line><span class=cl>cp -r xxx<span class=o>(</span>æºæ–‡ä»¶å¤¹<span class=o>)</span> yyy<span class=o>(</span>ç›®æ ‡æ–‡ä»¶å¤¹<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># è¿œç¨‹å¤åˆ¶</span>
</span></span><span class=line><span class=cl>scp -P sshç«¯å£ username@10.10.10.101:/home/username/xxx /home/xxx
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># çº§è”åˆ›å»ºç›®å½•</span>
</span></span><span class=line><span class=cl>mkdir -p /xxx/yyy/zzz
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ‰¹é‡åˆ›å»ºæ–‡ä»¶å¤¹, ä¼šåœ¨test,mainä¸‹éƒ½åˆ›å»ºjava, resourcesæ–‡ä»¶å¤¹</span>
</span></span><span class=line><span class=cl>mkdir -p src/<span class=o>{</span>test,main<span class=o>}</span>/<span class=o>{</span>java,resources<span class=o>}</span>
</span></span></code></pre></div><h2 id=æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶>æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶<a hidden class=anchor aria-hidden=true href=#æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>diff -u 1.txt 2.txt
</span></span></code></pre></div><h2 id=æ—¥å¿—è¾“å‡ºçš„å­—èŠ‚æ•°å¯ä»¥ç”¨ä½œæ€§èƒ½æµ‹è¯•>æ—¥å¿—è¾“å‡ºçš„å­—èŠ‚æ•°,å¯ä»¥ç”¨ä½œæ€§èƒ½æµ‹è¯•<a hidden class=anchor aria-hidden=true href=#æ—¥å¿—è¾“å‡ºçš„å­—èŠ‚æ•°å¯ä»¥ç”¨ä½œæ€§èƒ½æµ‹è¯•>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># å¦‚æœåšæ€§èƒ½æµ‹è¯•, å¯ä»¥æ¯æ‰§è¡Œä¸€æ¬¡, å¾€æ—¥å¿—é‡Œé¢è¾“å‡º â€œ.â€ , è¿™æ ·æ—¥å¿—ä¸­çš„å­—èŠ‚æ•°å°±æ˜¯å®é™…çš„æ€§èƒ½æµ‹è¯•è¿è¡Œçš„æ¬¡æ•°, è¿˜å¯ä»¥çœ‹è§å®æ—¶é€Ÿç‡.</span>
</span></span><span class=line><span class=cl>tail -f xxx.log <span class=p>|</span> pv -bt
</span></span></code></pre></div><h2 id=æŸ¥çœ‹-å»é™¤ç‰¹æ®Šå­—ç¬¦>æŸ¥çœ‹, å»é™¤ç‰¹æ®Šå­—ç¬¦<a hidden class=anchor aria-hidden=true href=#æŸ¥çœ‹-å»é™¤ç‰¹æ®Šå­—ç¬¦>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># æŸ¥çœ‹ç‰¹æ®Šå­—ç¬¦</span>
</span></span><span class=line><span class=cl>cat -v xxx.sh
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å»é™¤ç‰¹æ®Šå­—ç¬¦</span>
</span></span><span class=line><span class=cl>sed -i <span class=err>&#39;</span>s/^M//gâ€™ env.sh  å»é™¤æ–‡ä»¶çš„ç‰¹æ®Šå­—ç¬¦, æ¯”å¦‚^M:  éœ€è¦è¿™æ ·è¾“å…¥: ctrl+v+enter
</span></span></code></pre></div><h2 id=å¤„ç†å› ç³»ç»ŸåŸå› å¼•èµ·çš„æ–‡ä»¶ä¸­ç‰¹æ®Šå­—ç¬¦çš„é—®é¢˜>å¤„ç†å› ç³»ç»ŸåŸå› å¼•èµ·çš„æ–‡ä»¶ä¸­ç‰¹æ®Šå­—ç¬¦çš„é—®é¢˜<a hidden class=anchor aria-hidden=true href=#å¤„ç†å› ç³»ç»ŸåŸå› å¼•èµ·çš„æ–‡ä»¶ä¸­ç‰¹æ®Šå­—ç¬¦çš„é—®é¢˜>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># å¯ä»¥è½¬æ¢ä¸ºè¯¥ç³»ç»Ÿä¸‹çš„æ–‡ä»¶æ ¼å¼</span>
</span></span><span class=line><span class=cl>cat file.sh &gt; file.sh_bak
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å…ˆå°†file.shä¸­æ–‡ä»¶å†…å®¹å¤åˆ¶ä¸‹æ¥ç„¶åè¿è¡Œ, ç„¶åç²˜è´´å†…å®¹, æœ€åctrl + d ä¿å­˜é€€å‡º</span>
</span></span><span class=line><span class=cl>cat &gt; file1.sh
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åœ¨vimä¸­é€šè¿‡å¦‚ä¸‹è®¾ç½®æ–‡ä»¶ç¼–ç å’Œæ–‡ä»¶æ ¼å¼</span>
</span></span><span class=line><span class=cl>:set <span class=nv>fileencodings</span><span class=o>=</span>utf-8 ï¼Œç„¶å w ï¼ˆå­˜ç›˜ï¼‰ä¸€ä¸‹å³å¯è½¬åŒ–ä¸º utf8 æ ¼å¼ï¼Œ
</span></span><span class=line><span class=cl>:set <span class=nv>fileformat</span><span class=o>=</span>unix
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åœ¨macä¸‹ä½¿ç”¨dos2unixè¿›è¡Œæ–‡ä»¶æ ¼å¼åŒ–</span>
</span></span><span class=line><span class=cl>find . -name <span class=s2>&#34;*.sh&#34;</span> <span class=p>|</span> xargs dos2unix
</span></span></code></pre></div><h2 id=tee-é‡å®šå‘çš„åŒæ—¶è¾“å‡ºåˆ°å±å¹•>tee, é‡å®šå‘çš„åŒæ—¶è¾“å‡ºåˆ°å±å¹•<a hidden class=anchor aria-hidden=true href=#tee-é‡å®šå‘çš„åŒæ—¶è¾“å‡ºåˆ°å±å¹•>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>awk â€˜<span class=o>{</span>print <span class=nv>$0</span><span class=o>}</span>â€™ xxx.log <span class=p>|</span> tee test.log
</span></span></code></pre></div><h2 id=grep>grep<a hidden class=anchor aria-hidden=true href=#grep>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># åå‘åŒ¹é…, æŸ¥æ‰¾ä¸åŒ…å«xxxçš„å†…å®¹</span>
</span></span><span class=line><span class=cl>grep -v xxx
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ’é™¤æ‰€æœ‰ç©ºè¡Œ</span>
</span></span><span class=line><span class=cl>grep -v <span class=s1>&#39;^/pre&gt;&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># è¿”å›ç»“æœ 2,åˆ™è¯´æ˜ç¬¬äºŒè¡Œæ˜¯ç©ºè¡Œ</span>
</span></span><span class=line><span class=cl>grep -n â€œ^$â€ 111.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æŸ¥è¯¢ä»¥abcå¼€å¤´çš„è¡Œ</span>
</span></span><span class=line><span class=cl>grep -n â€œ^abcâ€ 111.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åŒæ—¶åˆ—å‡ºè¯¥è¯è¯­å‡ºç°åœ¨æ–‡ç« çš„ç¬¬å‡ è¡Œ</span>
</span></span><span class=line><span class=cl>grep <span class=s1>&#39;xxx&#39;</span> -n xxx.log
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># è®¡ç®—ä¸€ä¸‹è¯¥å­—ä¸²å‡ºç°çš„æ¬¡æ•°</span>
</span></span><span class=line><span class=cl>grep <span class=s1>&#39;xxx&#39;</span> -c xxx.log
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ¯”å¯¹çš„æ—¶å€™ï¼Œä¸è®¡è¾ƒå¤§å°å†™çš„ä¸åŒ</span>
</span></span><span class=line><span class=cl>grep <span class=s1>&#39;xxx&#39;</span> -i xxx.log
</span></span></code></pre></div><h2 id=awk>awk<a hidden class=anchor aria-hidden=true href=#awk>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># ä»¥&#39;:&#39; ä¸ºåˆ†éš”ç¬¦,å¦‚æœç¬¬äº”åŸŸæœ‰useråˆ™è¾“å‡ºè¯¥è¡Œ</span>
</span></span><span class=line><span class=cl>awk -F <span class=s1>&#39;:&#39;</span> <span class=s1>&#39;{if ($5 ~ /user/) print $0}&#39;</span> /etc/passwd
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç»Ÿè®¡å•ä¸ªæ–‡ä»¶ä¸­æŸä¸ªå­—ç¬¦ï¼ˆä¸²ï¼‰(ä¸­æ–‡æ— æ•ˆ)å‡ºç°çš„æ¬¡æ•°</span>
</span></span><span class=line><span class=cl>awk -v <span class=nv>RS</span><span class=o>=</span><span class=s1>&#39;character&#39;</span> <span class=s1>&#39;END {print --NR}&#39;</span> xxx.txt
</span></span></code></pre></div><h2 id=find>find<a hidden class=anchor aria-hidden=true href=#find>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># åœ¨ç›®å½•ä¸‹æ‰¾åç¼€æ˜¯.mysqlçš„æ–‡ä»¶</span>
</span></span><span class=line><span class=cl>find /home/eagleye -name <span class=s1>&#39;*.mysql&#39;</span> -print
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä¼šä» /usr ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾æœ€è¿‘3å¤©ä¹‹å†…å­˜å–è¿‡çš„æ–‡ä»¶ã€‚</span>
</span></span><span class=line><span class=cl>find /usr -atime <span class=m>3</span> â€“print
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä¼šä» /usr ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾æœ€è¿‘5å¤©ä¹‹å†…ä¿®æ”¹è¿‡çš„æ–‡ä»¶ã€‚</span>
</span></span><span class=line><span class=cl>find /usr -ctime <span class=m>5</span> â€“print
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä¼šä» /doc ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾jacky çš„ã€æ–‡ä»¶åå¼€å¤´æ˜¯ jçš„æ–‡ä»¶ã€‚</span>
</span></span><span class=line><span class=cl>find /doc -user jacky -name <span class=s1>&#39;j*&#39;</span> â€“print
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä¼šä» /doc ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾å¯»æ–‡ä»¶åæ˜¯ ja å¼€å¤´æˆ–è€… maå¼€å¤´çš„æ–‡ä»¶ã€‚</span>
</span></span><span class=line><span class=cl>find /doc <span class=se>\(</span> -name <span class=s1>&#39;ja*&#39;</span> -o- -name <span class=s1>&#39;ma*&#39;</span> <span class=se>\)</span> â€“print
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#  ä¼šä» /doc ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾åˆ°å‡¡æ˜¯æ–‡ä»¶åç»“å°¾ä¸º bakçš„æ–‡ä»¶ï¼ŒæŠŠå®ƒåˆ é™¤æ‰ã€‚-exec é€‰é¡¹æ˜¯æ‰§è¡Œçš„æ„æ€ï¼Œrm æ˜¯åˆ é™¤å‘½ä»¤ï¼Œ{ } è¡¨ç¤ºæ–‡ä»¶åï¼Œâ€œ\;â€æ˜¯è§„å®šçš„å‘½ä»¤ç»“å°¾ã€‚</span>
</span></span><span class=line><span class=cl>find /doc -name <span class=s1>&#39;*bak&#39;</span> -exec rm <span class=o>{}</span> <span class=se>\;</span>
</span></span></code></pre></div><h2 id=æŸ¥çœ‹ä»€ä¹ˆè¿›ç¨‹ä½¿ç”¨äº†è¯¥ç«¯å£>æŸ¥çœ‹ä»€ä¹ˆè¿›ç¨‹ä½¿ç”¨äº†è¯¥ç«¯å£<a hidden class=anchor aria-hidden=true href=#æŸ¥çœ‹ä»€ä¹ˆè¿›ç¨‹ä½¿ç”¨äº†è¯¥ç«¯å£>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lsof -i:port
</span></span></code></pre></div><h2 id=è·å–æœ¬æœºipåœ°å€>è·å–æœ¬æœºipåœ°å€<a hidden class=anchor aria-hidden=true href=#è·å–æœ¬æœºipåœ°å€>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>/sbin/ifconfig -a<span class=p>|</span>grep inet<span class=p>|</span>grep -v 127.0.0.1<span class=p>|</span>grep -v inet6<span class=p>|</span>awk <span class=s1>&#39;{print $2}&#39;</span><span class=p>|</span>tr -d <span class=s2>&#34;addr:&#34;</span>
</span></span></code></pre></div><h2 id=iptables>iptables<a hidden class=anchor aria-hidden=true href=#iptables>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># æŸ¥çœ‹iptablesçŠ¶æ€</span>
</span></span><span class=line><span class=cl>service iptables status
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># è¦å°åœä¸€ä¸ªip</span>
</span></span><span class=line><span class=cl>iptables -I INPUT -s ***.***.***.*** -j DROP
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># è¦è§£å°ä¸€ä¸ªIPï¼Œä½¿ç”¨ä¸‹é¢è¿™æ¡å‘½ä»¤ï¼š</span>
</span></span><span class=line><span class=cl>iptables -D INPUT -s ***.***.***.*** -j DROP
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>å¤‡æ³¨: å‚æ•°-Iæ˜¯è¡¨ç¤ºInsertï¼ˆæ·»åŠ ï¼‰ï¼Œ-Dè¡¨ç¤ºDeleteï¼ˆåˆ é™¤ï¼‰ã€‚åé¢è·Ÿçš„æ˜¯è§„åˆ™ï¼ŒINPUTè¡¨ç¤ºå…¥ç«™ï¼Œ***.***.***.***è¡¨ç¤ºè¦å°åœçš„IPï¼ŒDROPè¡¨ç¤ºæ”¾å¼ƒè¿æ¥ã€‚
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#å¼€å¯9090ç«¯å£çš„è®¿é—®</span>
</span></span><span class=line><span class=cl>/sbin/iptables -I INPUT -p tcp --dport <span class=m>9090</span> -j ACCEPT
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># é˜²ç«å¢™å¼€å¯ã€å…³é—­ã€é‡å¯</span>
</span></span><span class=line><span class=cl>/etc/init.d/iptables status
</span></span><span class=line><span class=cl>/etc/init.d/iptables start
</span></span><span class=line><span class=cl>/etc/init.d/iptables stop
</span></span><span class=line><span class=cl>/etc/init.d/iptables restart
</span></span></code></pre></div><h2 id=ncå‘½ä»¤-tcpè°ƒè¯•åˆ©å™¨>ncå‘½ä»¤, tcpè°ƒè¯•åˆ©å™¨<a hidden class=anchor aria-hidden=true href=#ncå‘½ä»¤-tcpè°ƒè¯•åˆ©å™¨>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>#ç»™æŸä¸€ä¸ªendpointå‘é€TCPè¯·æ±‚,å°±å°†dataçš„å†…å®¹å‘é€åˆ°å¯¹ç«¯</span>
</span></span><span class=line><span class=cl>nc 192.168.0.11 <span class=m>8000</span> &lt; data.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#ncå¯ä»¥å½“åšæœåŠ¡å™¨ï¼Œç›‘å¬æŸä¸ªç«¯å£å·,æŠŠæŸä¸€æ¬¡è¯·æ±‚çš„å†…å®¹å­˜å‚¨åˆ°received_dataé‡Œ</span>
</span></span><span class=line><span class=cl>nc -l <span class=m>8000</span> &gt; received_data
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#ä¸Šè¾¹åªç›‘å¬ä¸€æ¬¡ï¼Œå¦‚æœå¤šæ¬¡å¯ä»¥åŠ ä¸Š-kå‚æ•°</span>
</span></span><span class=line><span class=cl>nc -lk <span class=m>8000</span>
</span></span></code></pre></div><h2 id=tcpdump>tcpdump<a hidden class=anchor aria-hidden=true href=#tcpdump>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># dumpå‡ºæœ¬æœº12301ç«¯å£çš„tcpåŒ…</span>
</span></span><span class=line><span class=cl>tcpdump -i em1 tcp port <span class=m>12301</span> -s <span class=m>1500</span> -w abc.pcap
</span></span></code></pre></div><h2 id=è·Ÿè¸ªç½‘ç»œè·¯ç”±è·¯å¾„>è·Ÿè¸ªç½‘ç»œè·¯ç”±è·¯å¾„<a hidden class=anchor aria-hidden=true href=#è·Ÿè¸ªç½‘ç»œè·¯ç”±è·¯å¾„>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># tracerouteé»˜è®¤ä½¿ç”¨udpæ–¹å¼, å¦‚æœæ˜¯-Iåˆ™æ”¹æˆicmpæ–¹å¼</span>
</span></span><span class=line><span class=cl>traceroute -I www.163.com
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä»ttlç¬¬3è·³è·Ÿè¸ª</span>
</span></span><span class=line><span class=cl>traceroute -M <span class=m>3</span> www.163.com
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åŠ ä¸Šç«¯å£è·Ÿè¸ª</span>
</span></span><span class=line><span class=cl>traceroute -p <span class=m>8080</span> 192.168.10.11
</span></span></code></pre></div><h2 id=ss>ss<a hidden class=anchor aria-hidden=true href=#ss>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># æ˜¾ç¤ºæœ¬åœ°æ‰“å¼€çš„æ‰€æœ‰ç«¯å£</span>
</span></span><span class=line><span class=cl>ss -l
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ˜¾ç¤ºæ¯ä¸ªè¿›ç¨‹å…·ä½“æ‰“å¼€çš„socket</span>
</span></span><span class=line><span class=cl>ss -pl
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ˜¾ç¤ºæ‰€æœ‰tcp socket</span>
</span></span><span class=line><span class=cl>ss -t -a
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ˜¾ç¤ºæ‰€æœ‰çš„UDP Socekt</span>
</span></span><span class=line><span class=cl>ss -u -a
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ˜¾ç¤ºæ‰€æœ‰å·²å»ºç«‹çš„SMTPè¿æ¥</span>
</span></span><span class=line><span class=cl>ss -o state established <span class=s1>&#39;( dport = :smtp or sport = :smtp )&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ˜¾ç¤ºæ‰€æœ‰å·²å»ºç«‹çš„HTTPè¿æ¥</span>
</span></span><span class=line><span class=cl>ss -o state established <span class=s1>&#39;( dport = :http or sport = :http )&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>æ‰¾å‡ºæ‰€æœ‰è¿æ¥XæœåŠ¡å™¨çš„è¿›ç¨‹
</span></span><span class=line><span class=cl>ss -x src /tmp/.X11-unix/*
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>åˆ—å‡ºå½“å‰socketç»Ÿè®¡ä¿¡æ¯
</span></span><span class=line><span class=cl>ss -s
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>è§£é‡Šï¼šnetstatæ˜¯éå†/procä¸‹é¢æ¯ä¸ªPIDç›®å½•ï¼Œssç›´æ¥è¯»/proc/netä¸‹é¢çš„ç»Ÿè®¡ä¿¡æ¯ã€‚æ‰€ä»¥ssæ‰§è¡Œçš„æ—¶å€™æ¶ˆè€—èµ„æºä»¥åŠæ¶ˆè€—çš„æ—¶é—´éƒ½æ¯”netstatå°‘å¾ˆå¤š
</span></span></code></pre></div><h2 id=netstat>netstat<a hidden class=anchor aria-hidden=true href=#netstat>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># è¾“å‡ºæ¯ä¸ªipçš„è¿æ¥æ•°ï¼Œä»¥åŠæ€»çš„å„ä¸ªçŠ¶æ€çš„è¿æ¥æ•°</span>
</span></span><span class=line><span class=cl>netstat -n <span class=p>|</span> awk <span class=s1>&#39;/^tcp/ {n=split($(NF-1),array,&#34;:&#34;);if(n&lt;=2)++S[array[(1)]];else++S[array[(4)]];++s[$NF];++N} END {for(a in S){printf(&#34;%-20s %s\n&#34;, a, S[a]);++I}printf(&#34;%-20s %s\n&#34;,&#34;TOTAL_IP&#34;,I);for(a in s) printf(&#34;%-20s %s\n&#34;,a, s[a]);printf(&#34;%-20s %s\n&#34;,&#34;TOTAL_LINK&#34;,N);}&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç»Ÿè®¡æ‰€æœ‰è¿æ¥çŠ¶æ€,</span>
</span></span><span class=line><span class=cl><span class=c1># CLOSEDï¼šæ— è¿æ¥æ˜¯æ´»åŠ¨çš„æˆ–æ­£åœ¨è¿›è¡Œ</span>
</span></span><span class=line><span class=cl><span class=c1># LISTENï¼šæœåŠ¡å™¨åœ¨ç­‰å¾…è¿›å…¥å‘¼å«</span>
</span></span><span class=line><span class=cl><span class=c1># SYN_RECVï¼šä¸€ä¸ªè¿æ¥è¯·æ±‚å·²ç»åˆ°è¾¾ï¼Œç­‰å¾…ç¡®è®¤</span>
</span></span><span class=line><span class=cl><span class=c1># SYN_SENTï¼šåº”ç”¨å·²ç»å¼€å§‹ï¼Œæ‰“å¼€ä¸€ä¸ªè¿æ¥</span>
</span></span><span class=line><span class=cl><span class=c1># ESTABLISHEDï¼šæ­£å¸¸æ•°æ®ä¼ è¾“çŠ¶æ€</span>
</span></span><span class=line><span class=cl><span class=c1># FIN_WAIT1ï¼šåº”ç”¨è¯´å®ƒå·²ç»å®Œæˆ</span>
</span></span><span class=line><span class=cl><span class=c1># FIN_WAIT2ï¼šå¦ä¸€è¾¹å·²åŒæ„é‡Šæ”¾</span>
</span></span><span class=line><span class=cl><span class=c1># ITMED_WAITï¼šç­‰å¾…æ‰€æœ‰åˆ†ç»„æ­»æ‰</span>
</span></span><span class=line><span class=cl><span class=c1># CLOSINGï¼šä¸¤è¾¹åŒæ—¶å°è¯•å…³é—­</span>
</span></span><span class=line><span class=cl><span class=c1># TIME_WAITï¼šä¸»åŠ¨å…³é—­è¿æ¥ä¸€ç«¯è¿˜æ²¡æœ‰ç­‰åˆ°å¦ä¸€ç«¯åé¦ˆæœŸé—´çš„çŠ¶æ€</span>
</span></span><span class=line><span class=cl><span class=c1># LAST_ACKï¼šç­‰å¾…æ‰€æœ‰åˆ†ç»„æ­»æ‰</span>
</span></span><span class=line><span class=cl>netstat -n <span class=p>|</span> awk <span class=s1>&#39;/^tcp/ {++state[$NF]} END {for(key in state) print key,&#34;\t&#34;,state[key]}&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æŸ¥æ‰¾è¾ƒå¤štime_waitè¿æ¥</span>
</span></span><span class=line><span class=cl>netstat -n<span class=p>|</span>grep TIME_WAIT<span class=p>|</span>awk <span class=s1>&#39;{print $5}&#39;</span><span class=p>|</span>sort<span class=p>|</span>uniq -c<span class=p>|</span>sort -rn<span class=p>|</span>head -n20
</span></span></code></pre></div><h2 id=top>top<a hidden class=anchor aria-hidden=true href=#top>#</a></h2><h2 id=dmesgæŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—>dmesg,æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—<a hidden class=anchor aria-hidden=true href=#dmesgæŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—>#</a></h2><h2 id=iostatç£ç›˜ioæƒ…å†µç›‘æ§>iostat,ç£ç›˜IOæƒ…å†µç›‘æ§<a hidden class=anchor aria-hidden=true href=#iostatç£ç›˜ioæƒ…å†µç›‘æ§>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>iostat -xz <span class=m>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># r/s, w/s, rkB/s, wkB/sï¼šåˆ†åˆ«è¡¨ç¤ºæ¯ç§’è¯»å†™æ¬¡æ•°å’Œæ¯ç§’è¯»å†™æ•°æ®é‡ï¼ˆåƒå­—èŠ‚ï¼‰ã€‚è¯»å†™é‡è¿‡å¤§ï¼Œå¯èƒ½ä¼šå¼•èµ·æ€§èƒ½é—®é¢˜ã€‚</span>
</span></span><span class=line><span class=cl><span class=c1># awaitï¼šIOæ“ä½œçš„å¹³å‡ç­‰å¾…æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’ã€‚è¿™æ˜¯åº”ç”¨ç¨‹åºåœ¨å’Œç£ç›˜äº¤äº’æ—¶ï¼Œéœ€è¦æ¶ˆè€—çš„æ—¶é—´ï¼ŒåŒ…æ‹¬IOç­‰å¾…å’Œå®é™…æ“ä½œçš„è€—æ—¶ã€‚å¦‚æœè¿™ä¸ªæ•°å€¼è¿‡å¤§ï¼Œå¯èƒ½æ˜¯ç¡¬ä»¶è®¾å¤‡é‡åˆ°äº†ç“¶é¢ˆæˆ–è€…å‡ºç°æ•…éšœã€‚</span>
</span></span><span class=line><span class=cl><span class=c1># avgqu-szï¼šå‘è®¾å¤‡å‘å‡ºçš„è¯·æ±‚å¹³å‡æ•°é‡ã€‚å¦‚æœè¿™ä¸ªæ•°å€¼å¤§äº1ï¼Œå¯èƒ½æ˜¯ç¡¬ä»¶è®¾å¤‡å·²ç»é¥±å’Œï¼ˆéƒ¨åˆ†å‰ç«¯ç¡¬ä»¶è®¾å¤‡æ”¯æŒå¹¶è¡Œå†™å…¥ï¼‰ã€‚</span>
</span></span><span class=line><span class=cl><span class=c1># %utilï¼šè®¾å¤‡åˆ©ç”¨ç‡ã€‚è¿™ä¸ªæ•°å€¼è¡¨ç¤ºè®¾å¤‡çš„ç¹å¿™ç¨‹åº¦ï¼Œç»éªŒå€¼æ˜¯å¦‚æœè¶…è¿‡60ï¼Œå¯èƒ½ä¼šå½±å“IOæ€§èƒ½ï¼ˆå¯ä»¥å‚ç…§IOæ“ä½œå¹³å‡ç­‰å¾…æ—¶é—´ï¼‰ã€‚å¦‚æœåˆ°è¾¾100%ï¼Œè¯´æ˜ç¡¬ä»¶è®¾å¤‡å·²ç»é¥±å’Œã€‚</span>
</span></span><span class=line><span class=cl><span class=c1># å¦‚æœæ˜¾ç¤ºçš„æ˜¯é€»è¾‘è®¾å¤‡çš„æ•°æ®ï¼Œé‚£ä¹ˆè®¾å¤‡åˆ©ç”¨ç‡ä¸ä»£è¡¨åç«¯å®é™…çš„ç¡¬ä»¶è®¾å¤‡å·²ç»é¥±å’Œã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå³ä½¿IOæ€§èƒ½ä¸ç†æƒ³ï¼Œä¹Ÿä¸ä¸€å®šæ„å‘³è¿™åº”ç”¨ç¨‹åºæ€§èƒ½ä¼šä¸å¥½ï¼Œå¯ä»¥åˆ©ç”¨è¯¸å¦‚é¢„è¯»å–ã€å†™ç¼“å­˜ç­‰ç­–ç•¥æå‡åº”ç”¨æ€§èƒ½ã€‚</span>
</span></span></code></pre></div><h2 id=freeå†…å­˜ä½¿ç”¨æƒ…å†µ>free,å†…å­˜ä½¿ç”¨æƒ…å†µ<a hidden class=anchor aria-hidden=true href=#freeå†…å­˜ä½¿ç”¨æƒ…å†µ>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>free -m
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>eg:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>     total       used       free     shared    buffers     cached
</span></span><span class=line><span class=cl>Mem:          <span class=m>1002</span>        <span class=m>769</span>        <span class=m>232</span>          <span class=m>0</span>         <span class=m>62</span>        <span class=m>421</span>
</span></span><span class=line><span class=cl>-/+ buffers/cache:          <span class=m>286</span>        <span class=m>715</span>
</span></span><span class=line><span class=cl>Swap:          <span class=m>1153</span>          <span class=m>0</span>       <span class=m>1153</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ç¬¬ä¸€éƒ¨åˆ†Memè¡Œ:
</span></span><span class=line><span class=cl>total å†…å­˜æ€»æ•°: 1002M
</span></span><span class=line><span class=cl>used å·²ç»ä½¿ç”¨çš„å†…å­˜æ•°: 769M
</span></span><span class=line><span class=cl>free ç©ºé—²çš„å†…å­˜æ•°: 232M
</span></span><span class=line><span class=cl>shared å½“å‰å·²ç»åºŸå¼ƒä¸ç”¨,æ€»æ˜¯0
</span></span><span class=line><span class=cl>buffers Buffer ç¼“å­˜å†…å­˜æ•°: 62M
</span></span><span class=line><span class=cl>cached Page ç¼“å­˜å†…å­˜æ•°:421M
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>å…³ç³»ï¼štotal<span class=o>(</span>1002M<span class=o>)</span> <span class=o>=</span> used<span class=o>(</span>769M<span class=o>)</span> + free<span class=o>(</span>232M<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ç¬¬äºŒéƒ¨åˆ†<span class=o>(</span>-/+ buffers/cache<span class=o>)</span>:
</span></span><span class=line><span class=cl><span class=o>(</span>-buffers/cache<span class=o>)</span> usedå†…å­˜æ•°ï¼š286M <span class=o>(</span>æŒ‡çš„ç¬¬ä¸€éƒ¨åˆ†Memè¡Œä¸­çš„used â€“ buffers â€“ cached<span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>(</span>+buffers/cache<span class=o>)</span> freeå†…å­˜æ•°: 715M <span class=o>(</span>æŒ‡çš„ç¬¬ä¸€éƒ¨åˆ†Memè¡Œä¸­çš„free + buffers + cached<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>å¯è§-buffers/cacheåæ˜ çš„æ˜¯è¢«ç¨‹åºå®å®åœ¨åœ¨åƒæ‰çš„å†…å­˜,è€Œ+buffers/cacheåæ˜ çš„æ˜¯å¯ä»¥æŒªç”¨çš„å†…å­˜æ€»æ•°.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ç¬¬ä¸‰éƒ¨åˆ†æ˜¯æŒ‡äº¤æ¢åˆ†åŒº
</span></span></code></pre></div><h2 id=saræŸ¥çœ‹ç½‘ç»œååçŠ¶æ€>sar,æŸ¥çœ‹ç½‘ç»œååçŠ¶æ€<a hidden class=anchor aria-hidden=true href=#saræŸ¥çœ‹ç½‘ç»œååçŠ¶æ€>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># sarå‘½ä»¤åœ¨è¿™é‡Œå¯ä»¥æŸ¥çœ‹ç½‘ç»œè®¾å¤‡çš„ååç‡ã€‚åœ¨æ’æŸ¥æ€§èƒ½é—®é¢˜æ—¶ï¼Œå¯ä»¥é€šè¿‡ç½‘ç»œè®¾å¤‡çš„ååé‡ï¼Œåˆ¤æ–­ç½‘ç»œè®¾å¤‡æ˜¯å¦å·²ç»é¥±å’Œ</span>
</span></span><span class=line><span class=cl>sar -n DEV <span class=m>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># sarå‘½ä»¤åœ¨è¿™é‡Œç”¨äºæŸ¥çœ‹TCPè¿æ¥çŠ¶æ€ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š</span>
</span></span><span class=line><span class=cl><span class=c1># active/sï¼šæ¯ç§’æœ¬åœ°å‘èµ·çš„TCPè¿æ¥æ•°ï¼Œæ—¢é€šè¿‡connectè°ƒç”¨åˆ›å»ºçš„TCPè¿æ¥ï¼›</span>
</span></span><span class=line><span class=cl><span class=c1># passive/sï¼šæ¯ç§’è¿œç¨‹å‘èµ·çš„TCPè¿æ¥æ•°ï¼Œå³é€šè¿‡acceptè°ƒç”¨åˆ›å»ºçš„TCPè¿æ¥ï¼›</span>
</span></span><span class=line><span class=cl><span class=c1># retrans/sï¼šæ¯ç§’TCPé‡ä¼ æ•°é‡ï¼›</span>
</span></span><span class=line><span class=cl><span class=c1># TCPè¿æ¥æ•°å¯ä»¥ç”¨æ¥åˆ¤æ–­æ€§èƒ½é—®é¢˜æ˜¯å¦ç”±äºå»ºç«‹äº†è¿‡å¤šçš„è¿æ¥ï¼Œè¿›ä¸€æ­¥å¯ä»¥åˆ¤æ–­æ˜¯ä¸»åŠ¨å‘èµ·çš„è¿æ¥ï¼Œè¿˜æ˜¯è¢«åŠ¨æ¥å—çš„è¿æ¥ã€‚TCPé‡ä¼ å¯èƒ½æ˜¯å› ä¸ºç½‘ç»œç¯å¢ƒæ¶åŠ£ï¼Œæˆ–è€…æœåŠ¡å™¨å‹åŠ›è¿‡å¤§å¯¼è‡´ä¸¢åŒ…</span>
</span></span><span class=line><span class=cl>sar -n TCP,ETCP <span class=m>1</span>
</span></span></code></pre></div><h2 id=vmstat-ç»™å®šæ—¶é—´ç›‘æ§cpuä½¿ç”¨ç‡-å†…å­˜ä½¿ç”¨-è™šæ‹Ÿå†…å­˜äº¤äº’-ioè¯»å†™>vmstat, ç»™å®šæ—¶é—´ç›‘æ§CPUä½¿ç”¨ç‡, å†…å­˜ä½¿ç”¨, è™šæ‹Ÿå†…å­˜äº¤äº’, IOè¯»å†™<a hidden class=anchor aria-hidden=true href=#vmstat-ç»™å®šæ—¶é—´ç›‘æ§cpuä½¿ç”¨ç‡-å†…å­˜ä½¿ç”¨-è™šæ‹Ÿå†…å­˜äº¤äº’-ioè¯»å†™>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 2è¡¨ç¤ºæ¯2ç§’é‡‡é›†ä¸€æ¬¡çŠ¶æ€ä¿¡æ¯, 1è¡¨ç¤ºåªé‡‡é›†ä¸€æ¬¡(å¿½ç•¥æ—¢æ˜¯ä¸€ç›´é‡‡é›†)</span>
</span></span><span class=line><span class=cl>vmstat <span class=m>2</span> <span class=m>1</span>
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://lesanouo.github.io/blog/tags/linux/>Linux</a></li></ul><nav class=paginav><a class=prev href=https://lesanouo.github.io/blog/posts/knowledge/rabbitmq%E7%AC%94%E8%AE%B0/><span class=title>Â«</span><br><span>RabbitMQç¬”è®°</span>
</a><a class=next href=https://lesanouo.github.io/blog/posts/snippet/maven-aliyun-nexus/><span class=title>Â»</span><br><span>Maven é˜¿é‡Œäº‘é•œåƒ</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://lesanouo.github.io/blog/>Lesan's Blog</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>