<!doctype html><html lang=zh-cn dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Java中Stream学习 | Lesan's Blog</title><meta name=keywords content="Java"><meta name=description content="本篇笔记主要记录我在学习Java的stream流中记录的笔记
stream是什么
流是从支持数据处理操作的源生成的元素序列，源可以是数组、文件、集合、函数。流不是集合元素，它不是数据结构并不保存数据，它的主要目的在于计算"><meta name=author content="Lesan"><link rel=canonical href=https://lesanouo.github.io/blog/posts/code/165012480002/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://lesanouo.github.io/blog/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://lesanouo.github.io/blog/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://lesanouo.github.io/blog/favicon.ico><link rel=apple-touch-icon href=https://lesanouo.github.io/blog/favicon.ico><link rel=mask-icon href=https://lesanouo.github.io/blog/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh-cn href=https://lesanouo.github.io/blog/posts/code/165012480002/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:url" content="https://lesanouo.github.io/blog/posts/code/165012480002/"><meta property="og:site_name" content="Lesan's Blog"><meta property="og:title" content="Java中Stream学习"><meta property="og:description" content="本篇笔记主要记录我在学习Java的stream流中记录的笔记
stream是什么 流是从支持数据处理操作的源生成的元素序列，源可以是数组、文件、集合、函数。流不是集合元素，它不是数据结构并不保存数据，它的主要目的在于计算"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-04-17T00:00:00+00:00"><meta property="article:modified_time" content="2022-04-17T00:00:00+00:00"><meta property="article:tag" content="Java"><meta name=twitter:card content="summary"><meta name=twitter:title content="Java中Stream学习"><meta name=twitter:description content="本篇笔记主要记录我在学习Java的stream流中记录的笔记
stream是什么
流是从支持数据处理操作的源生成的元素序列，源可以是数组、文件、集合、函数。流不是集合元素，它不是数据结构并不保存数据，它的主要目的在于计算"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"📚 博客","item":"https://lesanouo.github.io/blog/posts/"},{"@type":"ListItem","position":2,"name":"Java中Stream学习","item":"https://lesanouo.github.io/blog/posts/code/165012480002/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Java中Stream学习","name":"Java中Stream学习","description":"本篇笔记主要记录我在学习Java的stream流中记录的笔记\nstream是什么 流是从支持数据处理操作的源生成的元素序列，源可以是数组、文件、集合、函数。流不是集合元素，它不是数据结构并不保存数据，它的主要目的在于计算\n","keywords":["Java"],"articleBody":"本篇笔记主要记录我在学习Java的stream流中记录的笔记\nstream是什么 流是从支持数据处理操作的源生成的元素序列，源可以是数组、文件、集合、函数。流不是集合元素，它不是数据结构并不保存数据，它的主要目的在于计算\n生成stream的方法 生成流的方式主要有五种\n通过集合生成，应用中最常用的一种 List\u003cInteger\u003e integerList = Arrays.asList(1, 2, 3, 4, 5, 6); Stream\u003cInteger\u003e stream = integerList.stream(); 通过数组生成 int[] intArr = {1, 2, 3, 4, 5, 6}; IntStream stream = Arrays.stream(intArr); 通过Arrays.stream方法生成流，并且该方法生成的流是数值流【即IntStream】而不是 Stream。补充一点使用数值流可以避免计算过程中拆箱装箱，提高性能。Stream API提供了mapToInt、mapToDouble、mapToLong三种方式将对象流【即Stream 】转换成对应的数值流，同时提供了boxed方法将数值流转换为对象流\n通过值生成 // 通过Stream的of方法生成流，通过Stream的empty方法可以生成一个空流 Stream\u003cInteger\u003e stream = Stream.of(1, 2, 3, 4, 5, 6); 通过文件生成 // 通过Files.line方法得到一个流，并且得到的每个流是给定文件中的一行 Stream\u003cString\u003e lines = Files.lines(Paths.get(\"data.txt\"), Charset.defaultCharset()); 通过函数生成 // 1.iterator // terate方法接受两个参数，第一个为初始化值，第二个为进行的函数操作，因为iterator生成的流为无限流，通过limit方法对流进行了截断，只生成5个偶数 Stream\u003cInteger\u003e stream = Stream.iterate(0, n -\u003e n + 2).limit(5); // 2.generator // generate方法接受一个参数，方法参数类型为Supplier ，由它为流提供值。generate生成的流也是无限流，因此通过limit对流进行了截断 Stream\u003cDouble\u003e stream = Stream.generate(Math::random).limit(5); stream的操作类型 中间操作 一个流可以后面跟随零个或多个中间操作。其目的主要是打开流，做出某种程度的数据映射/过滤，然后返回一个新的流，交给下一个操作使用。这类操作都是惰性化的，仅仅调用到这类方法，并没有真正开始流的遍历，真正的遍历需等到终端操作时，常见的中间操作有下面即将介绍的 filter、map 等。\n终端操作 一个流有且只能有一个终端操作，当这个操作执行后，流就被关闭了，无法再被操作，因此一个流只能被遍历一次，若想在遍历需要通过源数据在生成流。终端操作的执行，才会真正开始流的遍历。如下面即将介绍的 count、collect 等。\nstream的使用 中间操作 filter 筛选 // 通过使用filter方法进行条件筛选，filter的方法参数为一个条件（过滤保留函数返回值为 true 的元素） List\u003cInteger\u003e integerList = Arrays.asList(1, 2, 3, 4, 5, 6); Stream\u003cInteger\u003e stream = integerList.stream().filter(i -\u003e i \u003e 3); // 结果为：4,5,6 distinct 去重 // 通过distinct方法快速去除重复的元素 List\u003cInteger\u003e integerList = Arrays.asList(1, 1, 2, 3, 4, 5); Stream\u003cInteger\u003e stream = integerList.stream().distinct(); // 结果为：1,2,3,4,5 limit 返回指定流个数 // 通过limit方法指定返回流的个数，limit的参数值必须 \u003e=0，否则将会抛出异常。 List\u003cInteger\u003e integerList = Arrays.asList(1, 1, 2, 3, 4, 5); Stream\u003cInteger\u003e stream = integerList.stream().limit(3); 结果为： 1,1,2 skip 跳过流中的元素 // 通过skip方法跳过流中的元素，skip的参数值必须\u003e=0，否则将会抛出异常 List\u003cInteger\u003e integerList = Arrays.asList(1, 1, 2, 3, 4, 5); Stream\u003cInteger\u003e stream = integerList.stream().skip(2); // 结果为： 2,3,4,5 map 流映射 // 所谓流映射就是将接受的元素映射成另外一个元素 List\u003cString\u003e stringList = Arrays.asList(\"Java 8\", \"Lambdas\", \"In\", \"Action\"); List\u003cInteger\u003e collect = stringList.stream() .map(String::length) .collect(Collectors.toList()); // 通过map方法可以完成映射，该例子完成中 String -\u003e Integer 的映射 // 结果为：[6, 7, 2, 6] flatMap 流转换 // 将一个流中的每个值都转换为另一个流 List\u003cString\u003e wordList = Arrays.asList(\"Java 8\", \"Lambdas\", \"In\", \"Action\"); List\u003cString\u003e strList = wordList.stream() .map(w -\u003e w.split(\" \")) .flatMap(Arrays::stream) .distinct() .collect(Collectors.toList()); // map(w -\u003e w.split(\" \")) 的返回值为 Stream，想获取 Stream，可以通过flatMap方法完成 Stream -\u003eStream 的转换 // 结果为：[Java, 8, Lambdas, In, Action] allMatch 匹配所有元素 // 匹配流中所有元素是否满足条件 List\u003cInteger\u003e integerList = Arrays.asList(1, 2, 3, 4, 5); if (integerList.stream().allMatch(i -\u003e i \u003e 3)) { System.out.println(\"所有元素值都大于3\"); } else { System.out.println(\"并非所有元素值都大于3\"); } // 结果为：并非所有元素值都大于3 anyMatch匹配其中一个 // 匹配流中是否存在一个满足条件的元素 List\u003cInteger\u003e integerList = Arrays.asList(1, 2, 3, 4, 5); if (integerList.stream().anyMatch(i -\u003e i \u003e 3)) { System.out.println(\"存在值大于3的元素\"); } else { System.out.println(\"不存在值大于3的元素\"); } // 结果为：存在值大于3的元素 // 上述代码等同于： for (Integer i : integerList) { if (i \u003e 3) { System.out.println(\"存在大于3的值\"); break; } } noneMatch全部不匹配 List\u003cInteger\u003e integerList = Arrays.asList(1, 2, 3, 4, 5); if (integerList.stream().noneMatch(i -\u003e i \u003e 3)) { System.out.println(\"值都小于3的元素\"); } else { System.out.println(\"值不都小于3的元素\"); } 终端操作 count 统计流中元素个数 List\u003cInteger\u003e integerList = Arrays.asList(1, 2, 3, 4, 5); Long result = integerList.stream().count(); // 结果为：5 findFirst 查找第一个 List\u003cInteger\u003e integerList = Arrays.asList(1, 2, 3, 4, 5); Optional\u003cInteger\u003e result = integerList.stream().filter(i -\u003e i \u003e 3).findFirst(); System.out.println(result.orElse(-1)); // 结果为：4 findAny 随机查找一个 List\u003cInteger\u003e integerList = Arrays.asList(1, 2, 3, 4, 5); Optional\u003cInteger\u003e result = integerList.stream().filter(i -\u003e i \u003e 3).findAny(); System.out.println(result.orElse(-1)); // 结果为：4 // 通过findAny方法查找到其中一个大于三的元素并打印，因为内部进行优化的原因，当找到第一个满足大于三的元素时就结束，该方法结果和findFirst方法结果一样。提供findAny方法是为了更好的利用并行流，findFirst方法在并行上限制更多【本篇文章将不介绍并行流】 reduce 将流中的元素组合 用于求和 List\u003cInteger\u003e integerList = Arrays.asList(1, 2, 3, 4, 5); int sum = integerList.stream() .reduce(0, Integer::sum); // 结果为：15 // reduce接受两个参数，一个初始值这里是0，一个 BinaryOperatoraccumulator 来将两个元素结合起来产生一个新值，另外reduce方法还有一个没有初始化值的重载方法 用于取得最大和最小值 List\u003cString\u003e stringList = Arrays.asList(\"Java 8\", \"Lambdas\", \"In\", \"Action\"); Optional\u003cInteger\u003e min = stringList.stream() .map(String::length) .reduce(Integer::min); Optional\u003cInteger\u003e max = stringList.stream() .map(String::length) .reduce(Integer::max); // 结果为：Optional[2] 和 Optional[7] min/max 获取最小最大值 // 写法1 List\u003cString\u003e stringList = Arrays.asList(\"Java 8\", \"Lambdas\", \"In\", \"Action\"); Optional\u003cInteger\u003e min = stringList.stream() .map(String::length) .min(Integer::compareTo); Optional\u003cInteger\u003e max = stringList.stream() .map(String::length) .max(Integer::compareTo); // 写法2 List\u003cString\u003e stringList = Arrays.asList(\"Java 8\", \"Lambdas\", \"In\", \"Action\"); OptionalInt min = stringList.stream() .mapToInt(String::length) .min(); OptionalInt max = stringList.stream() .mapToInt(String::length) .max(); // 使用reduce List\u003cString\u003e stringList = Arrays.asList(\"Java 8\", \"Lambdas\", \"In\", \"Action\"); Optional\u003cInteger\u003e min = stringList.stream() .map(String::length) .reduce(Integer::min); Optional\u003cInteger\u003e max = stringList.stream() .map(String::length) .reduce(Integer::max); sum / summingxxx / reduce 求和 // 方式1：sum List\u003cString\u003e stringList = Arrays.asList(\"Java 8\", \"Lambdas\", \"In\", \"Action\"); int sum = stringList.stream() .mapToInt(String::length) .sum(); // 方式2：summingInt List\u003cString\u003e stringList = Arrays.asList(\"Java 8\", \"Lambdas\", \"In\", \"Action\"); // 如果数据类型为double、long，则通过summingDouble、summingLong方法进行求和 int sum = stringList.stream() .collect(summingInt(String::length)); // 方式3：reduce List\u003cString\u003e stringList = Arrays.asList(\"Java 8\", \"Lambdas\", \"In\", \"Action\"); int sum = stringList.stream() .map(String::length) .reduce(0, Integer::sum); 在上面求和、求最大值、最小值的时候，对于相同操作有不同的方法可以选择执行。可以选择collect、reduce、min/max/sum方法，推荐使用min、max、sum方法。因为它最简洁易读，同时通过mapToInt将对象流转换为数值流，避免了装箱和拆箱操作\naveragingxxx 求平均值 // averagingxxx List\u003cString\u003e stringList = Arrays.asList(\"Java 8\", \"Lambdas\", \"In\", \"Action\"); double average = stringList.stream() .collect(averagingInt(String::length)); summarizingxxx 同时求总和、平均值、最大值、最小值 // 如果数据类型为double、long，则通过summarizingDouble、summarizingLong方法 List\u003cString\u003e stringList = Arrays.asList(\"Java 8\", \"Lambdas\", \"In\", \"Action\"); IntSummaryStatistics intSummaryStatistics = stringList.stream() .collect(summarizingInt(String::length)); double average = intSummaryStatistics.getAverage(); // 获取平均值 int min = intSummaryStatistics.getMin(); // 获取最小值 int max = intSummaryStatistics.getMax(); // 获取最大值 long sum = intSummaryStatistics.getSum(); // 获取总和 foreach 遍历 List\u003cString\u003e stringList = Arrays.asList(\"Java 8\", \"Lambdas\", \"In\", \"Action\"); stringList.stream().forEach(System.out::println); collect 返回集合 List\u003cString\u003e stringList = Arrays.asList(\"Java 8\", \"Lambdas\", \"In\", \"Action\"); List\u003cInteger\u003e intList = stringList.stream() .map(String::length) .collect(toList()); Set\u003cInteger\u003e intSet = stringList.stream() .map(String::length) .collect(toSet()); // 等价 List\u003cInteger\u003e intList = new ArrayList\u003c\u003e(); Set\u003cInteger\u003e intSet = new HashSet\u003c\u003e(); for (String item : stringList) { intList.add(item.length()); intSet.add(item.length()); } 通过遍历和返回集合的使用发现流只是把原来的外部迭代放到了内部进行，这也是流的主要特点之一。内部迭代可以减少好多代码量\njoining 拼接流中的元素 List\u003cString\u003e stringList = Arrays.asList(\"Java 8\", \"Lambdas\", \"In\", \"Action\"); String result = stringList.stream() .map(String::toLowerCase) .collect(Collectors.joining(\"-\")); // 结果为：java 8-lambdas-in-action groupingBy 分组 // 在collect方法中传入groupingBy进行分组，其中groupingBy的方法参数为分类函数 List\u003cString\u003e stringList = Arrays.asList(\"Java 8\", \"Lambdas\", \"In\", \"Action\"); Map\u003cInteger, List\u003cString\u003e\u003e collect = stringList.stream().collect(groupingBy(String::length)); // 结果为：{2=[In], 6=[Java 8, Action], 7=[Lambdas]} 嵌套groupingBy进行多级分类\nList\u003cString\u003e stringList = Arrays.asList(\"Java 12\", \"Lambdas\", \"In\", \"Action\"); Map\u003cInteger, Map\u003cInteger, List\u003cString\u003e\u003e\u003e collect = stringList.stream() .collect(groupingBy( String::length, groupingBy(String::hashCode) )); // 结果为：{2={2373=[In]}, 6={1955883606=[Action]}, 7={1611513196=[Lambdas], -155279169=[Java 12]}} List\u003cString\u003e stringList = Arrays.asList(\"Java 12\", \"Lambdas\", \"In\", \"Action\"); Map\u003cInteger, Map\u003cString, List\u003cString\u003e\u003e\u003e collect = stringList.stream() .collect(groupingBy( String::length, groupingBy(item -\u003e { if (item.length() \u003c= 2) { return \"level1\"; } else if (item.length() \u003c= 6) { return \"level2\"; } else { return \"level3\"; } }) )); // 结果为：{2={level1=[In]}, 6={level2=[Action]}, 7={level3=[Java 12, Lambdas]}} partitioningBy 分区 分区是特殊的分组，它分类依据是true和false，所以返回的结果最多可以分为两组\nList\u003cString\u003e stringList = Arrays.asList(\"Java 12\", \"Lambdas\", \"In\", \"Action\"); Map\u003cBoolean, List\u003cString\u003e\u003e collect = stringList.stream().collect(partitioningBy(String::isEmpty)); // 结果为：{false=[Java 12, Lambdas, In, Action], true=[]} List\u003cInteger\u003e integerList = Arrays.asList(1, 2, 3, 4, 5); Map\u003cBoolean, List\u003cInteger\u003e\u003e result = integerList.stream().collect(partitioningBy(i -\u003e i \u003c 3)); // 结果为：{false=[3, 4, 5], true=[1, 2]} 本篇文章为学习笔记，感谢以下文章的总结 https://blog.csdn.net/QiuHaoqian/article/details/120942134\n","wordCount":"3223","inLanguage":"zh-cn","datePublished":"2022-04-17T00:00:00Z","dateModified":"2022-04-17T00:00:00Z","author":{"@type":"Person","name":"Lesan"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://lesanouo.github.io/blog/posts/code/165012480002/"},"publisher":{"@type":"Organization","name":"Lesan's Blog","logo":{"@type":"ImageObject","url":"https://lesanouo.github.io/blog/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://lesanouo.github.io/blog/ accesskey=h title="Lesan's Blog (Alt + H)">Lesan's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://lesanouo.github.io/blog/archives title="📚 归档"><span>📚 归档</span></a></li><li><a href=https://lesanouo.github.io/blog/categories/ title="🗃️ 分类"><span>🗃️ 分类</span></a></li><li><a href=https://lesanouo.github.io/blog/tags/ title="🏷️ 标签"><span>🏷️ 标签</span></a></li><li><a href=https://lesanouo.github.io/blog/search/ title="🔎 搜索"><span>🔎 搜索</span></a></li><li><a href=https://lesanouo.github.io/blog/about/ title="👨‍💻 关于我"><span>👨‍💻 关于我</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://lesanouo.github.io/blog/>Home</a>&nbsp;»&nbsp;<a href=https://lesanouo.github.io/blog/posts/>📚 博客</a></div><h1 class="post-title entry-hint-parent">Java中Stream学习</h1><div class=post-meta><span title='2022-04-17 00:00:00 +0000 UTC'>2022-04-17</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;Lesan</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#stream%e6%98%af%e4%bb%80%e4%b9%88 aria-label=stream是什么>stream是什么</a></li><li><a href=#%e7%94%9f%e6%88%90stream%e7%9a%84%e6%96%b9%e6%b3%95 aria-label=生成stream的方法>生成stream的方法</a></li><li><a href=#stream%e7%9a%84%e6%93%8d%e4%bd%9c%e7%b1%bb%e5%9e%8b aria-label=stream的操作类型>stream的操作类型</a></li><li><a href=#stream%e7%9a%84%e4%bd%bf%e7%94%a8 aria-label=stream的使用>stream的使用</a><ul><li><a href=#%e4%b8%ad%e9%97%b4%e6%93%8d%e4%bd%9c aria-label=中间操作>中间操作</a><ul><li><a href=#filter-%e7%ad%9b%e9%80%89 aria-label="filter 筛选">filter 筛选</a></li><li><a href=#distinct-%e5%8e%bb%e9%87%8d aria-label="distinct 去重">distinct 去重</a></li><li><a href=#limit-%e8%bf%94%e5%9b%9e%e6%8c%87%e5%ae%9a%e6%b5%81%e4%b8%aa%e6%95%b0 aria-label="limit 返回指定流个数">limit 返回指定流个数</a></li><li><a href=#skip-%e8%b7%b3%e8%bf%87%e6%b5%81%e4%b8%ad%e7%9a%84%e5%85%83%e7%b4%a0 aria-label="skip 跳过流中的元素">skip 跳过流中的元素</a></li><li><a href=#map-%e6%b5%81%e6%98%a0%e5%b0%84 aria-label="map 流映射">map 流映射</a></li><li><a href=#flatmap-%e6%b5%81%e8%bd%ac%e6%8d%a2 aria-label="flatMap 流转换">flatMap 流转换</a></li><li><a href=#allmatch-%e5%8c%b9%e9%85%8d%e6%89%80%e6%9c%89%e5%85%83%e7%b4%a0 aria-label="allMatch 匹配所有元素">allMatch 匹配所有元素</a></li><li><a href=#anymatch%e5%8c%b9%e9%85%8d%e5%85%b6%e4%b8%ad%e4%b8%80%e4%b8%aa aria-label=anyMatch匹配其中一个>anyMatch匹配其中一个</a></li><li><a href=#nonematch%e5%85%a8%e9%83%a8%e4%b8%8d%e5%8c%b9%e9%85%8d aria-label=noneMatch全部不匹配>noneMatch全部不匹配</a></li></ul></li><li><a href=#%e7%bb%88%e7%ab%af%e6%93%8d%e4%bd%9c aria-label=终端操作>终端操作</a><ul><li><a href=#count-%e7%bb%9f%e8%ae%a1%e6%b5%81%e4%b8%ad%e5%85%83%e7%b4%a0%e4%b8%aa%e6%95%b0 aria-label="count 统计流中元素个数">count 统计流中元素个数</a></li><li><a href=#findfirst-%e6%9f%a5%e6%89%be%e7%ac%ac%e4%b8%80%e4%b8%aa aria-label="findFirst 查找第一个">findFirst 查找第一个</a></li><li><a href=#findany-%e9%9a%8f%e6%9c%ba%e6%9f%a5%e6%89%be%e4%b8%80%e4%b8%aa aria-label="findAny 随机查找一个">findAny 随机查找一个</a></li><li><a href=#reduce-%e5%b0%86%e6%b5%81%e4%b8%ad%e7%9a%84%e5%85%83%e7%b4%a0%e7%bb%84%e5%90%88 aria-label="reduce 将流中的元素组合">reduce 将流中的元素组合</a></li><li><a href=#minmax-%e8%8e%b7%e5%8f%96%e6%9c%80%e5%b0%8f%e6%9c%80%e5%a4%a7%e5%80%bc aria-label="min/max 获取最小最大值">min/max 获取最小最大值</a></li><li><a href=#sum--summingxxx--reduce-%e6%b1%82%e5%92%8c aria-label="sum / summingxxx / reduce 求和">sum / summingxxx / reduce 求和</a></li><li><a href=#averagingxxx-%e6%b1%82%e5%b9%b3%e5%9d%87%e5%80%bc aria-label="averagingxxx 求平均值">averagingxxx 求平均值</a></li><li><a href=#summarizingxxx-%e5%90%8c%e6%97%b6%e6%b1%82%e6%80%bb%e5%92%8c%e5%b9%b3%e5%9d%87%e5%80%bc%e6%9c%80%e5%a4%a7%e5%80%bc%e6%9c%80%e5%b0%8f%e5%80%bc aria-label="summarizingxxx 同时求总和、平均值、最大值、最小值">summarizingxxx 同时求总和、平均值、最大值、最小值</a></li><li><a href=#foreach-%e9%81%8d%e5%8e%86 aria-label="foreach 遍历">foreach 遍历</a></li><li><a href=#collect-%e8%bf%94%e5%9b%9e%e9%9b%86%e5%90%88 aria-label="collect 返回集合">collect 返回集合</a></li><li><a href=#joining-%e6%8b%bc%e6%8e%a5%e6%b5%81%e4%b8%ad%e7%9a%84%e5%85%83%e7%b4%a0 aria-label="joining 拼接流中的元素">joining 拼接流中的元素</a></li><li><a href=#groupingby-%e5%88%86%e7%bb%84 aria-label="groupingBy 分组">groupingBy 分组</a></li><li><a href=#partitioningby-%e5%88%86%e5%8c%ba aria-label="partitioningBy 分区">partitioningBy 分区</a></li></ul></li></ul></li></ul></div></details></div><div class=post-content><p>本篇笔记主要记录我在学习Java的stream流中记录的笔记</p><h2 id=stream是什么>stream是什么<a hidden class=anchor aria-hidden=true href=#stream是什么>#</a></h2><p>流是从支持数据处理操作的源生成的元素序列，源可以是数组、文件、集合、函数。流不是集合元素，它不是数据结构并不保存数据，它的主要目的在于计算</p><h2 id=生成stream的方法>生成stream的方法<a hidden class=anchor aria-hidden=true href=#生成stream的方法>#</a></h2><p>生成流的方式主要有五种</p><ul><li><strong>通过集合生成，应用中最常用的一种</strong></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>integerList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=n>1</span><span class=p>,</span><span class=w> </span><span class=n>2</span><span class=p>,</span><span class=w> </span><span class=n>3</span><span class=p>,</span><span class=w> </span><span class=n>4</span><span class=p>,</span><span class=w> </span><span class=n>5</span><span class=p>,</span><span class=w> </span><span class=n>6</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>stream</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>integerList</span><span class=p>.</span><span class=na>stream</span><span class=p>();</span><span class=w>
</span></span></span></code></pre></div><ul><li><strong>通过数组生成</strong></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kt>int</span><span class=o>[]</span><span class=w> </span><span class=n>intArr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=n>1</span><span class=p>,</span><span class=w> </span><span class=n>2</span><span class=p>,</span><span class=w> </span><span class=n>3</span><span class=p>,</span><span class=w> </span><span class=n>4</span><span class=p>,</span><span class=w> </span><span class=n>5</span><span class=p>,</span><span class=w> </span><span class=n>6</span><span class=p>};</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>IntStream</span><span class=w> </span><span class=n>stream</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>stream</span><span class=p>(</span><span class=n>intArr</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><p>通过Arrays.stream方法生成流，并且该方法生成的流是数值流【即IntStream】而不是 Stream。补充一点使用数值流可以避免计算过程中拆箱装箱，提高性能。Stream API提供了mapToInt、mapToDouble、mapToLong三种方式将对象流【即Stream 】转换成对应的数值流，同时提供了boxed方法将数值流转换为对象流</p><ul><li><strong>通过值生成</strong></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 通过Stream的of方法生成流，通过Stream的empty方法可以生成一个空流</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>stream</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Stream</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>1</span><span class=p>,</span><span class=w> </span><span class=n>2</span><span class=p>,</span><span class=w> </span><span class=n>3</span><span class=p>,</span><span class=w> </span><span class=n>4</span><span class=p>,</span><span class=w> </span><span class=n>5</span><span class=p>,</span><span class=w> </span><span class=n>6</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><ul><li><strong>通过文件生成</strong></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 通过Files.line方法得到一个流，并且得到的每个流是给定文件中的一行</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Stream</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>lines</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Files</span><span class=p>.</span><span class=na>lines</span><span class=p>(</span><span class=n>Paths</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&#34;data.txt&#34;</span><span class=p>),</span><span class=w> </span><span class=n>Charset</span><span class=p>.</span><span class=na>defaultCharset</span><span class=p>());</span><span class=w>
</span></span></span></code></pre></div><ul><li><strong>通过函数生成</strong></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 1.iterator</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// terate方法接受两个参数，第一个为初始化值，第二个为进行的函数操作，因为iterator生成的流为无限流，通过limit方法对流进行了截断，只生成5个偶数</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>stream</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Stream</span><span class=p>.</span><span class=na>iterate</span><span class=p>(</span><span class=n>0</span><span class=p>,</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>2</span><span class=p>).</span><span class=na>limit</span><span class=p>(</span><span class=n>5</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 2.generator</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// generate方法接受一个参数，方法参数类型为Supplier ，由它为流提供值。generate生成的流也是无限流，因此通过limit对流进行了截断</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Double</span><span class=o>&gt;</span><span class=w> </span><span class=n>stream</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Stream</span><span class=p>.</span><span class=na>generate</span><span class=p>(</span><span class=n>Math</span><span class=p>::</span><span class=n>random</span><span class=p>).</span><span class=na>limit</span><span class=p>(</span><span class=n>5</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><h2 id=stream的操作类型>stream的操作类型<a hidden class=anchor aria-hidden=true href=#stream的操作类型>#</a></h2><ol><li><strong>中间操作</strong></li></ol><p>一个流可以后面跟随零个或多个中间操作。其目的主要是打开流，做出某种程度的数据映射/过滤，然后返回一个新的流，交给下一个操作使用。这类操作都是惰性化的，仅仅调用到这类方法，并没有真正开始流的遍历，真正的遍历需等到终端操作时，常见的中间操作有下面即将介绍的 filter、map 等。</p><ol start=2><li><strong>终端操作</strong></li></ol><p>一个流有且只能有一个终端操作，当这个操作执行后，流就被关闭了，无法再被操作，因此一个流只能被遍历一次，若想在遍历需要通过源数据在生成流。终端操作的执行，才会真正开始流的遍历。如下面即将介绍的 count、collect 等。</p><h2 id=stream的使用>stream的使用<a hidden class=anchor aria-hidden=true href=#stream的使用>#</a></h2><h3 id=中间操作>中间操作<a hidden class=anchor aria-hidden=true href=#中间操作>#</a></h3><h4 id=filter-筛选>filter 筛选<a hidden class=anchor aria-hidden=true href=#filter-筛选>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 通过使用filter方法进行条件筛选，filter的方法参数为一个条件（过滤保留函数返回值为 true 的元素）</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>integerList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=n>1</span><span class=p>,</span><span class=w> </span><span class=n>2</span><span class=p>,</span><span class=w> </span><span class=n>3</span><span class=p>,</span><span class=w> </span><span class=n>4</span><span class=p>,</span><span class=w> </span><span class=n>5</span><span class=p>,</span><span class=w> </span><span class=n>6</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>stream</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>integerList</span><span class=p>.</span><span class=na>stream</span><span class=p>().</span><span class=na>filter</span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>3</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 结果为：4,5,6</span><span class=w>
</span></span></span></code></pre></div><h4 id=distinct-去重><strong>distinct 去重</strong><a hidden class=anchor aria-hidden=true href=#distinct-去重>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 通过distinct方法快速去除重复的元素</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>integerList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=n>1</span><span class=p>,</span><span class=w> </span><span class=n>1</span><span class=p>,</span><span class=w> </span><span class=n>2</span><span class=p>,</span><span class=w> </span><span class=n>3</span><span class=p>,</span><span class=w> </span><span class=n>4</span><span class=p>,</span><span class=w> </span><span class=n>5</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>stream</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>integerList</span><span class=p>.</span><span class=na>stream</span><span class=p>().</span><span class=na>distinct</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 结果为：1,2,3,4,5</span><span class=w>
</span></span></span></code></pre></div><h4 id=limit-返回指定流个数>limit 返回指定流个数<a hidden class=anchor aria-hidden=true href=#limit-返回指定流个数>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 通过limit方法指定返回流的个数，limit的参数值必须 &gt;=0，否则将会抛出异常。</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>integerList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=n>1</span><span class=p>,</span><span class=w> </span><span class=n>1</span><span class=p>,</span><span class=w> </span><span class=n>2</span><span class=p>,</span><span class=w> </span><span class=n>3</span><span class=p>,</span><span class=w> </span><span class=n>4</span><span class=p>,</span><span class=w> </span><span class=n>5</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>stream</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>integerList</span><span class=p>.</span><span class=na>stream</span><span class=p>().</span><span class=na>limit</span><span class=p>(</span><span class=n>3</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>结果为</span><span class=err>：</span><span class=w> </span><span class=n>1</span><span class=p>,</span><span class=n>1</span><span class=p>,</span><span class=n>2</span><span class=w>
</span></span></span></code></pre></div><h4 id=skip-跳过流中的元素>skip 跳过流中的元素<a hidden class=anchor aria-hidden=true href=#skip-跳过流中的元素>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 通过skip方法跳过流中的元素，skip的参数值必须&gt;=0，否则将会抛出异常</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>integerList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=n>1</span><span class=p>,</span><span class=w> </span><span class=n>1</span><span class=p>,</span><span class=w> </span><span class=n>2</span><span class=p>,</span><span class=w> </span><span class=n>3</span><span class=p>,</span><span class=w> </span><span class=n>4</span><span class=p>,</span><span class=w> </span><span class=n>5</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>stream</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>integerList</span><span class=p>.</span><span class=na>stream</span><span class=p>().</span><span class=na>skip</span><span class=p>(</span><span class=n>2</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 结果为： 2,3,4,5</span><span class=w>
</span></span></span></code></pre></div><h4 id=map-流映射>map 流映射<a hidden class=anchor aria-hidden=true href=#map-流映射>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 所谓流映射就是将接受的元素映射成另外一个元素</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>stringList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=s>&#34;Java 8&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Lambdas&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;In&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Action&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>collect</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stringList</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>map</span><span class=p>(</span><span class=n>String</span><span class=p>::</span><span class=n>length</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>collect</span><span class=p>(</span><span class=n>Collectors</span><span class=p>.</span><span class=na>toList</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 通过map方法可以完成映射，该例子完成中 String -&gt; Integer 的映射</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 结果为：[6, 7, 2, 6]</span><span class=w>
</span></span></span></code></pre></div><h4 id=flatmap-流转换>flatMap 流转换<a hidden class=anchor aria-hidden=true href=#flatmap-流转换>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 将一个流中的每个值都转换为另一个流</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>wordList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=s>&#34;Java 8&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Lambdas&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;In&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Action&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>strList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>wordList</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>map</span><span class=p>(</span><span class=n>w</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>w</span><span class=p>.</span><span class=na>split</span><span class=p>(</span><span class=s>&#34; &#34;</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>flatMap</span><span class=p>(</span><span class=n>Arrays</span><span class=p>::</span><span class=n>stream</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>distinct</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>collect</span><span class=p>(</span><span class=n>Collectors</span><span class=p>.</span><span class=na>toList</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// map(w -&gt; w.split(&#34; &#34;)) 的返回值为 Stream&lt;String[]&gt;，想获取 Stream，可以通过flatMap方法完成 Stream -&gt;Stream 的转换</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 结果为：[Java, 8, Lambdas, In, Action]</span><span class=w>
</span></span></span></code></pre></div><h4 id=allmatch-匹配所有元素>allMatch 匹配所有元素<a hidden class=anchor aria-hidden=true href=#allmatch-匹配所有元素>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 匹配流中所有元素是否满足条件</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>integerList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=n>1</span><span class=p>,</span><span class=w> </span><span class=n>2</span><span class=p>,</span><span class=w> </span><span class=n>3</span><span class=p>,</span><span class=w> </span><span class=n>4</span><span class=p>,</span><span class=w> </span><span class=n>5</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>integerList</span><span class=p>.</span><span class=na>stream</span><span class=p>().</span><span class=na>allMatch</span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>3</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;所有元素值都大于3&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;并非所有元素值都大于3&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 结果为：并非所有元素值都大于3</span><span class=w>
</span></span></span></code></pre></div><h4 id=anymatch匹配其中一个>anyMatch匹配其中一个<a hidden class=anchor aria-hidden=true href=#anymatch匹配其中一个>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 匹配流中是否存在一个满足条件的元素</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>integerList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=n>1</span><span class=p>,</span><span class=w> </span><span class=n>2</span><span class=p>,</span><span class=w> </span><span class=n>3</span><span class=p>,</span><span class=w> </span><span class=n>4</span><span class=p>,</span><span class=w> </span><span class=n>5</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>integerList</span><span class=p>.</span><span class=na>stream</span><span class=p>().</span><span class=na>anyMatch</span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>3</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;存在值大于3的元素&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;不存在值大于3的元素&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 结果为：存在值大于3的元素</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 上述代码等同于：</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>Integer</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>integerList</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>3</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;存在大于3的值&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>break</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h4 id=nonematch全部不匹配>noneMatch全部不匹配<a hidden class=anchor aria-hidden=true href=#nonematch全部不匹配>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>integerList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=n>1</span><span class=p>,</span><span class=w> </span><span class=n>2</span><span class=p>,</span><span class=w> </span><span class=n>3</span><span class=p>,</span><span class=w> </span><span class=n>4</span><span class=p>,</span><span class=w> </span><span class=n>5</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>integerList</span><span class=p>.</span><span class=na>stream</span><span class=p>().</span><span class=na>noneMatch</span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>3</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;值都小于3的元素&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;值不都小于3的元素&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h3 id=终端操作>终端操作<a hidden class=anchor aria-hidden=true href=#终端操作>#</a></h3><h4 id=count-统计流中元素个数>count 统计流中元素个数<a hidden class=anchor aria-hidden=true href=#count-统计流中元素个数>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>integerList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=n>1</span><span class=p>,</span><span class=w> </span><span class=n>2</span><span class=p>,</span><span class=w> </span><span class=n>3</span><span class=p>,</span><span class=w> </span><span class=n>4</span><span class=p>,</span><span class=w> </span><span class=n>5</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Long</span><span class=w> </span><span class=n>result</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>integerList</span><span class=p>.</span><span class=na>stream</span><span class=p>().</span><span class=na>count</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 结果为：5</span><span class=w>
</span></span></span></code></pre></div><h4 id=findfirst-查找第一个>findFirst 查找第一个<a hidden class=anchor aria-hidden=true href=#findfirst-查找第一个>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>integerList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=n>1</span><span class=p>,</span><span class=w> </span><span class=n>2</span><span class=p>,</span><span class=w> </span><span class=n>3</span><span class=p>,</span><span class=w> </span><span class=n>4</span><span class=p>,</span><span class=w> </span><span class=n>5</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>result</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>integerList</span><span class=p>.</span><span class=na>stream</span><span class=p>().</span><span class=na>filter</span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>3</span><span class=p>).</span><span class=na>findFirst</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>result</span><span class=p>.</span><span class=na>orElse</span><span class=p>(</span><span class=o>-</span><span class=n>1</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 结果为：4</span><span class=w>
</span></span></span></code></pre></div><h4 id=findany-随机查找一个>findAny 随机查找一个<a hidden class=anchor aria-hidden=true href=#findany-随机查找一个>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>integerList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=n>1</span><span class=p>,</span><span class=w> </span><span class=n>2</span><span class=p>,</span><span class=w> </span><span class=n>3</span><span class=p>,</span><span class=w> </span><span class=n>4</span><span class=p>,</span><span class=w> </span><span class=n>5</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>result</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>integerList</span><span class=p>.</span><span class=na>stream</span><span class=p>().</span><span class=na>filter</span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>3</span><span class=p>).</span><span class=na>findAny</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>result</span><span class=p>.</span><span class=na>orElse</span><span class=p>(</span><span class=o>-</span><span class=n>1</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 结果为：4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 通过findAny方法查找到其中一个大于三的元素并打印，因为内部进行优化的原因，当找到第一个满足大于三的元素时就结束，该方法结果和findFirst方法结果一样。提供findAny方法是为了更好的利用并行流，findFirst方法在并行上限制更多【本篇文章将不介绍并行流】</span><span class=w>
</span></span></span></code></pre></div><h4 id=reduce-将流中的元素组合>reduce 将流中的元素组合<a hidden class=anchor aria-hidden=true href=#reduce-将流中的元素组合>#</a></h4><ol><li>用于求和</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>integerList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=n>1</span><span class=p>,</span><span class=w> </span><span class=n>2</span><span class=p>,</span><span class=w> </span><span class=n>3</span><span class=p>,</span><span class=w> </span><span class=n>4</span><span class=p>,</span><span class=w> </span><span class=n>5</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kt>int</span><span class=w> </span><span class=n>sum</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>integerList</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>reduce</span><span class=p>(</span><span class=n>0</span><span class=p>,</span><span class=w> </span><span class=n>Integer</span><span class=p>::</span><span class=n>sum</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 结果为：15</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// reduce接受两个参数，一个初始值这里是0，一个 BinaryOperatoraccumulator 来将两个元素结合起来产生一个新值，另外reduce方法还有一个没有初始化值的重载方法</span><span class=w>
</span></span></span></code></pre></div><ol start=2><li>用于取得最大和最小值</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>stringList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=s>&#34;Java 8&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Lambdas&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;In&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Action&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>min</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stringList</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>map</span><span class=p>(</span><span class=n>String</span><span class=p>::</span><span class=n>length</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>reduce</span><span class=p>(</span><span class=n>Integer</span><span class=p>::</span><span class=n>min</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>max</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stringList</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>map</span><span class=p>(</span><span class=n>String</span><span class=p>::</span><span class=n>length</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>reduce</span><span class=p>(</span><span class=n>Integer</span><span class=p>::</span><span class=n>max</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 结果为：Optional[2] 和 Optional[7]</span><span class=w>
</span></span></span></code></pre></div><h4 id=minmax-获取最小最大值>min/max 获取最小最大值<a hidden class=anchor aria-hidden=true href=#minmax-获取最小最大值>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 写法1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>stringList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=s>&#34;Java 8&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Lambdas&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;In&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Action&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>min</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stringList</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>map</span><span class=p>(</span><span class=n>String</span><span class=p>::</span><span class=n>length</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>min</span><span class=p>(</span><span class=n>Integer</span><span class=p>::</span><span class=n>compareTo</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>max</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stringList</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>map</span><span class=p>(</span><span class=n>String</span><span class=p>::</span><span class=n>length</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>max</span><span class=p>(</span><span class=n>Integer</span><span class=p>::</span><span class=n>compareTo</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 写法2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>stringList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=s>&#34;Java 8&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Lambdas&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;In&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Action&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>OptionalInt</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>min</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stringList</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>mapToInt</span><span class=p>(</span><span class=n>String</span><span class=p>::</span><span class=n>length</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>min</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>OptionalInt</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>max</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stringList</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>mapToInt</span><span class=p>(</span><span class=n>String</span><span class=p>::</span><span class=n>length</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>max</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 使用reduce</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>stringList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=s>&#34;Java 8&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Lambdas&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;In&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Action&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>min</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stringList</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>map</span><span class=p>(</span><span class=n>String</span><span class=p>::</span><span class=n>length</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>reduce</span><span class=p>(</span><span class=n>Integer</span><span class=p>::</span><span class=n>min</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>max</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stringList</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>map</span><span class=p>(</span><span class=n>String</span><span class=p>::</span><span class=n>length</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>reduce</span><span class=p>(</span><span class=n>Integer</span><span class=p>::</span><span class=n>max</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><h4 id=sum--summingxxx--reduce-求和>sum / summingxxx / reduce 求和<a hidden class=anchor aria-hidden=true href=#sum--summingxxx--reduce-求和>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 方式1：sum</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>stringList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=s>&#34;Java 8&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Lambdas&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;In&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Action&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kt>int</span><span class=w> </span><span class=n>sum</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stringList</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>mapToInt</span><span class=p>(</span><span class=n>String</span><span class=p>::</span><span class=n>length</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>sum</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 方式2：summingInt</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>stringList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=s>&#34;Java 8&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Lambdas&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;In&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Action&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 如果数据类型为double、long，则通过summingDouble、summingLong方法进行求和</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kt>int</span><span class=w> </span><span class=n>sum</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stringList</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>collect</span><span class=p>(</span><span class=n>summingInt</span><span class=p>(</span><span class=n>String</span><span class=p>::</span><span class=n>length</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 方式3：reduce</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>stringList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=s>&#34;Java 8&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Lambdas&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;In&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Action&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kt>int</span><span class=w> </span><span class=n>sum</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stringList</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>map</span><span class=p>(</span><span class=n>String</span><span class=p>::</span><span class=n>length</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>reduce</span><span class=p>(</span><span class=n>0</span><span class=p>,</span><span class=w> </span><span class=n>Integer</span><span class=p>::</span><span class=n>sum</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><p>在上面求和、求最大值、最小值的时候，对于相同操作有不同的方法可以选择执行。可以选择collect、reduce、min/max/sum方法，推荐使用min、max、sum方法。因为它最简洁易读，同时通过mapToInt将对象流转换为数值流，避免了装箱和拆箱操作</p><h4 id=averagingxxx-求平均值>averagingxxx 求平均值<a hidden class=anchor aria-hidden=true href=#averagingxxx-求平均值>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// averagingxxx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>stringList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=s>&#34;Java 8&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Lambdas&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;In&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Action&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kt>double</span><span class=w> </span><span class=n>average</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stringList</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>collect</span><span class=p>(</span><span class=n>averagingInt</span><span class=p>(</span><span class=n>String</span><span class=p>::</span><span class=n>length</span><span class=p>));</span><span class=w>
</span></span></span></code></pre></div><h4 id=summarizingxxx-同时求总和平均值最大值最小值>summarizingxxx 同时求总和、平均值、最大值、最小值<a hidden class=anchor aria-hidden=true href=#summarizingxxx-同时求总和平均值最大值最小值>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 如果数据类型为double、long，则通过summarizingDouble、summarizingLong方法</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>stringList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=s>&#34;Java 8&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Lambdas&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;In&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Action&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>IntSummaryStatistics</span><span class=w> </span><span class=n>intSummaryStatistics</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stringList</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>collect</span><span class=p>(</span><span class=n>summarizingInt</span><span class=p>(</span><span class=n>String</span><span class=p>::</span><span class=n>length</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kt>double</span><span class=w> </span><span class=n>average</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>intSummaryStatistics</span><span class=p>.</span><span class=na>getAverage</span><span class=p>();</span><span class=w> </span><span class=c1>// 获取平均值</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kt>int</span><span class=w> </span><span class=n>min</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>intSummaryStatistics</span><span class=p>.</span><span class=na>getMin</span><span class=p>();</span><span class=w>            </span><span class=c1>// 获取最小值</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kt>int</span><span class=w> </span><span class=n>max</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>intSummaryStatistics</span><span class=p>.</span><span class=na>getMax</span><span class=p>();</span><span class=w>            </span><span class=c1>// 获取最大值</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kt>long</span><span class=w> </span><span class=n>sum</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>intSummaryStatistics</span><span class=p>.</span><span class=na>getSum</span><span class=p>();</span><span class=w>           </span><span class=c1>// 获取总和</span><span class=w>
</span></span></span></code></pre></div><h4 id=foreach-遍历>foreach 遍历<a hidden class=anchor aria-hidden=true href=#foreach-遍历>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>stringList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=s>&#34;Java 8&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Lambdas&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;In&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Action&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>stringList</span><span class=p>.</span><span class=na>stream</span><span class=p>().</span><span class=na>forEach</span><span class=p>(</span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>::</span><span class=n>println</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><h4 id=collect-返回集合>collect 返回集合<a hidden class=anchor aria-hidden=true href=#collect-返回集合>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>stringList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=s>&#34;Java 8&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Lambdas&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;In&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Action&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>intList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stringList</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>map</span><span class=p>(</span><span class=n>String</span><span class=p>::</span><span class=n>length</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>collect</span><span class=p>(</span><span class=n>toList</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Set</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>intSet</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stringList</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>map</span><span class=p>(</span><span class=n>String</span><span class=p>::</span><span class=n>length</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>collect</span><span class=p>(</span><span class=n>toSet</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 等价</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>intList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ArrayList</span><span class=o>&lt;&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Set</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>intSet</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>HashSet</span><span class=o>&lt;&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>item</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>stringList</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>intList</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>item</span><span class=p>.</span><span class=na>length</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>intSet</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>item</span><span class=p>.</span><span class=na>length</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>通过遍历和返回集合的使用发现流只是把原来的外部迭代放到了内部进行，这也是流的主要特点之一。内部迭代可以减少好多代码量</p><h4 id=joining-拼接流中的元素>joining 拼接流中的元素<a hidden class=anchor aria-hidden=true href=#joining-拼接流中的元素>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>stringList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=s>&#34;Java 8&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Lambdas&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;In&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Action&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>String</span><span class=w> </span><span class=n>result</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stringList</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>map</span><span class=p>(</span><span class=n>String</span><span class=p>::</span><span class=n>toLowerCase</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>collect</span><span class=p>(</span><span class=n>Collectors</span><span class=p>.</span><span class=na>joining</span><span class=p>(</span><span class=s>&#34;-&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 结果为：java 8-lambdas-in-action</span><span class=w>
</span></span></span></code></pre></div><h4 id=groupingby-分组>groupingBy 分组<a hidden class=anchor aria-hidden=true href=#groupingby-分组>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 在collect方法中传入groupingBy进行分组，其中groupingBy的方法参数为分类函数</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>stringList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=s>&#34;Java 8&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Lambdas&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;In&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Action&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Map</span><span class=o>&lt;</span><span class=n>Integer</span><span class=p>,</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>collect</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stringList</span><span class=p>.</span><span class=na>stream</span><span class=p>().</span><span class=na>collect</span><span class=p>(</span><span class=n>groupingBy</span><span class=p>(</span><span class=n>String</span><span class=p>::</span><span class=n>length</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 结果为：{2=[In], 6=[Java 8, Action], 7=[Lambdas]}</span><span class=w>
</span></span></span></code></pre></div><p>嵌套groupingBy进行多级分类</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>stringList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=s>&#34;Java 12&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Lambdas&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;In&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Action&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Map</span><span class=o>&lt;</span><span class=n>Integer</span><span class=p>,</span><span class=w> </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>Integer</span><span class=p>,</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;&gt;&gt;</span><span class=w> </span><span class=n>collect</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stringList</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>collect</span><span class=p>(</span><span class=n>groupingBy</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>String</span><span class=p>::</span><span class=n>length</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>groupingBy</span><span class=p>(</span><span class=n>String</span><span class=p>::</span><span class=n>hashCode</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 结果为：{2={2373=[In]}, 6={1955883606=[Action]}, 7={1611513196=[Lambdas], -155279169=[Java 12]}}</span><span class=w>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>stringList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=s>&#34;Java 12&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Lambdas&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;In&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Action&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Map</span><span class=o>&lt;</span><span class=n>Integer</span><span class=p>,</span><span class=w> </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;&gt;&gt;</span><span class=w> </span><span class=n>collect</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stringList</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>collect</span><span class=p>(</span><span class=n>groupingBy</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>String</span><span class=p>::</span><span class=n>length</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>groupingBy</span><span class=p>(</span><span class=n>item</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>item</span><span class=p>.</span><span class=na>length</span><span class=p>()</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>2</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;level1&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>item</span><span class=p>.</span><span class=na>length</span><span class=p>()</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>6</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;level2&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;level3&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>})</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 结果为：{2={level1=[In]}, 6={level2=[Action]}, 7={level3=[Java 12, Lambdas]}}</span><span class=w>
</span></span></span></code></pre></div><h4 id=partitioningby-分区>partitioningBy 分区<a hidden class=anchor aria-hidden=true href=#partitioningby-分区>#</a></h4><p>分区是特殊的分组，它分类依据是true和false，所以返回的结果最多可以分为两组</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>stringList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=s>&#34;Java 12&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Lambdas&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;In&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Action&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Map</span><span class=o>&lt;</span><span class=n>Boolean</span><span class=p>,</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>collect</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stringList</span><span class=p>.</span><span class=na>stream</span><span class=p>().</span><span class=na>collect</span><span class=p>(</span><span class=n>partitioningBy</span><span class=p>(</span><span class=n>String</span><span class=p>::</span><span class=n>isEmpty</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 结果为：{false=[Java 12, Lambdas, In, Action], true=[]}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span><span class=w> </span><span class=n>integerList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Arrays</span><span class=p>.</span><span class=na>asList</span><span class=p>(</span><span class=n>1</span><span class=p>,</span><span class=w> </span><span class=n>2</span><span class=p>,</span><span class=w> </span><span class=n>3</span><span class=p>,</span><span class=w> </span><span class=n>4</span><span class=p>,</span><span class=w> </span><span class=n>5</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Map</span><span class=o>&lt;</span><span class=n>Boolean</span><span class=p>,</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>result</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>integerList</span><span class=p>.</span><span class=na>stream</span><span class=p>().</span><span class=na>collect</span><span class=p>(</span><span class=n>partitioningBy</span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>3</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// 结果为：{false=[3, 4, 5], true=[1, 2]}</span><span class=w>
</span></span></span></code></pre></div><blockquote><p>本篇文章为学习笔记，感谢以下文章的总结
<a href=https://blog.csdn.net/QiuHaoqian/article/details/120942134>https://blog.csdn.net/QiuHaoqian/article/details/120942134</a></p></blockquote></div><footer class=post-footer><ul class=post-tags><li><a href=https://lesanouo.github.io/blog/tags/java/>Java</a></li></ul><nav class=paginav><a class=prev href=https://lesanouo.github.io/blog/posts/code/165193920001/><span class=title>«</span><br><span>生产者与消费者问题</span>
</a><a class=next href=https://lesanouo.github.io/blog/posts/code/165012480001/><span class=title>»</span><br><span>华为机试题：报数游戏</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://lesanouo.github.io/blog/>Lesan's Blog</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>