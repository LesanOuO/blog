<!doctype html><html lang=zh-cn dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Docker安装ONLYOFFICE | Lesan's Blog</title><meta name=keywords content="Docker,ONLYOFFICE"><meta name=description content="简介
ONLYOFFICE是一个值得推荐的软件，它能够帮助各种规模和类型的团队安全地在线协作处理文档。

文档编辑功能


支持多种格式：可以编辑Word、Excel、PowerPoint、PDF等多种常见格式的文件。
兼容性强：与Microsoft Office和OpenOffice格式兼容，保证文件的互通性。
多种编辑工具：提供丰富的文本编辑、表格功能、图形和图像插入等多种编辑工具。


云办公支持


文档在线协作：支持多人同时编辑同一个文档，可以实时看到其他人的编辑内容。
文件共享与管理：通过ONLYOFFICE平台，可以方便地管理和共享文件。
文件版本控制：自动保存文档版本，支持版本回溯，确保文件的完整性和可追溯性。


高度集成的工作平台


邮件、日历和任务管理：集成了邮件、日历、任务等管理功能，帮助团队协作和工作流优化。
云存储：支持将文件存储在ONLYOFFICE云端，也支持第三方云存储（如Google Drive、Dropbox等）的集成。
API接口：提供丰富的API，允许开发者定制或集成ONLYOFFICE到其他业务系统中。


安全性


文件加密：支持文件加密功能，保护文件隐私。
权限控制：可以设置不同用户的访问权限，确保敏感信息的安全。
双重身份验证：增强安全性，防止未经授权的访问。


跨平台支持


桌面端与移动端支持：提供Windows、macOS和Linux版本的桌面应用，还支持iOS和Android移动端应用。
Web版：支持通过浏览器直接访问，避免设备限制。


开放源码与自托管


开源版本：ONLYOFFICE提供免费开源版本，用户可以根据需要自定义和修改代码。
自托管：允许企业将ONLYOFFICE部署在自己的服务器上，确保数据的安全和控制。


集成与兼容性


与其他工具集成：可以与Microsoft Office、Google Workspace、Nextcloud等工具进行集成。
插件支持：支持第三方插件，增强功能的灵活性。

更多ONLYOFFICE相关信息可访问其官网、GitHub、开发文档"><meta name=author content="Lesan"><link rel=canonical href=https://lesanouo.github.io/blog/posts/175060800002/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://lesanouo.github.io/blog/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://lesanouo.github.io/blog/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://lesanouo.github.io/blog/favicon.ico><link rel=apple-touch-icon href=https://lesanouo.github.io/blog/favicon.ico><link rel=mask-icon href=https://lesanouo.github.io/blog/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh-cn href=https://lesanouo.github.io/blog/posts/175060800002/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:url" content="https://lesanouo.github.io/blog/posts/175060800002/"><meta property="og:site_name" content="Lesan's Blog"><meta property="og:title" content="Docker安装ONLYOFFICE"><meta property="og:description" content="简介 ONLYOFFICE是一个值得推荐的软件，它能够帮助各种规模和类型的团队安全地在线协作处理文档。
文档编辑功能 支持多种格式：可以编辑Word、Excel、PowerPoint、PDF等多种常见格式的文件。 兼容性强：与Microsoft Office和OpenOffice格式兼容，保证文件的互通性。 多种编辑工具：提供丰富的文本编辑、表格功能、图形和图像插入等多种编辑工具。 云办公支持 文档在线协作：支持多人同时编辑同一个文档，可以实时看到其他人的编辑内容。 文件共享与管理：通过ONLYOFFICE平台，可以方便地管理和共享文件。 文件版本控制：自动保存文档版本，支持版本回溯，确保文件的完整性和可追溯性。 高度集成的工作平台 邮件、日历和任务管理：集成了邮件、日历、任务等管理功能，帮助团队协作和工作流优化。 云存储：支持将文件存储在ONLYOFFICE云端，也支持第三方云存储（如Google Drive、Dropbox等）的集成。 API接口：提供丰富的API，允许开发者定制或集成ONLYOFFICE到其他业务系统中。 安全性 文件加密：支持文件加密功能，保护文件隐私。 权限控制：可以设置不同用户的访问权限，确保敏感信息的安全。 双重身份验证：增强安全性，防止未经授权的访问。 跨平台支持 桌面端与移动端支持：提供Windows、macOS和Linux版本的桌面应用，还支持iOS和Android移动端应用。 Web版：支持通过浏览器直接访问，避免设备限制。 开放源码与自托管 开源版本：ONLYOFFICE提供免费开源版本，用户可以根据需要自定义和修改代码。 自托管：允许企业将ONLYOFFICE部署在自己的服务器上，确保数据的安全和控制。 集成与兼容性 与其他工具集成：可以与Microsoft Office、Google Workspace、Nextcloud等工具进行集成。 插件支持：支持第三方插件，增强功能的灵活性。 更多ONLYOFFICE相关信息可访问其官网、GitHub、开发文档"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-06-23T00:00:00+00:00"><meta property="article:modified_time" content="2025-06-23T00:00:00+00:00"><meta property="article:tag" content="Docker"><meta property="article:tag" content="ONLYOFFICE"><meta name=twitter:card content="summary"><meta name=twitter:title content="Docker安装ONLYOFFICE"><meta name=twitter:description content="简介
ONLYOFFICE是一个值得推荐的软件，它能够帮助各种规模和类型的团队安全地在线协作处理文档。

文档编辑功能


支持多种格式：可以编辑Word、Excel、PowerPoint、PDF等多种常见格式的文件。
兼容性强：与Microsoft Office和OpenOffice格式兼容，保证文件的互通性。
多种编辑工具：提供丰富的文本编辑、表格功能、图形和图像插入等多种编辑工具。


云办公支持


文档在线协作：支持多人同时编辑同一个文档，可以实时看到其他人的编辑内容。
文件共享与管理：通过ONLYOFFICE平台，可以方便地管理和共享文件。
文件版本控制：自动保存文档版本，支持版本回溯，确保文件的完整性和可追溯性。


高度集成的工作平台


邮件、日历和任务管理：集成了邮件、日历、任务等管理功能，帮助团队协作和工作流优化。
云存储：支持将文件存储在ONLYOFFICE云端，也支持第三方云存储（如Google Drive、Dropbox等）的集成。
API接口：提供丰富的API，允许开发者定制或集成ONLYOFFICE到其他业务系统中。


安全性


文件加密：支持文件加密功能，保护文件隐私。
权限控制：可以设置不同用户的访问权限，确保敏感信息的安全。
双重身份验证：增强安全性，防止未经授权的访问。


跨平台支持


桌面端与移动端支持：提供Windows、macOS和Linux版本的桌面应用，还支持iOS和Android移动端应用。
Web版：支持通过浏览器直接访问，避免设备限制。


开放源码与自托管


开源版本：ONLYOFFICE提供免费开源版本，用户可以根据需要自定义和修改代码。
自托管：允许企业将ONLYOFFICE部署在自己的服务器上，确保数据的安全和控制。


集成与兼容性


与其他工具集成：可以与Microsoft Office、Google Workspace、Nextcloud等工具进行集成。
插件支持：支持第三方插件，增强功能的灵活性。

更多ONLYOFFICE相关信息可访问其官网、GitHub、开发文档"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"📚 博客","item":"https://lesanouo.github.io/blog/posts/"},{"@type":"ListItem","position":2,"name":"Docker安装ONLYOFFICE","item":"https://lesanouo.github.io/blog/posts/175060800002/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Docker安装ONLYOFFICE","name":"Docker安装ONLYOFFICE","description":"简介 ONLYOFFICE是一个值得推荐的软件，它能够帮助各种规模和类型的团队安全地在线协作处理文档。\n文档编辑功能 支持多种格式：可以编辑Word、Excel、PowerPoint、PDF等多种常见格式的文件。 兼容性强：与Microsoft Office和OpenOffice格式兼容，保证文件的互通性。 多种编辑工具：提供丰富的文本编辑、表格功能、图形和图像插入等多种编辑工具。 云办公支持 文档在线协作：支持多人同时编辑同一个文档，可以实时看到其他人的编辑内容。 文件共享与管理：通过ONLYOFFICE平台，可以方便地管理和共享文件。 文件版本控制：自动保存文档版本，支持版本回溯，确保文件的完整性和可追溯性。 高度集成的工作平台 邮件、日历和任务管理：集成了邮件、日历、任务等管理功能，帮助团队协作和工作流优化。 云存储：支持将文件存储在ONLYOFFICE云端，也支持第三方云存储（如Google Drive、Dropbox等）的集成。 API接口：提供丰富的API，允许开发者定制或集成ONLYOFFICE到其他业务系统中。 安全性 文件加密：支持文件加密功能，保护文件隐私。 权限控制：可以设置不同用户的访问权限，确保敏感信息的安全。 双重身份验证：增强安全性，防止未经授权的访问。 跨平台支持 桌面端与移动端支持：提供Windows、macOS和Linux版本的桌面应用，还支持iOS和Android移动端应用。 Web版：支持通过浏览器直接访问，避免设备限制。 开放源码与自托管 开源版本：ONLYOFFICE提供免费开源版本，用户可以根据需要自定义和修改代码。 自托管：允许企业将ONLYOFFICE部署在自己的服务器上，确保数据的安全和控制。 集成与兼容性 与其他工具集成：可以与Microsoft Office、Google Workspace、Nextcloud等工具进行集成。 插件支持：支持第三方插件，增强功能的灵活性。 更多ONLYOFFICE相关信息可访问其官网、GitHub、开发文档\n","keywords":["Docker","ONLYOFFICE"],"articleBody":"简介 ONLYOFFICE是一个值得推荐的软件，它能够帮助各种规模和类型的团队安全地在线协作处理文档。\n文档编辑功能 支持多种格式：可以编辑Word、Excel、PowerPoint、PDF等多种常见格式的文件。 兼容性强：与Microsoft Office和OpenOffice格式兼容，保证文件的互通性。 多种编辑工具：提供丰富的文本编辑、表格功能、图形和图像插入等多种编辑工具。 云办公支持 文档在线协作：支持多人同时编辑同一个文档，可以实时看到其他人的编辑内容。 文件共享与管理：通过ONLYOFFICE平台，可以方便地管理和共享文件。 文件版本控制：自动保存文档版本，支持版本回溯，确保文件的完整性和可追溯性。 高度集成的工作平台 邮件、日历和任务管理：集成了邮件、日历、任务等管理功能，帮助团队协作和工作流优化。 云存储：支持将文件存储在ONLYOFFICE云端，也支持第三方云存储（如Google Drive、Dropbox等）的集成。 API接口：提供丰富的API，允许开发者定制或集成ONLYOFFICE到其他业务系统中。 安全性 文件加密：支持文件加密功能，保护文件隐私。 权限控制：可以设置不同用户的访问权限，确保敏感信息的安全。 双重身份验证：增强安全性，防止未经授权的访问。 跨平台支持 桌面端与移动端支持：提供Windows、macOS和Linux版本的桌面应用，还支持iOS和Android移动端应用。 Web版：支持通过浏览器直接访问，避免设备限制。 开放源码与自托管 开源版本：ONLYOFFICE提供免费开源版本，用户可以根据需要自定义和修改代码。 自托管：允许企业将ONLYOFFICE部署在自己的服务器上，确保数据的安全和控制。 集成与兼容性 与其他工具集成：可以与Microsoft Office、Google Workspace、Nextcloud等工具进行集成。 插件支持：支持第三方插件，增强功能的灵活性。 更多ONLYOFFICE相关信息可访问其官网、GitHub、开发文档\nDocker安装 准备镜像 通过Docker我们可以很快速的安装ONLYOFFICE\nhttps://helpcenter.onlyoffice.com/docs/installation/docs-community-install-docker.aspx\ndocker pull onlyoffice/documentserver:latest 运行镜像 docker run -itd -p 8881:80 --restart=always \\ -v /data/onlyoffice/DocumentServer/prod/logs:/var/log/onlyoffice \\ -v /data/onlyoffice/DocumentServer/prod/data:/var/www/onlyoffice/Data \\ -v /data/onlyoffice/DocumentServer/prod/lib:/var/lib/onlyoffice \\ -v /data/onlyoffice/DocumentServer/prod/db:/var/lib/postgresql \\ -e JWT_SECRET=gie_jwt_secret -e ALLOW_META_IP_ADDRESS=true -e ALLOW_PRIVATE_IP_ADDRESS=true \\ --name=onlyoffice --privileged onlyoffice/documentserver 文件说明：\n/var/log/onlyoffice for ONLYOFFICE Docs logs /var/www/onlyoffice/Data for certificates /var/lib/onlyoffice for file cache /var/lib/postgresql for database 变量说明：\n-e JWT_SECRET=gie_jwt_secret JWT验证密钥，JWT_ENABLED默认为true -e ALLOW_META_IP_ADDRESS=true -e ALLOW_PRIVATE_IP_ADDRESS=true 允许内网访问 结果 通过浏览器输入http://电脑IP:8881，一定要用电脑IP，防止出现无法正常试用的问题。\n访问成功后会自动跳转welcome页面！\n一些问题！！！ 内网访问 修改容器中的/etc/onlyoffice/documentserver/default.json以下字段\n\"request-filtering-agent\" : { \"allowPrivateIPAddress\": true, \"allowMetaIPAddress\": true }, 可以通过docker cp命令进行修改，容器内没有vi或vim命令\ndocker cp onlyoffice:/etc/onlyoffice/documentserver/default.json ./ vim default.json docker cp ./default.json onlyoffice:/etc/onlyoffice/documentserver/default.json 修改local.json文件 如设置token，修改 local.json 文件时，需要执行如下命令，否则镜像重启会恢复原内容：\nsupervisorctl restart all 添加中文字体 准备中文字体 先准备好自己需要安装的字体，可以直接从windows系统C:\\Windows\\Fonts下选择拷贝，也可以参考这个网址，热心人已经给整理好了，地址：onlyoffice-chinese-fonts\n删除onlyoffice自带字体 先要进入容器删除onlyoffice原有字体，注意：如果只是添加字体，且想使用原有字体的话那么就不用删除原有字体\n# 进入容器 docker exec -it onlyoffice bash # 进入容器后执行 cd /usr/share/fonts/ rm -rf * cd /var/www/onlyoffice/documentserver/core-fonts/ rm -rf * 添加新字体 用docker cp命令将下载的字体都放到容器内的/usr/share/fonts目录下。\n生成字体 进入容器，执行命令：/usr/bin/documentserver-generate-allfonts.sh\n本文参考至 https://blog.csdn.net/fire_in_java/article/details/138905726、https://blog.csdn.net/XINYANGXINNIAN/article/details/135288590\n","wordCount":"1654","inLanguage":"zh-cn","datePublished":"2025-06-23T00:00:00Z","dateModified":"2025-06-23T00:00:00Z","author":{"@type":"Person","name":"Lesan"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://lesanouo.github.io/blog/posts/175060800002/"},"publisher":{"@type":"Organization","name":"Lesan's Blog","logo":{"@type":"ImageObject","url":"https://lesanouo.github.io/blog/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://lesanouo.github.io/blog/ accesskey=h title="Lesan's Blog (Alt + H)">Lesan's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://lesanouo.github.io/blog/archives title="📚 归档"><span>📚 归档</span></a></li><li><a href=https://lesanouo.github.io/blog/categories/ title="🗃️ 分类"><span>🗃️ 分类</span></a></li><li><a href=https://lesanouo.github.io/blog/tags/ title="🏷️ 标签"><span>🏷️ 标签</span></a></li><li><a href=https://lesanouo.github.io/blog/search/ title="🔎 搜索"><span>🔎 搜索</span></a></li><li><a href=https://lesanouo.github.io/blog/about/ title="👨‍💻 关于我"><span>👨‍💻 关于我</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://lesanouo.github.io/blog/>Home</a>&nbsp;»&nbsp;<a href=https://lesanouo.github.io/blog/posts/>📚 博客</a></div><h1 class="post-title entry-hint-parent">Docker安装ONLYOFFICE</h1><div class=post-meta><span title='2025-06-23 00:00:00 +0000 UTC'>2025-06-23</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Lesan</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e7%ae%80%e4%bb%8b aria-label=简介>简介</a></li><li><a href=#docker%e5%ae%89%e8%a3%85 aria-label=Docker安装>Docker安装</a><ul><li><a href=#%e5%87%86%e5%a4%87%e9%95%9c%e5%83%8f aria-label=准备镜像>准备镜像</a></li><li><a href=#%e8%bf%90%e8%a1%8c%e9%95%9c%e5%83%8f aria-label=运行镜像>运行镜像</a></li><li><a href=#%e7%bb%93%e6%9e%9c aria-label=结果>结果</a></li></ul></li><li><a href=#%e4%b8%80%e4%ba%9b%e9%97%ae%e9%a2%98 aria-label=一些问题！！！>一些问题！！！</a><ul><li><a href=#%e5%86%85%e7%bd%91%e8%ae%bf%e9%97%ae aria-label=内网访问>内网访问</a></li><li><a href=#%e4%bf%ae%e6%94%b9localjson%e6%96%87%e4%bb%b6 aria-label=修改local.json文件>修改local.json文件</a></li><li><a href=#%e6%b7%bb%e5%8a%a0%e4%b8%ad%e6%96%87%e5%ad%97%e4%bd%93 aria-label=添加中文字体>添加中文字体</a><ul><li><a href=#%e5%87%86%e5%a4%87%e4%b8%ad%e6%96%87%e5%ad%97%e4%bd%93 aria-label=准备中文字体>准备中文字体</a></li><li><a href=#%e5%88%a0%e9%99%a4onlyoffice%e8%87%aa%e5%b8%a6%e5%ad%97%e4%bd%93 aria-label=删除onlyoffice自带字体>删除onlyoffice自带字体</a></li><li><a href=#%e6%b7%bb%e5%8a%a0%e6%96%b0%e5%ad%97%e4%bd%93 aria-label=添加新字体>添加新字体</a></li><li><a href=#%e7%94%9f%e6%88%90%e5%ad%97%e4%bd%93 aria-label=生成字体>生成字体</a></li></ul></li></ul></li></ul></div></details></div><div class=post-content><h2 id=简介>简介<a hidden class=anchor aria-hidden=true href=#简介>#</a></h2><p><code>ONLYOFFICE</code>是一个值得推荐的软件，它能够帮助各种规模和类型的团队安全地在线协作处理文档。</p><ol><li>文档编辑功能</li></ol><ul><li>支持多种格式：可以编辑Word、Excel、PowerPoint、PDF等多种常见格式的文件。</li><li>兼容性强：与Microsoft Office和OpenOffice格式兼容，保证文件的互通性。</li><li>多种编辑工具：提供丰富的文本编辑、表格功能、图形和图像插入等多种编辑工具。</li></ul><ol start=2><li>云办公支持</li></ol><ul><li>文档在线协作：支持多人同时编辑同一个文档，可以实时看到其他人的编辑内容。</li><li>文件共享与管理：通过ONLYOFFICE平台，可以方便地管理和共享文件。</li><li>文件版本控制：自动保存文档版本，支持版本回溯，确保文件的完整性和可追溯性。</li></ul><ol start=3><li>高度集成的工作平台</li></ol><ul><li>邮件、日历和任务管理：集成了邮件、日历、任务等管理功能，帮助团队协作和工作流优化。</li><li>云存储：支持将文件存储在ONLYOFFICE云端，也支持第三方云存储（如Google Drive、Dropbox等）的集成。</li><li>API接口：提供丰富的API，允许开发者定制或集成ONLYOFFICE到其他业务系统中。</li></ul><ol start=4><li>安全性</li></ol><ul><li>文件加密：支持文件加密功能，保护文件隐私。</li><li>权限控制：可以设置不同用户的访问权限，确保敏感信息的安全。</li><li>双重身份验证：增强安全性，防止未经授权的访问。</li></ul><ol start=5><li>跨平台支持</li></ol><ul><li>桌面端与移动端支持：提供Windows、macOS和Linux版本的桌面应用，还支持iOS和Android移动端应用。</li><li>Web版：支持通过浏览器直接访问，避免设备限制。</li></ul><ol start=6><li>开放源码与自托管</li></ol><ul><li>开源版本：ONLYOFFICE提供免费开源版本，用户可以根据需要自定义和修改代码。</li><li>自托管：允许企业将ONLYOFFICE部署在自己的服务器上，确保数据的安全和控制。</li></ul><ol start=7><li>集成与兼容性</li></ol><ul><li>与其他工具集成：可以与Microsoft Office、Google Workspace、Nextcloud等工具进行集成。</li><li>插件支持：支持第三方插件，增强功能的灵活性。</li></ul><p>更多<code>ONLYOFFICE</code>相关信息可访问其<a href=https://www.onlyoffice.com/zh/>官网</a>、<a href=https://github.com/ONLYOFFICE/DocumentServer>GitHub</a>、<a href=https://api.onlyoffice.com/>开发文档</a></p><h2 id=docker安装>Docker安装<a hidden class=anchor aria-hidden=true href=#docker安装>#</a></h2><h3 id=准备镜像>准备镜像<a hidden class=anchor aria-hidden=true href=#准备镜像>#</a></h3><p>通过Docker我们可以很快速的安装<code>ONLYOFFICE</code></p><blockquote><p><a href=https://helpcenter.onlyoffice.com/docs/installation/docs-community-install-docker.aspx>https://helpcenter.onlyoffice.com/docs/installation/docs-community-install-docker.aspx</a></p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker pull onlyoffice/documentserver:latest
</span></span></code></pre></div><h3 id=运行镜像>运行镜像<a hidden class=anchor aria-hidden=true href=#运行镜像>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker run -itd -p 8881:80 --restart<span class=o>=</span>always <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -v /data/onlyoffice/DocumentServer/prod/logs:/var/log/onlyoffice  <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -v /data/onlyoffice/DocumentServer/prod/data:/var/www/onlyoffice/Data  <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -v /data/onlyoffice/DocumentServer/prod/lib:/var/lib/onlyoffice <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -v /data/onlyoffice/DocumentServer/prod/db:/var/lib/postgresql <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -e <span class=nv>JWT_SECRET</span><span class=o>=</span>gie_jwt_secret -e <span class=nv>ALLOW_META_IP_ADDRESS</span><span class=o>=</span><span class=nb>true</span> -e <span class=nv>ALLOW_PRIVATE_IP_ADDRESS</span><span class=o>=</span><span class=nb>true</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --name<span class=o>=</span>onlyoffice --privileged onlyoffice/documentserver
</span></span></code></pre></div><p>文件说明：</p><ul><li><code>/var/log/onlyoffice</code> for ONLYOFFICE Docs logs</li><li><code>/var/www/onlyoffice/Data</code> for certificates</li><li><code>/var/lib/onlyoffice</code> for file cache</li><li><code>/var/lib/postgresql</code> for database</li></ul><p>变量说明：</p><ul><li><code>-e JWT_SECRET=gie_jwt_secret</code> JWT验证密钥，JWT_ENABLED默认为true</li><li><code>-e ALLOW_META_IP_ADDRESS=true</code> <code>-e ALLOW_PRIVATE_IP_ADDRESS=true</code> 允许内网访问</li></ul><h3 id=结果>结果<a hidden class=anchor aria-hidden=true href=#结果>#</a></h3><p>通过浏览器输入<code>http://电脑IP:8881</code>，<strong>一定要用电脑IP</strong>，防止出现无法正常试用的问题。</p><p>访问成功后会自动跳转welcome页面！</p><h2 id=一些问题>一些问题！！！<a hidden class=anchor aria-hidden=true href=#一些问题>#</a></h2><h3 id=内网访问>内网访问<a hidden class=anchor aria-hidden=true href=#内网访问>#</a></h3><p>修改容器中的<code>/etc/onlyoffice/documentserver/default.json</code>以下字段</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=s2>&#34;request-filtering-agent&#34;</span> <span class=err>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;allowPrivateIPAddress&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;allowMetaIPAddress&#34;</span><span class=p>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=p>}</span><span class=err>,</span>
</span></span></code></pre></div><p>可以通过<code>docker cp</code>命令进行修改，容器内没有<code>vi</code>或<code>vim</code>命令</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker cp onlyoffice:/etc/onlyoffice/documentserver/default.json ./
</span></span><span class=line><span class=cl>vim default.json
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>docker cp ./default.json onlyoffice:/etc/onlyoffice/documentserver/default.json
</span></span></code></pre></div><h3 id=修改localjson文件>修改local.json文件<a hidden class=anchor aria-hidden=true href=#修改localjson文件>#</a></h3><p>如设置token，修改 <code>local.json</code> 文件时，需要执行如下命令，否则镜像重启会恢复原内容：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>supervisorctl restart all
</span></span></code></pre></div><h3 id=添加中文字体>添加中文字体<a hidden class=anchor aria-hidden=true href=#添加中文字体>#</a></h3><h4 id=准备中文字体>准备中文字体<a hidden class=anchor aria-hidden=true href=#准备中文字体>#</a></h4><p>先准备好自己需要安装的字体，可以直接从windows系统C:\Windows\Fonts下选择拷贝，也可以参考这个网址，热心人已经给整理好了，地址：<a href=https://github.com/funggtopp/onlyoffice-chinese-fonts>onlyoffice-chinese-fonts</a></p><h4 id=删除onlyoffice自带字体>删除onlyoffice自带字体<a hidden class=anchor aria-hidden=true href=#删除onlyoffice自带字体>#</a></h4><p>先要进入容器删除onlyoffice原有字体，<strong>注意：如果只是添加字体，且想使用原有字体的话那么就不用删除原有字体</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 进入容器</span>
</span></span><span class=line><span class=cl>docker <span class=nb>exec</span> -it onlyoffice bash
</span></span><span class=line><span class=cl><span class=c1># 进入容器后执行</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> /usr/share/fonts/
</span></span><span class=line><span class=cl>rm -rf *
</span></span><span class=line><span class=cl><span class=nb>cd</span> /var/www/onlyoffice/documentserver/core-fonts/
</span></span><span class=line><span class=cl>rm -rf *
</span></span></code></pre></div><h4 id=添加新字体>添加新字体<a hidden class=anchor aria-hidden=true href=#添加新字体>#</a></h4><p>用<code>docker cp</code>命令将下载的字体都放到容器内的<code>/usr/share/fonts</code>目录下。</p><h4 id=生成字体>生成字体<a hidden class=anchor aria-hidden=true href=#生成字体>#</a></h4><p>进入容器，执行命令：<code>/usr/bin/documentserver-generate-allfonts.sh</code></p><blockquote><p>本文参考至 <a href=https://blog.csdn.net/fire_in_java/article/details/138905726>https://blog.csdn.net/fire_in_java/article/details/138905726</a>、https://blog.csdn.net/XINYANGXINNIAN/article/details/135288590</p></blockquote></div><footer class=post-footer><ul class=post-tags><li><a href=https://lesanouo.github.io/blog/tags/docker/>Docker</a></li><li><a href=https://lesanouo.github.io/blog/tags/onlyoffice/>ONLYOFFICE</a></li></ul><nav class=paginav><a class=prev href=https://lesanouo.github.io/blog/posts/175069440001/><span class=title>«</span><br><span>使用Nginx反向代理ONLYOFFICE</span>
</a><a class=next href=https://lesanouo.github.io/blog/posts/175060800001/><span class=title>»</span><br><span>Maven解决Resource下office文件编译后损坏</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://lesanouo.github.io/blog/>Lesan's Blog</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>