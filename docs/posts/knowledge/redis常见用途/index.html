<!doctype html><html lang=zh-cn dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Rediså¸¸è§ç”¨é€” | Lesan's Blog</title><meta name=keywords content="Redis"><meta name=description content="æœ¬ç¯‡æ–‡ç« ä¸»è¦ç®€è¦æ€»ç»“Redisçš„å¸¸è§ç”¨é€”
1ã€ç¼“å­˜
Stringç±»å‹
ä¾‹å¦‚ï¼šçƒ­ç‚¹æ•°æ®ç¼“å­˜ï¼ˆä¾‹å¦‚æŠ¥è¡¨ã€æ˜æ˜Ÿå‡ºè½¨ï¼‰ï¼Œå¯¹è±¡ç¼“å­˜ã€å…¨é¡µç¼“å­˜ã€å¯ä»¥æå‡çƒ­ç‚¹æ•°æ®çš„è®¿é—®æ•°æ®ã€‚"><meta name=author content="Lesan"><link rel=canonical href=https://lesanouo.github.io/blog/posts/knowledge/redis%E5%B8%B8%E8%A7%81%E7%94%A8%E9%80%94/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://lesanouo.github.io/blog/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://lesanouo.github.io/blog/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://lesanouo.github.io/blog/favicon.ico><link rel=apple-touch-icon href=https://lesanouo.github.io/blog/favicon.ico><link rel=mask-icon href=https://lesanouo.github.io/blog/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh-cn href=https://lesanouo.github.io/blog/posts/knowledge/redis%E5%B8%B8%E8%A7%81%E7%94%A8%E9%80%94/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:url" content="https://lesanouo.github.io/blog/posts/knowledge/redis%E5%B8%B8%E8%A7%81%E7%94%A8%E9%80%94/"><meta property="og:site_name" content="Lesan's Blog"><meta property="og:title" content="Rediså¸¸è§ç”¨é€”"><meta property="og:description" content="æœ¬ç¯‡æ–‡ç« ä¸»è¦ç®€è¦æ€»ç»“Redisçš„å¸¸è§ç”¨é€”
1ã€ç¼“å­˜ Stringç±»å‹
ä¾‹å¦‚ï¼šçƒ­ç‚¹æ•°æ®ç¼“å­˜ï¼ˆä¾‹å¦‚æŠ¥è¡¨ã€æ˜æ˜Ÿå‡ºè½¨ï¼‰ï¼Œå¯¹è±¡ç¼“å­˜ã€å…¨é¡µç¼“å­˜ã€å¯ä»¥æå‡çƒ­ç‚¹æ•°æ®çš„è®¿é—®æ•°æ®ã€‚"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-06-30T00:00:00+00:00"><meta property="article:modified_time" content="2023-06-30T00:00:00+00:00"><meta property="article:tag" content="Redis"><meta name=twitter:card content="summary"><meta name=twitter:title content="Rediså¸¸è§ç”¨é€”"><meta name=twitter:description content="æœ¬ç¯‡æ–‡ç« ä¸»è¦ç®€è¦æ€»ç»“Redisçš„å¸¸è§ç”¨é€”
1ã€ç¼“å­˜
Stringç±»å‹
ä¾‹å¦‚ï¼šçƒ­ç‚¹æ•°æ®ç¼“å­˜ï¼ˆä¾‹å¦‚æŠ¥è¡¨ã€æ˜æ˜Ÿå‡ºè½¨ï¼‰ï¼Œå¯¹è±¡ç¼“å­˜ã€å…¨é¡µç¼“å­˜ã€å¯ä»¥æå‡çƒ­ç‚¹æ•°æ®çš„è®¿é—®æ•°æ®ã€‚"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"ğŸ“š åšå®¢","item":"https://lesanouo.github.io/blog/posts/"},{"@type":"ListItem","position":2,"name":"Rediså¸¸è§ç”¨é€”","item":"https://lesanouo.github.io/blog/posts/knowledge/redis%E5%B8%B8%E8%A7%81%E7%94%A8%E9%80%94/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Rediså¸¸è§ç”¨é€”","name":"Rediså¸¸è§ç”¨é€”","description":"æœ¬ç¯‡æ–‡ç« ä¸»è¦ç®€è¦æ€»ç»“Redisçš„å¸¸è§ç”¨é€”\n1ã€ç¼“å­˜ Stringç±»å‹\nä¾‹å¦‚ï¼šçƒ­ç‚¹æ•°æ®ç¼“å­˜ï¼ˆä¾‹å¦‚æŠ¥è¡¨ã€æ˜æ˜Ÿå‡ºè½¨ï¼‰ï¼Œå¯¹è±¡ç¼“å­˜ã€å…¨é¡µç¼“å­˜ã€å¯ä»¥æå‡çƒ­ç‚¹æ•°æ®çš„è®¿é—®æ•°æ®ã€‚\n","keywords":["Redis"],"articleBody":"æœ¬ç¯‡æ–‡ç« ä¸»è¦ç®€è¦æ€»ç»“Redisçš„å¸¸è§ç”¨é€”\n1ã€ç¼“å­˜ Stringç±»å‹\nä¾‹å¦‚ï¼šçƒ­ç‚¹æ•°æ®ç¼“å­˜ï¼ˆä¾‹å¦‚æŠ¥è¡¨ã€æ˜æ˜Ÿå‡ºè½¨ï¼‰ï¼Œå¯¹è±¡ç¼“å­˜ã€å…¨é¡µç¼“å­˜ã€å¯ä»¥æå‡çƒ­ç‚¹æ•°æ®çš„è®¿é—®æ•°æ®ã€‚\n2ã€æ•°æ®å…±äº«åˆ†å¸ƒå¼ String ç±»å‹ï¼Œå› ä¸º Redis æ˜¯åˆ†å¸ƒå¼çš„ç‹¬ç«‹æœåŠ¡ï¼Œå¯ä»¥åœ¨å¤šä¸ªåº”ç”¨ä¹‹é—´å…±äº«\nä¾‹å¦‚ï¼šåˆ†å¸ƒå¼Session\norg.springframework.session spring-session-data-redis 3ã€åˆ†å¸ƒå¼é” String ç±»å‹setnxæ–¹æ³•ï¼Œåªæœ‰ä¸å­˜åœ¨æ—¶æ‰èƒ½æ·»åŠ æˆåŠŸï¼Œè¿”å›true\npublic static boolean getLock(String key) { Long flag = jedis.setnx(key, \"1\"); if (flag == 1) { jedis.expire(key, 10); } return flag == 1; } public static void releaseLock(String key) { jedis.del(key); } 4ã€å…¨å±€ID intç±»å‹ï¼Œincrbyï¼Œåˆ©ç”¨åŸå­æ€§\nincrby userid 1000\nåˆ†åº“åˆ†è¡¨çš„åœºæ™¯ï¼Œä¸€æ¬¡æ€§æ‹¿ä¸€æ®µ\n5ã€è®¡æ•°å™¨ intç±»å‹ï¼Œincræ–¹æ³•\nä¾‹å¦‚ï¼šæ–‡ç« çš„é˜…è¯»é‡ã€å¾®åšç‚¹èµæ•°ã€å…è®¸ä¸€å®šçš„å»¶è¿Ÿï¼Œå…ˆå†™å…¥Rediså†å®šæ—¶åŒæ­¥åˆ°æ•°æ®åº“\n6ã€é™æµ intç±»å‹ï¼Œincræ–¹æ³•\nä»¥è®¿é—®è€…çš„ipå’Œå…¶ä»–ä¿¡æ¯ä½œä¸ºkeyï¼Œè®¿é—®ä¸€æ¬¡å¢åŠ ä¸€æ¬¡è®¡æ•°ï¼Œè¶…è¿‡æ¬¡æ•°åˆ™è¿”å›false\n7ã€ä½ç»Ÿè®¡ Stringç±»å‹çš„bitcountï¼ˆ1.6.6çš„bitmapæ•°æ®ç»“æ„ä»‹ç»ï¼‰\nå­—ç¬¦æ˜¯ä»¥8ä½äºŒè¿›åˆ¶å­˜å‚¨çš„\nset k1 a setbit k1 6 1 setbit k1 7 0 get k1 /* 6 7 ä»£è¡¨çš„açš„äºŒè¿›åˆ¶ä½çš„ä¿®æ”¹ a å¯¹åº”çš„ASCIIç æ˜¯97ï¼Œè½¬æ¢ä¸ºäºŒè¿›åˆ¶æ•°æ®æ˜¯01100001 b å¯¹åº”çš„ASCIIç æ˜¯98ï¼Œè½¬æ¢ä¸ºäºŒè¿›åˆ¶æ•°æ®æ˜¯01100010 å› ä¸ºbitéå¸¸èŠ‚çœç©ºé—´ï¼ˆ1 MB=8388608 bitï¼‰ï¼Œå¯ä»¥ç”¨æ¥åšå¤§æ•°æ®é‡çš„ç»Ÿè®¡ã€‚ */ ä¾‹å¦‚ï¼šåœ¨çº¿ç”¨æˆ·ç»Ÿè®¡ï¼Œç•™å­˜ç”¨æˆ·ç»Ÿè®¡\nsetbit onlineusers 01 setbit onlineusers 11 setbit onlineusers 20 æ”¯æŒæŒ‰ä½ä¸ã€æŒ‰ä½æˆ–ç­‰ç­‰æ“ä½œ\nBITOPANDdestkeykey[key...] ï¼Œå¯¹ä¸€ä¸ªæˆ–å¤šä¸ª key æ±‚é€»è¾‘å¹¶ï¼Œå¹¶å°†ç»“æœä¿å­˜åˆ° destkey ã€‚ BITOPORdestkeykey[key...] ï¼Œå¯¹ä¸€ä¸ªæˆ–å¤šä¸ª key æ±‚é€»è¾‘æˆ–ï¼Œå¹¶å°†ç»“æœä¿å­˜åˆ° destkey ã€‚ BITOPXORdestkeykey[key...] ï¼Œå¯¹ä¸€ä¸ªæˆ–å¤šä¸ª key æ±‚é€»è¾‘å¼‚æˆ–ï¼Œå¹¶å°†ç»“æœä¿å­˜åˆ° destkey ã€‚ BITOPNOTdestkeykey ï¼Œå¯¹ç»™å®š key æ±‚é€»è¾‘éï¼Œå¹¶å°†ç»“æœä¿å­˜åˆ° destkey ã€‚ è®¡ç®—å‡º7å¤©éƒ½åœ¨çº¿çš„ç”¨æˆ·\nBITOP \"AND\" \"7_days_both_online_users\" \"day_1_online_users\" \"day_2_online_users\" ... \"day_7_online_users\" 8ã€è´­ç‰©è½¦ String æˆ–hashã€‚æ‰€æœ‰Stringå¯ä»¥åšçš„hashéƒ½å¯ä»¥åš\nkeyï¼šç”¨æˆ·idï¼›fieldï¼šå•†å“idï¼›valueï¼šå•†å“æ•°é‡ã€‚\n+1ï¼šhincrã€‚-1ï¼šhdecrã€‚åˆ é™¤ï¼šhdelã€‚å…¨é€‰ï¼šhgetallã€‚å•†å“æ•°ï¼šhlenã€‚\n9ã€ç”¨æˆ·æ¶ˆæ¯æ—¶é—´çº¿timeline listï¼ŒåŒå‘é“¾è¡¨ï¼Œç›´æ¥ä½œä¸ºtimelineå°±å¥½äº†ã€‚æ’å…¥æœ‰åº\n10ã€æ¶ˆæ¯é˜Ÿåˆ— Listæä¾›äº†ä¸¤ä¸ªé˜»å¡çš„å¼¹å‡ºæ“ä½œï¼šblpop/brpopï¼Œå¯ä»¥è®¾ç½®è¶…æ—¶æ—¶é—´\nblpopï¼šblpop key1 timeout ç§»é™¤å¹¶è·å–åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœåˆ—è¡¨æ²¡æœ‰å…ƒç´ ä¼šé˜»å¡åˆ—è¡¨ç›´åˆ°ç­‰å¾…è¶…æ—¶æˆ–å‘ç°å¯å¼¹å‡ºå…ƒç´ ä¸ºæ­¢ã€‚\nbrpopï¼šbrpop key1 timeout ç§»é™¤å¹¶è·å–åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœåˆ—è¡¨æ²¡æœ‰å…ƒç´ ä¼šé˜»å¡åˆ—è¡¨ç›´åˆ°ç­‰å¾…è¶…æ—¶æˆ–å‘ç°å¯å¼¹å‡ºå…ƒç´ ä¸ºæ­¢ã€‚\nä¸Šé¢çš„æ“ä½œã€‚å…¶å®å°±æ˜¯javaçš„é˜»å¡é˜Ÿåˆ—ã€‚å­¦ä¹ çš„ä¸œè¥¿è¶Šå¤šã€‚å­¦ä¹ æˆæœ¬è¶Šä½\né˜Ÿåˆ—ï¼šå…ˆè¿›å…ˆé™¤ï¼šrpush blpopï¼Œå·¦å¤´å³å°¾ï¼Œå³è¾¹è¿›å…¥é˜Ÿåˆ—ï¼Œå·¦è¾¹å‡ºé˜Ÿåˆ—\næ ˆï¼šå…ˆè¿›åå‡ºï¼šrpush brpop\n11ã€æŠ½å¥– è‡ªå¸¦ä¸€ä¸ªéšæœºè·å¾—å€¼\nspop myset 12ã€ç‚¹èµã€ç­¾åˆ°ã€æ‰“å¡ å‡å¦‚ä¸Šé¢çš„å¾®åšIDæ˜¯t1001ï¼Œç”¨æˆ·IDæ˜¯u3001\nç”¨ like:t1001 æ¥ç»´æŠ¤ t1001 è¿™æ¡å¾®åšçš„æ‰€æœ‰ç‚¹èµç”¨æˆ·\nç‚¹èµäº†è¿™æ¡å¾®åšï¼šsadd like:t1001 u3001\nå–æ¶ˆç‚¹èµï¼šsrem like:t1001 u3001\næ˜¯å¦ç‚¹èµï¼šsismember like:t1001 u3001\nç‚¹èµçš„æ‰€æœ‰ç”¨æˆ·ï¼šsmembers like:t1001\nç‚¹èµæ•°ï¼šscard like:t1001\næ˜¯ä¸æ˜¯æ¯”æ•°æ®åº“ç®€å•å¤šäº†ã€‚\n13ã€å•†å“æ ‡ç­¾ è€è§„çŸ©ï¼Œç”¨ tags:i5001 æ¥ç»´æŠ¤å•†å“æ‰€æœ‰çš„æ ‡ç­¾ã€‚\nsadd tags:i5001 ç”»é¢æ¸…æ™°ç»†è…»\nsadd tags:i5001 çœŸå½©æ¸…æ™°æ˜¾ç¤ºå±\nsadd tags:i5001 æµç¨‹è‡³æ\n14ã€å•†å“ç­›é€‰ // è·å–å·®é›†\rsdiff set1 set2\r// è·å–äº¤é›†ï¼ˆintersection ï¼‰\rsinter set1 set2\r// è·å–å¹¶é›†\rsunion set1 set2 å‡å¦‚ï¼šiPhone11 ä¸Šå¸‚äº†\nsadd brand:apple iPhone11\rsadd brand:ios iPhone11\rsad screensize:6.0-6.24 iPhone11\rsad screentype:lcd iPhone 11 èµ›é€‰å•†å“ï¼Œè‹¹æœçš„ã€iosçš„ã€å±å¹•åœ¨6.0-6.24ä¹‹é—´çš„ï¼Œå±å¹•æè´¨æ˜¯LCDå±å¹•\nsinter brand:apple brand:ios screensize:6.0-6.24 screentype:lcd 15ã€ç”¨æˆ·å…³æ³¨ã€æ¨èæ¨¡å‹ follow å…³æ³¨ fans ç²‰ä¸\nç›¸äº’å…³æ³¨ï¼š\nsadd 1:follow 2\nsadd 2:fans 1\nsadd 1:fans 2\nsadd 2:follow 1\næˆ‘å…³æ³¨çš„äººä¹Ÿå…³æ³¨äº†ä»–(å–äº¤é›†)ï¼š\nsinter 1:follow 2:fans å¯èƒ½è®¤è¯†çš„äººï¼š\nç”¨æˆ·1å¯èƒ½è®¤è¯†çš„äºº(å·®é›†)ï¼šsdiff 2:follow 1:follow\nç”¨æˆ·2å¯èƒ½è®¤è¯†çš„äººï¼šsdiff 1:follow 2:follow\n16ã€æ’è¡Œæ¦œ id ä¸º6001 çš„æ–°é—»ç‚¹å‡»æ•°åŠ 1ï¼š\nzincrby hotNews:20190926 1 n6001 è·å–ä»Šå¤©ç‚¹å‡»æœ€å¤šçš„15æ¡ï¼š\nzrevrange hotNews:20190926 0 15 withscores ","wordCount":"1531","inLanguage":"zh-cn","datePublished":"2023-06-30T00:00:00Z","dateModified":"2023-06-30T00:00:00Z","author":{"@type":"Person","name":"Lesan"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://lesanouo.github.io/blog/posts/knowledge/redis%E5%B8%B8%E8%A7%81%E7%94%A8%E9%80%94/"},"publisher":{"@type":"Organization","name":"Lesan's Blog","logo":{"@type":"ImageObject","url":"https://lesanouo.github.io/blog/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://lesanouo.github.io/blog/ accesskey=h title="Lesan's Blog (Alt + H)">Lesan's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://lesanouo.github.io/blog/archives title="ğŸ“š å½’æ¡£"><span>ğŸ“š å½’æ¡£</span></a></li><li><a href=https://lesanouo.github.io/blog/categories/ title="ğŸ—ƒï¸ åˆ†ç±»"><span>ğŸ—ƒï¸ åˆ†ç±»</span></a></li><li><a href=https://lesanouo.github.io/blog/tags/ title="ğŸ·ï¸ æ ‡ç­¾"><span>ğŸ·ï¸ æ ‡ç­¾</span></a></li><li><a href=https://lesanouo.github.io/blog/search/ title="ğŸ” æœç´¢"><span>ğŸ” æœç´¢</span></a></li><li><a href=https://lesanouo.github.io/blog/about/ title="ğŸ‘¨â€ğŸ’» å…³äºæˆ‘"><span>ğŸ‘¨â€ğŸ’» å…³äºæˆ‘</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://lesanouo.github.io/blog/>Home</a>&nbsp;Â»&nbsp;<a href=https://lesanouo.github.io/blog/posts/>ğŸ“š åšå®¢</a></div><h1 class="post-title entry-hint-parent">Rediså¸¸è§ç”¨é€”</h1><div class=post-meta><span title='2023-06-30 00:00:00 +0000 UTC'>2023-06-30</span>&nbsp;Â·&nbsp;4 min&nbsp;Â·&nbsp;Lesan</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#1%e7%bc%93%e5%ad%98 aria-label=1ã€ç¼“å­˜>1ã€ç¼“å­˜</a></li><li><a href=#2%e6%95%b0%e6%8d%ae%e5%85%b1%e4%ba%ab%e5%88%86%e5%b8%83%e5%bc%8f aria-label=2ã€æ•°æ®å…±äº«åˆ†å¸ƒå¼>2ã€æ•°æ®å…±äº«åˆ†å¸ƒå¼</a></li><li><a href=#3%e5%88%86%e5%b8%83%e5%bc%8f%e9%94%81 aria-label=3ã€åˆ†å¸ƒå¼é”>3ã€åˆ†å¸ƒå¼é”</a></li><li><a href=#4%e5%85%a8%e5%b1%80id aria-label=4ã€å…¨å±€ID>4ã€å…¨å±€ID</a></li><li><a href=#5%e8%ae%a1%e6%95%b0%e5%99%a8 aria-label=5ã€è®¡æ•°å™¨>5ã€è®¡æ•°å™¨</a></li><li><a href=#6%e9%99%90%e6%b5%81 aria-label=6ã€é™æµ>6ã€é™æµ</a></li><li><a href=#7%e4%bd%8d%e7%bb%9f%e8%ae%a1 aria-label=7ã€ä½ç»Ÿè®¡>7ã€ä½ç»Ÿè®¡</a></li><li><a href=#8%e8%b4%ad%e7%89%a9%e8%bd%a6 aria-label=8ã€è´­ç‰©è½¦>8ã€è´­ç‰©è½¦</a></li><li><a href=#9%e7%94%a8%e6%88%b7%e6%b6%88%e6%81%af%e6%97%b6%e9%97%b4%e7%ba%bftimeline aria-label=9ã€ç”¨æˆ·æ¶ˆæ¯æ—¶é—´çº¿timeline>9ã€ç”¨æˆ·æ¶ˆæ¯æ—¶é—´çº¿timeline</a></li><li><a href=#10%e6%b6%88%e6%81%af%e9%98%9f%e5%88%97 aria-label=10ã€æ¶ˆæ¯é˜Ÿåˆ—>10ã€æ¶ˆæ¯é˜Ÿåˆ—</a></li><li><a href=#11%e6%8a%bd%e5%a5%96 aria-label=11ã€æŠ½å¥–>11ã€æŠ½å¥–</a></li><li><a href=#12%e7%82%b9%e8%b5%9e%e7%ad%be%e5%88%b0%e6%89%93%e5%8d%a1 aria-label=12ã€ç‚¹èµã€ç­¾åˆ°ã€æ‰“å¡>12ã€ç‚¹èµã€ç­¾åˆ°ã€æ‰“å¡</a></li><li><a href=#13%e5%95%86%e5%93%81%e6%a0%87%e7%ad%be aria-label=13ã€å•†å“æ ‡ç­¾>13ã€å•†å“æ ‡ç­¾</a></li><li><a href=#14%e5%95%86%e5%93%81%e7%ad%9b%e9%80%89 aria-label=14ã€å•†å“ç­›é€‰>14ã€å•†å“ç­›é€‰</a></li><li><a href=#15%e7%94%a8%e6%88%b7%e5%85%b3%e6%b3%a8%e6%8e%a8%e8%8d%90%e6%a8%a1%e5%9e%8b aria-label=15ã€ç”¨æˆ·å…³æ³¨ã€æ¨èæ¨¡å‹>15ã€ç”¨æˆ·å…³æ³¨ã€æ¨èæ¨¡å‹</a></li><li><a href=#16%e6%8e%92%e8%a1%8c%e6%a6%9c aria-label=16ã€æ’è¡Œæ¦œ>16ã€æ’è¡Œæ¦œ</a></li></ul></div></details></div><div class=post-content><p>æœ¬ç¯‡æ–‡ç« ä¸»è¦ç®€è¦æ€»ç»“Redisçš„å¸¸è§ç”¨é€”</p><h2 id=1ç¼“å­˜>1ã€ç¼“å­˜<a hidden class=anchor aria-hidden=true href=#1ç¼“å­˜>#</a></h2><p>Stringç±»å‹</p><p>ä¾‹å¦‚ï¼šçƒ­ç‚¹æ•°æ®ç¼“å­˜ï¼ˆä¾‹å¦‚æŠ¥è¡¨ã€æ˜æ˜Ÿå‡ºè½¨ï¼‰ï¼Œå¯¹è±¡ç¼“å­˜ã€å…¨é¡µç¼“å­˜ã€å¯ä»¥æå‡çƒ­ç‚¹æ•°æ®çš„è®¿é—®æ•°æ®ã€‚</p><h2 id=2æ•°æ®å…±äº«åˆ†å¸ƒå¼>2ã€æ•°æ®å…±äº«åˆ†å¸ƒå¼<a hidden class=anchor aria-hidden=true href=#2æ•°æ®å…±äº«åˆ†å¸ƒå¼>#</a></h2><p>String ç±»å‹ï¼Œå› ä¸º Redis æ˜¯åˆ†å¸ƒå¼çš„ç‹¬ç«‹æœåŠ¡ï¼Œå¯ä»¥åœ¨å¤šä¸ªåº”ç”¨ä¹‹é—´å…±äº«</p><p>ä¾‹å¦‚ï¼šåˆ†å¸ƒå¼Session</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=nt>&lt;groupId&gt;</span>org.springframework.session<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=nt>&lt;artifactId&gt;</span>spring-session-data-redis<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependency&gt;</span>
</span></span></code></pre></div><h2 id=3åˆ†å¸ƒå¼é”>3ã€åˆ†å¸ƒå¼é”<a hidden class=anchor aria-hidden=true href=#3åˆ†å¸ƒå¼é”>#</a></h2><p>String ç±»å‹setnxæ–¹æ³•ï¼Œåªæœ‰ä¸å­˜åœ¨æ—¶æ‰èƒ½æ·»åŠ æˆåŠŸï¼Œè¿”å›true</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>getLock</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Long</span><span class=w> </span><span class=n>flag</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>jedis</span><span class=p>.</span><span class=na>setnx</span><span class=p>(</span><span class=n>key</span><span class=p>,</span><span class=w> </span><span class=s>&#34;1&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>flag</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>1</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>jedis</span><span class=p>.</span><span class=na>expire</span><span class=p>(</span><span class=n>key</span><span class=p>,</span><span class=w> </span><span class=n>10</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>flag</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>1</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>releaseLock</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>key</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>jedis</span><span class=p>.</span><span class=na>del</span><span class=p>(</span><span class=n>key</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h2 id=4å…¨å±€id>4ã€å…¨å±€ID<a hidden class=anchor aria-hidden=true href=#4å…¨å±€id>#</a></h2><p>intç±»å‹ï¼Œincrbyï¼Œåˆ©ç”¨åŸå­æ€§</p><p>incrby userid 1000</p><p>åˆ†åº“åˆ†è¡¨çš„åœºæ™¯ï¼Œä¸€æ¬¡æ€§æ‹¿ä¸€æ®µ</p><h2 id=5è®¡æ•°å™¨>5ã€è®¡æ•°å™¨<a hidden class=anchor aria-hidden=true href=#5è®¡æ•°å™¨>#</a></h2><p>intç±»å‹ï¼Œincræ–¹æ³•</p><p>ä¾‹å¦‚ï¼šæ–‡ç« çš„é˜…è¯»é‡ã€å¾®åšç‚¹èµæ•°ã€å…è®¸ä¸€å®šçš„å»¶è¿Ÿï¼Œå…ˆå†™å…¥Rediså†å®šæ—¶åŒæ­¥åˆ°æ•°æ®åº“</p><h2 id=6é™æµ>6ã€é™æµ<a hidden class=anchor aria-hidden=true href=#6é™æµ>#</a></h2><p>intç±»å‹ï¼Œincræ–¹æ³•</p><p>ä»¥è®¿é—®è€…çš„ipå’Œå…¶ä»–ä¿¡æ¯ä½œä¸ºkeyï¼Œè®¿é—®ä¸€æ¬¡å¢åŠ ä¸€æ¬¡è®¡æ•°ï¼Œè¶…è¿‡æ¬¡æ•°åˆ™è¿”å›false</p><h2 id=7ä½ç»Ÿè®¡>7ã€ä½ç»Ÿè®¡<a hidden class=anchor aria-hidden=true href=#7ä½ç»Ÿè®¡>#</a></h2><p>Stringç±»å‹çš„bitcountï¼ˆ1.6.6çš„bitmapæ•°æ®ç»“æ„ä»‹ç»ï¼‰</p><p>å­—ç¬¦æ˜¯ä»¥8ä½äºŒè¿›åˆ¶å­˜å‚¨çš„</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>set</span> k1 a
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>setbit k1 <span class=m>6</span> <span class=m>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>setbit k1 <span class=m>7</span> <span class=m>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>get k1
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/* <span class=m>6</span> <span class=m>7</span> ä»£è¡¨çš„açš„äºŒè¿›åˆ¶ä½çš„ä¿®æ”¹
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>a å¯¹åº”çš„ASCIIç æ˜¯97ï¼Œè½¬æ¢ä¸ºäºŒè¿›åˆ¶æ•°æ®æ˜¯01100001
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>b å¯¹åº”çš„ASCIIç æ˜¯98ï¼Œè½¬æ¢ä¸ºäºŒè¿›åˆ¶æ•°æ®æ˜¯01100010
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>å› ä¸ºbitéå¸¸èŠ‚çœç©ºé—´ï¼ˆ1 <span class=nv>MB</span><span class=o>=</span><span class=m>8388608</span> bitï¼‰ï¼Œå¯ä»¥ç”¨æ¥åšå¤§æ•°æ®é‡çš„ç»Ÿè®¡ã€‚
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>*/
</span></span></code></pre></div><p>ä¾‹å¦‚ï¼šåœ¨çº¿ç”¨æˆ·ç»Ÿè®¡ï¼Œç•™å­˜ç”¨æˆ·ç»Ÿè®¡</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>setbit onlineusers <span class=m>01</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>setbit onlineusers <span class=m>11</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>setbit onlineusers <span class=m>20</span>
</span></span></code></pre></div><p>æ”¯æŒæŒ‰ä½ä¸ã€æŒ‰ä½æˆ–ç­‰ç­‰æ“ä½œ</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>BITOPANDdestkeykey<span class=o>[</span>key...<span class=o>]</span> ï¼Œå¯¹ä¸€ä¸ªæˆ–å¤šä¸ª key æ±‚é€»è¾‘å¹¶ï¼Œå¹¶å°†ç»“æœä¿å­˜åˆ° destkey ã€‚
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>BITOPORdestkeykey<span class=o>[</span>key...<span class=o>]</span> ï¼Œå¯¹ä¸€ä¸ªæˆ–å¤šä¸ª key æ±‚é€»è¾‘æˆ–ï¼Œå¹¶å°†ç»“æœä¿å­˜åˆ° destkey ã€‚
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>BITOPXORdestkeykey<span class=o>[</span>key...<span class=o>]</span> ï¼Œå¯¹ä¸€ä¸ªæˆ–å¤šä¸ª key æ±‚é€»è¾‘å¼‚æˆ–ï¼Œå¹¶å°†ç»“æœä¿å­˜åˆ° destkey ã€‚
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>BITOPNOTdestkeykey ï¼Œå¯¹ç»™å®š key æ±‚é€»è¾‘éï¼Œå¹¶å°†ç»“æœä¿å­˜åˆ° destkey ã€‚
</span></span></code></pre></div><p>è®¡ç®—å‡º7å¤©éƒ½åœ¨çº¿çš„ç”¨æˆ·</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>BITOP <span class=s2>&#34;AND&#34;</span> <span class=s2>&#34;7_days_both_online_users&#34;</span> <span class=s2>&#34;day_1_online_users&#34;</span> <span class=s2>&#34;day_2_online_users&#34;</span> ...  <span class=s2>&#34;day_7_online_users&#34;</span>
</span></span></code></pre></div><h2 id=8è´­ç‰©è½¦>8ã€è´­ç‰©è½¦<a hidden class=anchor aria-hidden=true href=#8è´­ç‰©è½¦>#</a></h2><p>String æˆ–hashã€‚æ‰€æœ‰Stringå¯ä»¥åšçš„hashéƒ½å¯ä»¥åš</p><ul><li><p>keyï¼šç”¨æˆ·idï¼›fieldï¼šå•†å“idï¼›valueï¼šå•†å“æ•°é‡ã€‚</p></li><li><p>+1ï¼šhincrã€‚-1ï¼šhdecrã€‚åˆ é™¤ï¼šhdelã€‚å…¨é€‰ï¼šhgetallã€‚å•†å“æ•°ï¼šhlenã€‚</p></li></ul><h2 id=9ç”¨æˆ·æ¶ˆæ¯æ—¶é—´çº¿timeline>9ã€ç”¨æˆ·æ¶ˆæ¯æ—¶é—´çº¿timeline<a hidden class=anchor aria-hidden=true href=#9ç”¨æˆ·æ¶ˆæ¯æ—¶é—´çº¿timeline>#</a></h2><p>listï¼ŒåŒå‘é“¾è¡¨ï¼Œç›´æ¥ä½œä¸ºtimelineå°±å¥½äº†ã€‚æ’å…¥æœ‰åº</p><h2 id=10æ¶ˆæ¯é˜Ÿåˆ—>10ã€æ¶ˆæ¯é˜Ÿåˆ—<a hidden class=anchor aria-hidden=true href=#10æ¶ˆæ¯é˜Ÿåˆ—>#</a></h2><p>Listæä¾›äº†ä¸¤ä¸ªé˜»å¡çš„å¼¹å‡ºæ“ä½œï¼šblpop/brpopï¼Œå¯ä»¥è®¾ç½®è¶…æ—¶æ—¶é—´</p><ul><li><p>blpopï¼šblpop key1 timeout ç§»é™¤å¹¶è·å–åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœåˆ—è¡¨æ²¡æœ‰å…ƒç´ ä¼šé˜»å¡åˆ—è¡¨ç›´åˆ°ç­‰å¾…è¶…æ—¶æˆ–å‘ç°å¯å¼¹å‡ºå…ƒç´ ä¸ºæ­¢ã€‚</p></li><li><p>brpopï¼šbrpop key1 timeout ç§»é™¤å¹¶è·å–åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœåˆ—è¡¨æ²¡æœ‰å…ƒç´ ä¼šé˜»å¡åˆ—è¡¨ç›´åˆ°ç­‰å¾…è¶…æ—¶æˆ–å‘ç°å¯å¼¹å‡ºå…ƒç´ ä¸ºæ­¢ã€‚</p></li></ul><p>ä¸Šé¢çš„æ“ä½œã€‚å…¶å®å°±æ˜¯javaçš„é˜»å¡é˜Ÿåˆ—ã€‚å­¦ä¹ çš„ä¸œè¥¿è¶Šå¤šã€‚å­¦ä¹ æˆæœ¬è¶Šä½</p><ul><li><p>é˜Ÿåˆ—ï¼šå…ˆè¿›å…ˆé™¤ï¼šrpush blpopï¼Œå·¦å¤´å³å°¾ï¼Œå³è¾¹è¿›å…¥é˜Ÿåˆ—ï¼Œå·¦è¾¹å‡ºé˜Ÿåˆ—</p></li><li><p>æ ˆï¼šå…ˆè¿›åå‡ºï¼šrpush brpop</p></li></ul><h2 id=11æŠ½å¥–>11ã€æŠ½å¥–<a hidden class=anchor aria-hidden=true href=#11æŠ½å¥–>#</a></h2><p>è‡ªå¸¦ä¸€ä¸ªéšæœºè·å¾—å€¼</p><pre tabindex=0><code>spop myset
</code></pre><h2 id=12ç‚¹èµç­¾åˆ°æ‰“å¡>12ã€ç‚¹èµã€ç­¾åˆ°ã€æ‰“å¡<a hidden class=anchor aria-hidden=true href=#12ç‚¹èµç­¾åˆ°æ‰“å¡>#</a></h2><p>å‡å¦‚ä¸Šé¢çš„å¾®åšIDæ˜¯t1001ï¼Œç”¨æˆ·IDæ˜¯u3001</p><p>ç”¨ like:t1001 æ¥ç»´æŠ¤ t1001 è¿™æ¡å¾®åšçš„æ‰€æœ‰ç‚¹èµç”¨æˆ·</p><ul><li><p>ç‚¹èµäº†è¿™æ¡å¾®åšï¼šsadd like:t1001 u3001</p></li><li><p>å–æ¶ˆç‚¹èµï¼šsrem like:t1001 u3001</p></li><li><p>æ˜¯å¦ç‚¹èµï¼šsismember like:t1001 u3001</p></li><li><p>ç‚¹èµçš„æ‰€æœ‰ç”¨æˆ·ï¼šsmembers like:t1001</p></li><li><p>ç‚¹èµæ•°ï¼šscard like:t1001</p></li></ul><p>æ˜¯ä¸æ˜¯æ¯”æ•°æ®åº“ç®€å•å¤šäº†ã€‚</p><h2 id=13å•†å“æ ‡ç­¾>13ã€å•†å“æ ‡ç­¾<a hidden class=anchor aria-hidden=true href=#13å•†å“æ ‡ç­¾>#</a></h2><p>è€è§„çŸ©ï¼Œç”¨ tags:i5001 æ¥ç»´æŠ¤å•†å“æ‰€æœ‰çš„æ ‡ç­¾ã€‚</p><ul><li><p>sadd tags:i5001 ç”»é¢æ¸…æ™°ç»†è…»</p></li><li><p>sadd tags:i5001 çœŸå½©æ¸…æ™°æ˜¾ç¤ºå±</p></li><li><p>sadd tags:i5001 æµç¨‹è‡³æ</p></li></ul><h2 id=14å•†å“ç­›é€‰>14ã€å•†å“ç­›é€‰<a hidden class=anchor aria-hidden=true href=#14å•†å“ç­›é€‰>#</a></h2><pre tabindex=0><code>// è·å–å·®é›†

sdiff set1 set2

// è·å–äº¤é›†ï¼ˆintersection ï¼‰

sinter set1 set2

// è·å–å¹¶é›†

sunion set1 set2
</code></pre><p>å‡å¦‚ï¼šiPhone11 ä¸Šå¸‚äº†</p><pre tabindex=0><code>sadd brand:apple iPhone11

sadd brand:ios iPhone11

sad screensize:6.0-6.24 iPhone11

sad screentype:lcd iPhone 11
</code></pre><p>èµ›é€‰å•†å“ï¼Œè‹¹æœçš„ã€iosçš„ã€å±å¹•åœ¨6.0-6.24ä¹‹é—´çš„ï¼Œå±å¹•æè´¨æ˜¯LCDå±å¹•</p><pre tabindex=0><code>sinter brand:apple brand:ios screensize:6.0-6.24 screentype:lcd
</code></pre><h2 id=15ç”¨æˆ·å…³æ³¨æ¨èæ¨¡å‹>15ã€ç”¨æˆ·å…³æ³¨ã€æ¨èæ¨¡å‹<a hidden class=anchor aria-hidden=true href=#15ç”¨æˆ·å…³æ³¨æ¨èæ¨¡å‹>#</a></h2><p>follow å…³æ³¨ fans ç²‰ä¸</p><p>ç›¸äº’å…³æ³¨ï¼š</p><ul><li><p>sadd 1:follow 2</p></li><li><p>sadd 2:fans 1</p></li><li><p>sadd 1:fans 2</p></li><li><p>sadd 2:follow 1</p></li></ul><p>æˆ‘å…³æ³¨çš„äººä¹Ÿå…³æ³¨äº†ä»–(å–äº¤é›†)ï¼š</p><ul><li>sinter 1:follow 2:fans</li></ul><p>å¯èƒ½è®¤è¯†çš„äººï¼š</p><ul><li><p>ç”¨æˆ·1å¯èƒ½è®¤è¯†çš„äºº(å·®é›†)ï¼šsdiff 2:follow 1:follow</p></li><li><p>ç”¨æˆ·2å¯èƒ½è®¤è¯†çš„äººï¼šsdiff 1:follow 2:follow</p></li></ul><h2 id=16æ’è¡Œæ¦œ>16ã€æ’è¡Œæ¦œ<a hidden class=anchor aria-hidden=true href=#16æ’è¡Œæ¦œ>#</a></h2><p>id ä¸º6001 çš„æ–°é—»ç‚¹å‡»æ•°åŠ 1ï¼š</p><pre tabindex=0><code>zincrby hotNews:20190926 1 n6001
</code></pre><p>è·å–ä»Šå¤©ç‚¹å‡»æœ€å¤šçš„15æ¡ï¼š</p><pre tabindex=0><code>zrevrange hotNews:20190926 0 15 withscores
</code></pre></div><footer class=post-footer><ul class=post-tags><li><a href=https://lesanouo.github.io/blog/tags/redis/>Redis</a></li></ul><nav class=paginav><a class=prev href=https://lesanouo.github.io/blog/posts/knowledge/css%E5%AE%9E%E7%8E%B0%E9%98%B2%E6%AD%A2%E6%8C%89%E9%92%AE%E9%87%8D%E5%A4%8D%E7%82%B9%E5%87%BB/><span class=title>Â«</span><br><span>CSSå®ç°é˜²æ­¢æŒ‰é’®é‡å¤ç‚¹å‡»</span>
</a><a class=next href=https://lesanouo.github.io/blog/posts/operation/springboot%E8%87%AA%E5%BB%BAstarter%E5%BA%93/><span class=title>Â»</span><br><span>SpringBootè‡ªå»ºstarteråº“</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://lesanouo.github.io/blog/>Lesan's Blog</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>