<!doctype html><html lang=zh-cn dir=auto><head><script src="/blog/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=blog/livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>å¦‚ä½•æ›´ä¼˜é›…åœ°å®ç°ç­–ç•¥æ¨¡å¼ | Lesan's Blog</title><meta name=keywords content="è®¾è®¡æ¨¡å¼"><meta name=description content="ä»€ä¹ˆæ˜¯ç­–ç•¥æ¨¡å¼
ç­–ç•¥æ¨¡å¼ï¼Œåº”è¯¥æ˜¯å·¥ä½œä¸­æ¯”è¾ƒå¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œè°ƒç”¨æ–¹è‡ªå·±é€‰æ‹©ç”¨å“ªä¸€ç§ç­–ç•¥å®Œæˆå¯¹æ•°æ®çš„æ“ä½œï¼Œä¹Ÿå°±æ˜¯â€œä¸€ä¸ªç±»çš„è¡Œä¸ºæˆ–å…¶ç®—æ³•å¯ä»¥åœ¨è¿è¡Œæ—¶æ›´æ”¹â€ï¼Œå°†ä¸€äº›é™¤äº†è¿‡ç¨‹ä¸åŒå…¶ä»–éƒ½ä¸€æ ·çš„å‡½æ•°å°è£…æˆç­–ç•¥ï¼Œç„¶åè°ƒç”¨æ–¹è‡ªå·±å»é€‰æ‹©æƒ³è®©æ•°æ®æ‰§è¡Œä»€ä¹ˆè¿‡ç¨‹ç­–ç•¥ã€‚å¸¸è§çš„ä¾‹å­ä¸ºæ ¹æ®ç”¨æˆ·åˆ†ç±»æ¨èä¸åŒçš„æ’è¡Œæ¦œï¼ˆç”¨æˆ·å…³æ³¨ç‚¹ä¸ä¸€æ ·ï¼Œæ¨èæ¦œå•å°±ä¸ä¸€æ ·ï¼‰"><meta name=author content="Lesan"><link rel=canonical href=http://localhost:1313/blog/posts/knowledge/170187840001/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/blog/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/blog/favicon.ico><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/blog/favicon.ico><link rel=apple-touch-icon href=http://localhost:1313/blog/favicon.ico><link rel=mask-icon href=http://localhost:1313/blog/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh-cn href=http://localhost:1313/blog/posts/knowledge/170187840001/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:url" content="http://localhost:1313/blog/posts/knowledge/170187840001/"><meta property="og:site_name" content="Lesan's Blog"><meta property="og:title" content="å¦‚ä½•æ›´ä¼˜é›…åœ°å®ç°ç­–ç•¥æ¨¡å¼"><meta property="og:description" content="ä»€ä¹ˆæ˜¯ç­–ç•¥æ¨¡å¼ ç­–ç•¥æ¨¡å¼ï¼Œåº”è¯¥æ˜¯å·¥ä½œä¸­æ¯”è¾ƒå¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œè°ƒç”¨æ–¹è‡ªå·±é€‰æ‹©ç”¨å“ªä¸€ç§ç­–ç•¥å®Œæˆå¯¹æ•°æ®çš„æ“ä½œï¼Œä¹Ÿå°±æ˜¯â€œä¸€ä¸ªç±»çš„è¡Œä¸ºæˆ–å…¶ç®—æ³•å¯ä»¥åœ¨è¿è¡Œæ—¶æ›´æ”¹â€ï¼Œå°†ä¸€äº›é™¤äº†è¿‡ç¨‹ä¸åŒå…¶ä»–éƒ½ä¸€æ ·çš„å‡½æ•°å°è£…æˆç­–ç•¥ï¼Œç„¶åè°ƒç”¨æ–¹è‡ªå·±å»é€‰æ‹©æƒ³è®©æ•°æ®æ‰§è¡Œä»€ä¹ˆè¿‡ç¨‹ç­–ç•¥ã€‚å¸¸è§çš„ä¾‹å­ä¸ºæ ¹æ®ç”¨æˆ·åˆ†ç±»æ¨èä¸åŒçš„æ’è¡Œæ¦œï¼ˆç”¨æˆ·å…³æ³¨ç‚¹ä¸ä¸€æ ·ï¼Œæ¨èæ¦œå•å°±ä¸ä¸€æ ·ï¼‰"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-12-07T00:00:00+00:00"><meta property="article:modified_time" content="2023-12-07T00:00:00+00:00"><meta property="article:tag" content="è®¾è®¡æ¨¡å¼"><meta name=twitter:card content="summary"><meta name=twitter:title content="å¦‚ä½•æ›´ä¼˜é›…åœ°å®ç°ç­–ç•¥æ¨¡å¼"><meta name=twitter:description content="ä»€ä¹ˆæ˜¯ç­–ç•¥æ¨¡å¼
ç­–ç•¥æ¨¡å¼ï¼Œåº”è¯¥æ˜¯å·¥ä½œä¸­æ¯”è¾ƒå¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œè°ƒç”¨æ–¹è‡ªå·±é€‰æ‹©ç”¨å“ªä¸€ç§ç­–ç•¥å®Œæˆå¯¹æ•°æ®çš„æ“ä½œï¼Œä¹Ÿå°±æ˜¯â€œä¸€ä¸ªç±»çš„è¡Œä¸ºæˆ–å…¶ç®—æ³•å¯ä»¥åœ¨è¿è¡Œæ—¶æ›´æ”¹â€ï¼Œå°†ä¸€äº›é™¤äº†è¿‡ç¨‹ä¸åŒå…¶ä»–éƒ½ä¸€æ ·çš„å‡½æ•°å°è£…æˆç­–ç•¥ï¼Œç„¶åè°ƒç”¨æ–¹è‡ªå·±å»é€‰æ‹©æƒ³è®©æ•°æ®æ‰§è¡Œä»€ä¹ˆè¿‡ç¨‹ç­–ç•¥ã€‚å¸¸è§çš„ä¾‹å­ä¸ºæ ¹æ®ç”¨æˆ·åˆ†ç±»æ¨èä¸åŒçš„æ’è¡Œæ¦œï¼ˆç”¨æˆ·å…³æ³¨ç‚¹ä¸ä¸€æ ·ï¼Œæ¨èæ¦œå•å°±ä¸ä¸€æ ·ï¼‰"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"ğŸ“š åšå®¢","item":"http://localhost:1313/blog/posts/"},{"@type":"ListItem","position":2,"name":"å¦‚ä½•æ›´ä¼˜é›…åœ°å®ç°ç­–ç•¥æ¨¡å¼","item":"http://localhost:1313/blog/posts/knowledge/170187840001/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"å¦‚ä½•æ›´ä¼˜é›…åœ°å®ç°ç­–ç•¥æ¨¡å¼","name":"å¦‚ä½•æ›´ä¼˜é›…åœ°å®ç°ç­–ç•¥æ¨¡å¼","description":"ä»€ä¹ˆæ˜¯ç­–ç•¥æ¨¡å¼ ç­–ç•¥æ¨¡å¼ï¼Œåº”è¯¥æ˜¯å·¥ä½œä¸­æ¯”è¾ƒå¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œè°ƒç”¨æ–¹è‡ªå·±é€‰æ‹©ç”¨å“ªä¸€ç§ç­–ç•¥å®Œæˆå¯¹æ•°æ®çš„æ“ä½œï¼Œä¹Ÿå°±æ˜¯â€œä¸€ä¸ªç±»çš„è¡Œä¸ºæˆ–å…¶ç®—æ³•å¯ä»¥åœ¨è¿è¡Œæ—¶æ›´æ”¹â€ï¼Œå°†ä¸€äº›é™¤äº†è¿‡ç¨‹ä¸åŒå…¶ä»–éƒ½ä¸€æ ·çš„å‡½æ•°å°è£…æˆç­–ç•¥ï¼Œç„¶åè°ƒç”¨æ–¹è‡ªå·±å»é€‰æ‹©æƒ³è®©æ•°æ®æ‰§è¡Œä»€ä¹ˆè¿‡ç¨‹ç­–ç•¥ã€‚å¸¸è§çš„ä¾‹å­ä¸ºæ ¹æ®ç”¨æˆ·åˆ†ç±»æ¨èä¸åŒçš„æ’è¡Œæ¦œï¼ˆç”¨æˆ·å…³æ³¨ç‚¹ä¸ä¸€æ ·ï¼Œæ¨èæ¦œå•å°±ä¸ä¸€æ ·ï¼‰\n","keywords":["è®¾è®¡æ¨¡å¼"],"articleBody":"ä»€ä¹ˆæ˜¯ç­–ç•¥æ¨¡å¼ ç­–ç•¥æ¨¡å¼ï¼Œåº”è¯¥æ˜¯å·¥ä½œä¸­æ¯”è¾ƒå¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œè°ƒç”¨æ–¹è‡ªå·±é€‰æ‹©ç”¨å“ªä¸€ç§ç­–ç•¥å®Œæˆå¯¹æ•°æ®çš„æ“ä½œï¼Œä¹Ÿå°±æ˜¯â€œä¸€ä¸ªç±»çš„è¡Œä¸ºæˆ–å…¶ç®—æ³•å¯ä»¥åœ¨è¿è¡Œæ—¶æ›´æ”¹â€ï¼Œå°†ä¸€äº›é™¤äº†è¿‡ç¨‹ä¸åŒå…¶ä»–éƒ½ä¸€æ ·çš„å‡½æ•°å°è£…æˆç­–ç•¥ï¼Œç„¶åè°ƒç”¨æ–¹è‡ªå·±å»é€‰æ‹©æƒ³è®©æ•°æ®æ‰§è¡Œä»€ä¹ˆè¿‡ç¨‹ç­–ç•¥ã€‚å¸¸è§çš„ä¾‹å­ä¸ºæ ¹æ®ç”¨æˆ·åˆ†ç±»æ¨èä¸åŒçš„æ’è¡Œæ¦œï¼ˆç”¨æˆ·å…³æ³¨ç‚¹ä¸ä¸€æ ·ï¼Œæ¨èæ¦œå•å°±ä¸ä¸€æ ·ï¼‰\nå’Œå•ä¾‹æ¨¡å¼ä¸€æ ·ï¼Œéšç€æ—¶é—´å‘å±•ï¼Œä¸å†æ¨èç»å…¸ç­–ç•¥æ¨¡å¼ï¼Œæ›´æ¨èç®€å•ç­–ç•¥ç”¨æšä¸¾ç­–ç•¥æ¨¡å¼ï¼Œå¤æ‚åœ°ç”¨å·¥å‚ç­–ç•¥æ¨¡å¼ã€‚ä¸‹é¢å¼•å…¥ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬çš„éœ€æ±‚æ˜¯ï¼šå¯¹ä¸€ä»½è‚¡ç¥¨æ•°æ®åˆ—è¡¨ï¼Œç»™å‡ºä½ä»·æ¦œã€é«˜ä»·æ¦œã€æ¶¨å¹…æ¦œã€‚è¿™å…¶ä¸­åªæœ‰æ’åºæ¡ä»¶çš„åŒºåˆ«ï¼Œæ¯”è¾ƒé€‚åˆä½œä¸ºç­–ç•¥æ¨¡å¼çš„ä¾‹å­\nç»å…¸ç­–ç•¥æ¨¡å¼ æ•°æ®DTO\n@Data public class Stock { // è‚¡ç¥¨äº¤æ˜“ä»£ç  private String code; // ç°ä»· private Double price; // æ¶¨å¹… private Double rise; } æŠ½è±¡å¾—åˆ°çš„ç­–ç•¥æ¥å£\npublic interface Strategy { /** * å°†è‚¡ç¥¨åˆ—è¡¨æ’åº * * @param source æºæ•°æ® * @return æ’åºåçš„æ¦œå• */ List\u003cStock\u003e sort(List\u003cStock\u003e source); } å®ç°æˆ‘ä»¬çš„ç­–ç•¥ç±»\n/** * é«˜ä»·æ¦œ */ public class HighPriceRank implements Strategy { @Override public List\u003cStock\u003e sort(List\u003cStock\u003e source) { return source.stream() .sorted(Comparator.comparing(Stock::getPrice).reversed()) .collect(Collectors.toList()); } } /** * ä½ä»·æ¦œ */ public class LowPriceRank implements Strategy { @Override public List\u003cStock\u003e sort(List\u003cStock\u003e source) { return source.stream() .sorted(Comparator.comparing(Stock::getPrice)) .collect(Collectors.toList()); } } /** * é«˜æ¶¨å¹…æ¦œ */ public class HighRiseRank implements Strategy { @Override public List\u003cStock\u003e sort(List\u003cStock\u003e source) { return source.stream() .sorted(Comparator.comparing(Stock::getRise).reversed()) .collect(Collectors.toList()); } } ç»å…¸çš„Contextç±»\npublic class Context { private Strategy strategy; public void setStrategy(Strategy strategy) { this.strategy = strategy; } public List\u003cStock\u003e getRank(List\u003cStock\u003e source) { return strategy.sort(source); } } äºæ˜¯ æˆ‘ä»¬é¡ºç¤¼æˆç« åœ°å¾—åˆ°è°ƒç”¨ç±»â€“æ¦œå•å®ä¾‹ RankServiceImpl\n@Service public class RankServiceImpl { /** * dataService.getSource() æä¾›åŸå§‹çš„è‚¡ç¥¨æ•°æ® */ @Resource private DataService dataService; /** * å‰ç«¯ä¼ å…¥æ¦œå•ç±»å‹, è¿”å›æ’åºå®Œçš„æ¦œå• * * @param rankType æ¦œå•ç±»å‹ * @return æ¦œå•æ•°æ® */ public List\u003cStock\u003e getRank(String rankType) { // åˆ›å»ºä¸Šä¸‹æ–‡ Context context = new Context(); // è¿™é‡Œé€‰æ‹©ç­–ç•¥ switch (rankType) { case \"HighPrice\": context.setStrategy(new HighPriceRank()); break; case \"LowPrice\": context.setStrategy(new LowPriceRank()); break; case \"HighRise\": context.setStrategy(new HighRiseRank()); break; default: throw new IllegalArgumentException(\"rankType not found\"); } // ç„¶åæ‰§è¡Œç­–ç•¥ return context.getRank(dataService.getSource()); } } æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç»å…¸æ–¹æ³•ï¼Œåˆ›å»ºäº†ä¸€ä¸ªæ¥å£ã€ä¸‰ä¸ªç­–ç•¥ç±»ï¼Œè¿˜æ˜¯æ¯”è¾ƒå•°å—¦çš„ã€‚è°ƒç”¨ç±»çš„å®ç°ä¹Ÿå¾…å•†æ¦·ï¼Œæ–°å¢ä¸€ä¸ªç­–ç•¥ç±»è¿˜è¦ä¿®æ”¹æ¦œå•å®ä¾‹ï¼ˆå¯ä»¥ç”¨æŠ½è±¡å·¥å‚è§£å†³ï¼Œä½†æ˜¯å¤æ‚åº¦åˆä¸Šå‡äº†ï¼‰ã€‚åŠ ä¹‹æˆ‘ä»¬æœ‰æ›´å¥½çš„é€‰æ‹©ï¼Œæ‰€ä»¥æ­¤å¤„ä¸å†æ¨èç»å…¸ç­–ç•¥æ¨¡å¼ã€‚\nåŸºäºæšä¸¾çš„ç­–ç•¥æ¨¡å¼ è¿™é‡Œå¯¹è¿™ç§ç®€å•çš„ç­–ç•¥ï¼Œæ¨èç”¨æšä¸¾è¿›è¡Œä¼˜åŒ–ã€‚æšä¸¾çš„æœ¬è´¨æ˜¯åˆ›å»ºäº†ä¸€äº›é™æ€ç±»çš„é›†åˆã€‚\næˆ‘ä¸‹é¢ç›´æ¥ç»™å‡ºä¾‹å­ï¼Œå¤§å®¶å¯ä»¥ç›´è§‚æ„Ÿå—ä¸€ä¸‹\næšä¸¾ç­–ç•¥ç±»\npublic enum RankEnum { // ä»¥ä¸‹ä¸‰ä¸ªä¸ºç­–ç•¥å®ä¾‹ HighPrice { @Override public List\u003cStock\u003e sort(List\u003cStock\u003e source) { return source.stream() .sorted(Comparator.comparing(Stock::getPrice).reversed()) .collect(Collectors.toList()); } }, LowPrice { @Override public List\u003cStock\u003e sort(List\u003cStock\u003e source) { return source.stream() .sorted(Comparator.comparing(Stock::getPrice)) .collect(Collectors.toList()); } }, HighRise { @Override public List\u003cStock\u003e sort(List\u003cStock\u003e source) { return source.stream() .sorted(Comparator.comparing(Stock::getRise).reversed()) .collect(Collectors.toList()); } }; // è¿™é‡Œå®šä¹‰äº†ç­–ç•¥æ¥å£ public abstract List\u003cStock\u003e sort(List\u003cStock\u003e source); } å¯¹åº”çš„è°ƒç”¨ç±»ä¹Ÿå¾—ä»¥ä¼˜åŒ–ï¼Œæ¦œå•å®ä¾‹ RankServiceImpl\n@Service public class RankServiceImpl { /** * dataService.getSource() æä¾›åŸå§‹çš„è‚¡ç¥¨æ•°æ® */ @Resource private DataService dataService; /** * å‰ç«¯ä¼ å…¥æ¦œå•ç±»å‹, è¿”å›æ’åºå®Œçš„æ¦œå• * * @param rankType æ¦œå•ç±»å‹ å½¢ä¼¼ RankEnum.HighPrice.name() * @return æ¦œå•æ•°æ® */ public List\u003cStock\u003e getRank(String rankType) { // è·å–ç­–ç•¥ï¼Œè¿™é‡Œå¦‚æœæœªåŒ¹é…ä¼šæŠ› IllegalArgumentExceptionå¼‚å¸¸ RankEnum rank = RankEnum.valueOf(rankType); // ç„¶åæ‰§è¡Œç­–ç•¥ return rank.sort(dataService.getSource()); } } å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœç­–ç•¥ç®€å•çš„è¯ï¼ŒåŸºäºæšä¸¾çš„ç­–ç•¥æ¨¡å¼ä¼˜é›…è®¸å¤šï¼Œè°ƒç”¨æ–¹ä¹Ÿåšåˆ°äº†0ä¿®æ”¹ï¼Œä½†æ­£ç¡®åœ°ä½¿ç”¨æšä¸¾ç­–ç•¥æ¨¡å¼éœ€è¦é¢å¤–è€ƒè™‘ä»¥ä¸‹å‡ ç‚¹ã€‚\næšä¸¾çš„ç­–ç•¥ç±»æ˜¯å…¬ç”¨ä¸”é™æ€ï¼Œè¿™æ„å‘³ç€è¿™ä¸ªç­–ç•¥è¿‡ç¨‹ä¸èƒ½å¼•å…¥éé™æ€çš„éƒ¨åˆ†ï¼Œæ‰©å±•æ€§å—é™\nç­–ç•¥æ¨¡å¼çš„ç›®æ ‡ä¹‹ä¸€ï¼Œæ˜¯ä¼˜ç§€çš„æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œæœ€å¥½èƒ½æ–°å¢æˆ–ä¿®æ”¹æŸä¸€ç­–ç•¥ç±»æ—¶ï¼Œå¯¹å…¶ä»–ç±»æ˜¯æ— æ”¹åŠ¨çš„ã€‚è€Œæšä¸¾ç­–ç•¥å¦‚æœè¿‡å¤šæˆ–è€…è¿‡ç¨‹å¤æ‚ï¼Œç»´æŠ¤æ˜¯æ¯”è¾ƒå›°éš¾çš„ï¼Œå¯ç»´æŠ¤æ€§å—é™\nåŸºäºå·¥å‚çš„ç­–ç•¥æ¨¡å¼ ä¸ºäº†è§£å†³è‰¯å¥½çš„æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œæˆ‘æ›´æ¨èä»¥ä¸‹åˆ©ç”¨springè‡ªå¸¦beanFactoryçš„ä¼˜åŠ¿ï¼Œå®ç°ä¸€ä¸ªåŸºäºå·¥å‚çš„ç­–ç•¥æ¨¡å¼ã€‚ ç­–ç•¥ç±»æ”¹åŠ¨åªæ˜¯æ·»åŠ äº†@Serviceæ³¨è§£ï¼Œå¹¶æŒ‡å®šäº†Serviceçš„valueå±æ€§\n/** * é«˜ä»·æ¦œ * æ³¨æ„ç”³æ˜ Service.value = HighPrice,ä»–æ˜¯æˆ‘ä»¬çš„key,ä¸‹åŒ */ @Service(\"HighPrice\") public class HighPriceRank implements Strategy { @Override public List\u003cStock\u003e sort(List\u003cStock\u003e source) { return source.stream() .sorted(Comparator.comparing(Stock::getPrice).reversed()) .collect(Collectors.toList()); } } /** * ä½ä»·æ¦œ */ @Service(\"LowPrice\") public class LowPriceRank implements Strategy { @Override public List\u003cStock\u003e sort(List\u003cStock\u003e source) { return source.stream() .sorted(Comparator.comparing(Stock::getPrice)) .collect(Collectors.toList()); } } /** * é«˜æ¶¨å¹…æ¦œ */ @Service(\"HighRise\") public class HighRiseRank implements Strategy { @Override public List\u003cStock\u003e sort(List\u003cStock\u003e source) { return source.stream() .sorted(Comparator.comparing(Stock::getRise).reversed()) .collect(Collectors.toList()); } } è°ƒç”¨ç±»ä¿®æ”¹è¾ƒå¤§ï¼Œæ¥å…¥å€ŸåŠ©springå·¥å‚ç‰¹æ€§ï¼Œå®Œæˆç­–ç•¥ç±»\n@Service public class RankServiceImpl { /** * dataService.getSource() æä¾›åŸå§‹çš„è‚¡ç¥¨æ•°æ® */ @Resource private DataService dataService; /** * åˆ©ç”¨æ³¨è§£@Resourceå’Œ@Autowiredç‰¹æ€§,ç›´æ¥è·å–æ‰€æœ‰ç­–ç•¥ç±» * key = @Serviceçš„value */ @Resource private Map\u003cString, Strategy\u003e rankMap; /** * å‰ç«¯ä¼ å…¥æ¦œå•ç±»å‹, è¿”å›æ’åºå®Œçš„æ¦œå• * * @param rankType æ¦œå•ç±»å‹ å’ŒServiceæ³¨è§£çš„valueå±æ€§ä¸€è‡´ * @return æ¦œå•æ•°æ® */ public List\u003cStock\u003e getRank(String rankType) { // åˆ¤æ–­ç­–ç•¥æ˜¯å¦å­˜åœ¨ if (!rankMap.containsKey(rankType)) { throw new IllegalArgumentException(\"rankType not found\"); } // è·å¾—ç­–ç•¥å®ä¾‹ Strategy rank = rankMap.get(rankType); // æ‰§è¡Œç­–ç•¥ return rank.sort(dataService.getSource()); } } å·¥å‚ç­–ç•¥æ¨¡å¼ä¼šæ¯”æšä¸¾ç­–ç•¥æ¨¡å¼å•°å—¦ï¼Œä½†ä¹Ÿæ›´åŠ çµæ´»ã€æ˜“æ‰©å±•æ€§å’Œæ˜“ç»´æŠ¤ã€‚æ•…ç®€å•ç­–ç•¥æ¨èæšä¸¾ç­–ç•¥æ¨¡å¼ï¼Œå¤æ‚ç­–ç•¥æ‰æ¨èå·¥å‚ç­–ç•¥æ¨¡å¼ã€‚\n","wordCount":"1668","inLanguage":"zh-cn","datePublished":"2023-12-07T00:00:00Z","dateModified":"2023-12-07T00:00:00Z","author":{"@type":"Person","name":"Lesan"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/blog/posts/knowledge/170187840001/"},"publisher":{"@type":"Organization","name":"Lesan's Blog","logo":{"@type":"ImageObject","url":"http://localhost:1313/blog/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/blog/ accesskey=h title="Lesan's Blog (Alt + H)">Lesan's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/blog/archives title="ğŸ“š å½’æ¡£"><span>ğŸ“š å½’æ¡£</span></a></li><li><a href=http://localhost:1313/blog/categories/ title="ğŸ—ƒï¸ åˆ†ç±»"><span>ğŸ—ƒï¸ åˆ†ç±»</span></a></li><li><a href=http://localhost:1313/blog/tags/ title="ğŸ·ï¸ æ ‡ç­¾"><span>ğŸ·ï¸ æ ‡ç­¾</span></a></li><li><a href=http://localhost:1313/blog/search/ title="ğŸ” æœç´¢"><span>ğŸ” æœç´¢</span></a></li><li><a href=http://localhost:1313/blog/about/ title="ğŸ‘¨â€ğŸ’» å…³äºæˆ‘"><span>ğŸ‘¨â€ğŸ’» å…³äºæˆ‘</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/blog/>Home</a>&nbsp;Â»&nbsp;<a href=http://localhost:1313/blog/posts/>ğŸ“š åšå®¢</a></div><h1 class="post-title entry-hint-parent">å¦‚ä½•æ›´ä¼˜é›…åœ°å®ç°ç­–ç•¥æ¨¡å¼</h1><div class=post-meta><span title='2023-12-07 00:00:00 +0000 UTC'>2023-12-07</span>&nbsp;Â·&nbsp;4 min&nbsp;Â·&nbsp;Lesan</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e4%bb%80%e4%b9%88%e6%98%af%e7%ad%96%e7%95%a5%e6%a8%a1%e5%bc%8f aria-label=ä»€ä¹ˆæ˜¯ç­–ç•¥æ¨¡å¼>ä»€ä¹ˆæ˜¯ç­–ç•¥æ¨¡å¼</a></li><li><a href=#%e7%bb%8f%e5%85%b8%e7%ad%96%e7%95%a5%e6%a8%a1%e5%bc%8f aria-label=ç»å…¸ç­–ç•¥æ¨¡å¼>ç»å…¸ç­–ç•¥æ¨¡å¼</a></li><li><a href=#%e5%9f%ba%e4%ba%8e%e6%9e%9a%e4%b8%be%e7%9a%84%e7%ad%96%e7%95%a5%e6%a8%a1%e5%bc%8f aria-label=åŸºäºæšä¸¾çš„ç­–ç•¥æ¨¡å¼>åŸºäºæšä¸¾çš„ç­–ç•¥æ¨¡å¼</a></li><li><a href=#%e5%9f%ba%e4%ba%8e%e5%b7%a5%e5%8e%82%e7%9a%84%e7%ad%96%e7%95%a5%e6%a8%a1%e5%bc%8f aria-label=åŸºäºå·¥å‚çš„ç­–ç•¥æ¨¡å¼>åŸºäºå·¥å‚çš„ç­–ç•¥æ¨¡å¼</a></li></ul></div></details></div><div class=post-content><h2 id=ä»€ä¹ˆæ˜¯ç­–ç•¥æ¨¡å¼>ä»€ä¹ˆæ˜¯ç­–ç•¥æ¨¡å¼<a hidden class=anchor aria-hidden=true href=#ä»€ä¹ˆæ˜¯ç­–ç•¥æ¨¡å¼>#</a></h2><p>ç­–ç•¥æ¨¡å¼ï¼Œåº”è¯¥æ˜¯å·¥ä½œä¸­æ¯”è¾ƒå¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œè°ƒç”¨æ–¹è‡ªå·±é€‰æ‹©ç”¨å“ªä¸€ç§ç­–ç•¥å®Œæˆå¯¹æ•°æ®çš„æ“ä½œï¼Œä¹Ÿå°±æ˜¯â€œä¸€ä¸ªç±»çš„è¡Œä¸ºæˆ–å…¶ç®—æ³•å¯ä»¥åœ¨è¿è¡Œæ—¶æ›´æ”¹â€ï¼Œå°†ä¸€äº›é™¤äº†è¿‡ç¨‹ä¸åŒå…¶ä»–éƒ½ä¸€æ ·çš„å‡½æ•°å°è£…æˆç­–ç•¥ï¼Œç„¶åè°ƒç”¨æ–¹è‡ªå·±å»é€‰æ‹©æƒ³è®©æ•°æ®æ‰§è¡Œä»€ä¹ˆè¿‡ç¨‹ç­–ç•¥ã€‚å¸¸è§çš„ä¾‹å­ä¸ºæ ¹æ®ç”¨æˆ·åˆ†ç±»æ¨èä¸åŒçš„æ’è¡Œæ¦œï¼ˆç”¨æˆ·å…³æ³¨ç‚¹ä¸ä¸€æ ·ï¼Œæ¨èæ¦œå•å°±ä¸ä¸€æ ·ï¼‰</p><p>å’Œå•ä¾‹æ¨¡å¼ä¸€æ ·ï¼Œéšç€æ—¶é—´å‘å±•ï¼Œä¸å†æ¨èç»å…¸ç­–ç•¥æ¨¡å¼ï¼Œæ›´æ¨èç®€å•ç­–ç•¥ç”¨æšä¸¾ç­–ç•¥æ¨¡å¼ï¼Œå¤æ‚åœ°ç”¨å·¥å‚ç­–ç•¥æ¨¡å¼ã€‚ä¸‹é¢å¼•å…¥ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬çš„éœ€æ±‚æ˜¯ï¼šå¯¹ä¸€ä»½è‚¡ç¥¨æ•°æ®åˆ—è¡¨ï¼Œç»™å‡ºä½ä»·æ¦œã€é«˜ä»·æ¦œã€æ¶¨å¹…æ¦œã€‚è¿™å…¶ä¸­åªæœ‰æ’åºæ¡ä»¶çš„åŒºåˆ«ï¼Œæ¯”è¾ƒé€‚åˆä½œä¸ºç­–ç•¥æ¨¡å¼çš„ä¾‹å­</p><h2 id=ç»å…¸ç­–ç•¥æ¨¡å¼>ç»å…¸ç­–ç•¥æ¨¡å¼<a hidden class=anchor aria-hidden=true href=#ç»å…¸ç­–ç•¥æ¨¡å¼>#</a></h2><p>æ•°æ®DTO</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>Stock</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// è‚¡ç¥¨äº¤æ˜“ä»£ç </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>code</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// ç°ä»·</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>Double</span><span class=w> </span><span class=n>price</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// æ¶¨å¹…</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>Double</span><span class=w> </span><span class=n>rise</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>æŠ½è±¡å¾—åˆ°çš„ç­–ç•¥æ¥å£</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>interface</span> <span class=nc>Strategy</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * å°†è‚¡ç¥¨åˆ—è¡¨æ’åº
</span></span></span><span class=line><span class=cl><span class=cm>     *
</span></span></span><span class=line><span class=cl><span class=cm>     * @param source æºæ•°æ®
</span></span></span><span class=line><span class=cl><span class=cm>     * @return æ’åºåçš„æ¦œå•
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=nf>sort</span><span class=p>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=n>source</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>å®ç°æˆ‘ä»¬çš„ç­–ç•¥ç±»</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * é«˜ä»·æ¦œ
</span></span></span><span class=line><span class=cl><span class=cm> */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>HighPriceRank</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>Strategy</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=nf>sort</span><span class=p>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=n>source</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>source</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>sorted</span><span class=p>(</span><span class=n>Comparator</span><span class=p>.</span><span class=na>comparing</span><span class=p>(</span><span class=n>Stock</span><span class=p>::</span><span class=n>getPrice</span><span class=p>).</span><span class=na>reversed</span><span class=p>())</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>collect</span><span class=p>(</span><span class=n>Collectors</span><span class=p>.</span><span class=na>toList</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * ä½ä»·æ¦œ
</span></span></span><span class=line><span class=cl><span class=cm> */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>LowPriceRank</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>Strategy</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=nf>sort</span><span class=p>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=n>source</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>source</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>sorted</span><span class=p>(</span><span class=n>Comparator</span><span class=p>.</span><span class=na>comparing</span><span class=p>(</span><span class=n>Stock</span><span class=p>::</span><span class=n>getPrice</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>collect</span><span class=p>(</span><span class=n>Collectors</span><span class=p>.</span><span class=na>toList</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * é«˜æ¶¨å¹…æ¦œ
</span></span></span><span class=line><span class=cl><span class=cm> */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>HighRiseRank</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>Strategy</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=nf>sort</span><span class=p>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=n>source</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>source</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>sorted</span><span class=p>(</span><span class=n>Comparator</span><span class=p>.</span><span class=na>comparing</span><span class=p>(</span><span class=n>Stock</span><span class=p>::</span><span class=n>getRise</span><span class=p>).</span><span class=na>reversed</span><span class=p>())</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>collect</span><span class=p>(</span><span class=n>Collectors</span><span class=p>.</span><span class=na>toList</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>ç»å…¸çš„Contextç±»</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>Context</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>Strategy</span><span class=w> </span><span class=n>strategy</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>setStrategy</span><span class=p>(</span><span class=n>Strategy</span><span class=w> </span><span class=n>strategy</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>strategy</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>strategy</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=nf>getRank</span><span class=p>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=n>source</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>strategy</span><span class=p>.</span><span class=na>sort</span><span class=p>(</span><span class=n>source</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>äºæ˜¯ æˆ‘ä»¬é¡ºç¤¼æˆç« åœ°å¾—åˆ°è°ƒç”¨ç±»&ndash;æ¦œå•å®ä¾‹ <code>RankServiceImpl</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>RankServiceImpl</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * dataService.getSource() æä¾›åŸå§‹çš„è‚¡ç¥¨æ•°æ®
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Resource</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>DataService</span><span class=w> </span><span class=n>dataService</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * å‰ç«¯ä¼ å…¥æ¦œå•ç±»å‹, è¿”å›æ’åºå®Œçš„æ¦œå•
</span></span></span><span class=line><span class=cl><span class=cm>     *
</span></span></span><span class=line><span class=cl><span class=cm>     * @param rankType æ¦œå•ç±»å‹
</span></span></span><span class=line><span class=cl><span class=cm>     * @return æ¦œå•æ•°æ®
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=nf>getRank</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>rankType</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// åˆ›å»ºä¸Šä¸‹æ–‡</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Context</span><span class=w> </span><span class=n>context</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Context</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// è¿™é‡Œé€‰æ‹©ç­–ç•¥</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>switch</span><span class=w> </span><span class=p>(</span><span class=n>rankType</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>case</span><span class=w> </span><span class=s>&#34;HighPrice&#34;</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>context</span><span class=p>.</span><span class=na>setStrategy</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>HighPriceRank</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>break</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>case</span><span class=w> </span><span class=s>&#34;LowPrice&#34;</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>context</span><span class=p>.</span><span class=na>setStrategy</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>LowPriceRank</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>break</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>case</span><span class=w> </span><span class=s>&#34;HighRise&#34;</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>context</span><span class=p>.</span><span class=na>setStrategy</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>HighRiseRank</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>break</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>default</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>IllegalArgumentException</span><span class=p>(</span><span class=s>&#34;rankType not found&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// ç„¶åæ‰§è¡Œç­–ç•¥</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>context</span><span class=p>.</span><span class=na>getRank</span><span class=p>(</span><span class=n>dataService</span><span class=p>.</span><span class=na>getSource</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç»å…¸æ–¹æ³•ï¼Œåˆ›å»ºäº†ä¸€ä¸ªæ¥å£ã€ä¸‰ä¸ªç­–ç•¥ç±»ï¼Œè¿˜æ˜¯æ¯”è¾ƒå•°å—¦çš„ã€‚è°ƒç”¨ç±»çš„å®ç°ä¹Ÿå¾…å•†æ¦·ï¼Œæ–°å¢ä¸€ä¸ªç­–ç•¥ç±»è¿˜è¦ä¿®æ”¹æ¦œå•å®ä¾‹ï¼ˆå¯ä»¥ç”¨æŠ½è±¡å·¥å‚è§£å†³ï¼Œä½†æ˜¯å¤æ‚åº¦åˆä¸Šå‡äº†ï¼‰ã€‚åŠ ä¹‹æˆ‘ä»¬æœ‰æ›´å¥½çš„é€‰æ‹©ï¼Œæ‰€ä»¥æ­¤å¤„ä¸å†æ¨èç»å…¸ç­–ç•¥æ¨¡å¼ã€‚</p><h2 id=åŸºäºæšä¸¾çš„ç­–ç•¥æ¨¡å¼>åŸºäºæšä¸¾çš„ç­–ç•¥æ¨¡å¼<a hidden class=anchor aria-hidden=true href=#åŸºäºæšä¸¾çš„ç­–ç•¥æ¨¡å¼>#</a></h2><p>è¿™é‡Œå¯¹è¿™ç§ç®€å•çš„ç­–ç•¥ï¼Œæ¨èç”¨æšä¸¾è¿›è¡Œä¼˜åŒ–ã€‚æšä¸¾çš„æœ¬è´¨æ˜¯åˆ›å»ºäº†ä¸€äº›é™æ€ç±»çš„é›†åˆã€‚</p><p>æˆ‘ä¸‹é¢ç›´æ¥ç»™å‡ºä¾‹å­ï¼Œå¤§å®¶å¯ä»¥ç›´è§‚æ„Ÿå—ä¸€ä¸‹</p><p>æšä¸¾ç­–ç•¥ç±»</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>enum</span><span class=w> </span><span class=n>RankEnum</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// ä»¥ä¸‹ä¸‰ä¸ªä¸ºç­–ç•¥å®ä¾‹</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>HighPrice</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=nf>sort</span><span class=p>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=n>source</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>source</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=p>.</span><span class=na>sorted</span><span class=p>(</span><span class=n>Comparator</span><span class=p>.</span><span class=na>comparing</span><span class=p>(</span><span class=n>Stock</span><span class=p>::</span><span class=n>getPrice</span><span class=p>).</span><span class=na>reversed</span><span class=p>())</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=p>.</span><span class=na>collect</span><span class=p>(</span><span class=n>Collectors</span><span class=p>.</span><span class=na>toList</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>},</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>LowPrice</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=nf>sort</span><span class=p>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=n>source</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>source</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=p>.</span><span class=na>sorted</span><span class=p>(</span><span class=n>Comparator</span><span class=p>.</span><span class=na>comparing</span><span class=p>(</span><span class=n>Stock</span><span class=p>::</span><span class=n>getPrice</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=p>.</span><span class=na>collect</span><span class=p>(</span><span class=n>Collectors</span><span class=p>.</span><span class=na>toList</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>},</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>HighRise</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=nf>sort</span><span class=p>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=n>source</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>source</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=p>.</span><span class=na>sorted</span><span class=p>(</span><span class=n>Comparator</span><span class=p>.</span><span class=na>comparing</span><span class=p>(</span><span class=n>Stock</span><span class=p>::</span><span class=n>getRise</span><span class=p>).</span><span class=na>reversed</span><span class=p>())</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=p>.</span><span class=na>collect</span><span class=p>(</span><span class=n>Collectors</span><span class=p>.</span><span class=na>toList</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>};</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// è¿™é‡Œå®šä¹‰äº†ç­–ç•¥æ¥å£</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>abstract</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=nf>sort</span><span class=p>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=n>source</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>å¯¹åº”çš„è°ƒç”¨ç±»ä¹Ÿå¾—ä»¥ä¼˜åŒ–ï¼Œæ¦œå•å®ä¾‹ <code>RankServiceImpl</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>RankServiceImpl</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * dataService.getSource() æä¾›åŸå§‹çš„è‚¡ç¥¨æ•°æ®
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Resource</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>DataService</span><span class=w> </span><span class=n>dataService</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * å‰ç«¯ä¼ å…¥æ¦œå•ç±»å‹, è¿”å›æ’åºå®Œçš„æ¦œå•
</span></span></span><span class=line><span class=cl><span class=cm>     *
</span></span></span><span class=line><span class=cl><span class=cm>     * @param rankType æ¦œå•ç±»å‹ å½¢ä¼¼ RankEnum.HighPrice.name()
</span></span></span><span class=line><span class=cl><span class=cm>     * @return æ¦œå•æ•°æ®
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=nf>getRank</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>rankType</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// è·å–ç­–ç•¥ï¼Œè¿™é‡Œå¦‚æœæœªåŒ¹é…ä¼šæŠ› IllegalArgumentExceptionå¼‚å¸¸</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>RankEnum</span><span class=w> </span><span class=n>rank</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>RankEnum</span><span class=p>.</span><span class=na>valueOf</span><span class=p>(</span><span class=n>rankType</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// ç„¶åæ‰§è¡Œç­–ç•¥</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>rank</span><span class=p>.</span><span class=na>sort</span><span class=p>(</span><span class=n>dataService</span><span class=p>.</span><span class=na>getSource</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœç­–ç•¥ç®€å•çš„è¯ï¼ŒåŸºäºæšä¸¾çš„ç­–ç•¥æ¨¡å¼ä¼˜é›…è®¸å¤šï¼Œè°ƒç”¨æ–¹ä¹Ÿåšåˆ°äº†0ä¿®æ”¹ï¼Œä½†æ­£ç¡®åœ°ä½¿ç”¨æšä¸¾ç­–ç•¥æ¨¡å¼éœ€è¦é¢å¤–è€ƒè™‘ä»¥ä¸‹å‡ ç‚¹ã€‚</p><ul><li><p>æšä¸¾çš„ç­–ç•¥ç±»æ˜¯å…¬ç”¨ä¸”é™æ€ï¼Œè¿™æ„å‘³ç€è¿™ä¸ªç­–ç•¥è¿‡ç¨‹ä¸èƒ½å¼•å…¥éé™æ€çš„éƒ¨åˆ†ï¼Œæ‰©å±•æ€§å—é™</p></li><li><p>ç­–ç•¥æ¨¡å¼çš„ç›®æ ‡ä¹‹ä¸€ï¼Œæ˜¯ä¼˜ç§€çš„æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œæœ€å¥½èƒ½æ–°å¢æˆ–ä¿®æ”¹æŸä¸€ç­–ç•¥ç±»æ—¶ï¼Œå¯¹å…¶ä»–ç±»æ˜¯æ— æ”¹åŠ¨çš„ã€‚è€Œæšä¸¾ç­–ç•¥å¦‚æœè¿‡å¤šæˆ–è€…è¿‡ç¨‹å¤æ‚ï¼Œç»´æŠ¤æ˜¯æ¯”è¾ƒå›°éš¾çš„ï¼Œå¯ç»´æŠ¤æ€§å—é™</p></li></ul><h2 id=åŸºäºå·¥å‚çš„ç­–ç•¥æ¨¡å¼>åŸºäºå·¥å‚çš„ç­–ç•¥æ¨¡å¼<a hidden class=anchor aria-hidden=true href=#åŸºäºå·¥å‚çš„ç­–ç•¥æ¨¡å¼>#</a></h2><p>ä¸ºäº†è§£å†³è‰¯å¥½çš„æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œæˆ‘æ›´æ¨èä»¥ä¸‹åˆ©ç”¨springè‡ªå¸¦beanFactoryçš„ä¼˜åŠ¿ï¼Œå®ç°ä¸€ä¸ªåŸºäºå·¥å‚çš„ç­–ç•¥æ¨¡å¼ã€‚
ç­–ç•¥ç±»æ”¹åŠ¨åªæ˜¯æ·»åŠ äº†<code>@Service</code>æ³¨è§£ï¼Œå¹¶æŒ‡å®šäº†Serviceçš„valueå±æ€§</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * é«˜ä»·æ¦œ
</span></span></span><span class=line><span class=cl><span class=cm> * æ³¨æ„ç”³æ˜ Service.value = HighPrice,ä»–æ˜¯æˆ‘ä»¬çš„key,ä¸‹åŒ
</span></span></span><span class=line><span class=cl><span class=cm> */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Service</span><span class=p>(</span><span class=s>&#34;HighPrice&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>HighPriceRank</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>Strategy</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=nf>sort</span><span class=p>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=n>source</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>source</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>sorted</span><span class=p>(</span><span class=n>Comparator</span><span class=p>.</span><span class=na>comparing</span><span class=p>(</span><span class=n>Stock</span><span class=p>::</span><span class=n>getPrice</span><span class=p>).</span><span class=na>reversed</span><span class=p>())</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>collect</span><span class=p>(</span><span class=n>Collectors</span><span class=p>.</span><span class=na>toList</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * ä½ä»·æ¦œ
</span></span></span><span class=line><span class=cl><span class=cm> */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Service</span><span class=p>(</span><span class=s>&#34;LowPrice&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>LowPriceRank</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>Strategy</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=nf>sort</span><span class=p>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=n>source</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>source</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>sorted</span><span class=p>(</span><span class=n>Comparator</span><span class=p>.</span><span class=na>comparing</span><span class=p>(</span><span class=n>Stock</span><span class=p>::</span><span class=n>getPrice</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>collect</span><span class=p>(</span><span class=n>Collectors</span><span class=p>.</span><span class=na>toList</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * é«˜æ¶¨å¹…æ¦œ
</span></span></span><span class=line><span class=cl><span class=cm> */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Service</span><span class=p>(</span><span class=s>&#34;HighRise&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>HighRiseRank</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>Strategy</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=nf>sort</span><span class=p>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=n>source</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>source</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>sorted</span><span class=p>(</span><span class=n>Comparator</span><span class=p>.</span><span class=na>comparing</span><span class=p>(</span><span class=n>Stock</span><span class=p>::</span><span class=n>getRise</span><span class=p>).</span><span class=na>reversed</span><span class=p>())</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>collect</span><span class=p>(</span><span class=n>Collectors</span><span class=p>.</span><span class=na>toList</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>è°ƒç”¨ç±»ä¿®æ”¹è¾ƒå¤§ï¼Œæ¥å…¥å€ŸåŠ©springå·¥å‚ç‰¹æ€§ï¼Œå®Œæˆç­–ç•¥ç±»</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>RankServiceImpl</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * dataService.getSource() æä¾›åŸå§‹çš„è‚¡ç¥¨æ•°æ®
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Resource</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>DataService</span><span class=w> </span><span class=n>dataService</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * åˆ©ç”¨æ³¨è§£@Resourceå’Œ@Autowiredç‰¹æ€§,ç›´æ¥è·å–æ‰€æœ‰ç­–ç•¥ç±»
</span></span></span><span class=line><span class=cl><span class=cm>     * key = @Serviceçš„value
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Resource</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>Strategy</span><span class=o>&gt;</span><span class=w> </span><span class=n>rankMap</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * å‰ç«¯ä¼ å…¥æ¦œå•ç±»å‹, è¿”å›æ’åºå®Œçš„æ¦œå•
</span></span></span><span class=line><span class=cl><span class=cm>     *
</span></span></span><span class=line><span class=cl><span class=cm>     * @param rankType æ¦œå•ç±»å‹ å’ŒServiceæ³¨è§£çš„valueå±æ€§ä¸€è‡´
</span></span></span><span class=line><span class=cl><span class=cm>     * @return æ¦œå•æ•°æ®
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=nf>getRank</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>rankType</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// åˆ¤æ–­ç­–ç•¥æ˜¯å¦å­˜åœ¨</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>rankMap</span><span class=p>.</span><span class=na>containsKey</span><span class=p>(</span><span class=n>rankType</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>IllegalArgumentException</span><span class=p>(</span><span class=s>&#34;rankType not found&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// è·å¾—ç­–ç•¥å®ä¾‹</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Strategy</span><span class=w> </span><span class=n>rank</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>rankMap</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>rankType</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// æ‰§è¡Œç­–ç•¥</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>rank</span><span class=p>.</span><span class=na>sort</span><span class=p>(</span><span class=n>dataService</span><span class=p>.</span><span class=na>getSource</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>å·¥å‚ç­–ç•¥æ¨¡å¼ä¼šæ¯”æšä¸¾ç­–ç•¥æ¨¡å¼å•°å—¦ï¼Œä½†ä¹Ÿæ›´åŠ çµæ´»ã€æ˜“æ‰©å±•æ€§å’Œæ˜“ç»´æŠ¤ã€‚æ•…ç®€å•ç­–ç•¥æ¨èæšä¸¾ç­–ç•¥æ¨¡å¼ï¼Œå¤æ‚ç­–ç•¥æ‰æ¨èå·¥å‚ç­–ç•¥æ¨¡å¼ã€‚</p></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/blog/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/>è®¾è®¡æ¨¡å¼</a></li></ul><nav class=paginav><a class=prev href=http://localhost:1313/blog/posts/knowledge/170196480001/><span class=title>Â«</span><br><span>Gitä¸­æé«˜æ•ˆç‡çš„5æ¡å‘½ä»¤</span>
</a><a class=next href=http://localhost:1313/blog/posts/knowledge/169954560001/><span class=title>Â»</span><br><span>ä¸€ä¸ªæŠ€æœ¯æ¶æ„çš„åä¾‹</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=http://localhost:1313/blog/>Lesan's Blog</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>