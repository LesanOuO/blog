<!doctype html><html lang=zh-cn dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Nginxé…ç½®Httpå’ŒHttpsæ­£å‘ä»£ç† | Lesan's Blog</title><meta name=keywords content="Nginx,ç½‘ç»œä»£ç†"><meta name=description content="Nginxé…ç½®httpä»£ç†éå¸¸ç®€å•ï¼Œç½‘ä¸Šæ•™ç¨‹ä¹Ÿå¾ˆå¤šï¼Œä½†æ˜¯æ— æ³•å¾ˆæ–¹ä¾¿çš„é…ç½®httpsä»£ç†ï¼Œæœ¬ç‰‡æ–‡ç« å°†è®°å½•æ­å»ºå¯ä»¥åŒæ—¶ä»£ç†httpå’Œhttpsçš„æœåŠ¡å™¨ã€‚"><meta name=author content="Lesan"><link rel=canonical href=https://lesanouo.github.io/blog/posts/operation/nginx%E9%85%8D%E7%BD%AEhttp%E5%92%8Chttps%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://lesanouo.github.io/blog/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://lesanouo.github.io/blog/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://lesanouo.github.io/blog/favicon.ico><link rel=apple-touch-icon href=https://lesanouo.github.io/blog/favicon.ico><link rel=mask-icon href=https://lesanouo.github.io/blog/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh-cn href=https://lesanouo.github.io/blog/posts/operation/nginx%E9%85%8D%E7%BD%AEhttp%E5%92%8Chttps%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:url" content="https://lesanouo.github.io/blog/posts/operation/nginx%E9%85%8D%E7%BD%AEhttp%E5%92%8Chttps%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86/"><meta property="og:site_name" content="Lesan's Blog"><meta property="og:title" content="Nginxé…ç½®Httpå’ŒHttpsæ­£å‘ä»£ç†"><meta property="og:description" content="Nginxé…ç½®httpä»£ç†éå¸¸ç®€å•ï¼Œç½‘ä¸Šæ•™ç¨‹ä¹Ÿå¾ˆå¤šï¼Œä½†æ˜¯æ— æ³•å¾ˆæ–¹ä¾¿çš„é…ç½®httpsä»£ç†ï¼Œæœ¬ç‰‡æ–‡ç« å°†è®°å½•æ­å»ºå¯ä»¥åŒæ—¶ä»£ç†httpå’Œhttpsçš„æœåŠ¡å™¨ã€‚"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-11-26T00:00:00+00:00"><meta property="article:modified_time" content="2022-11-26T00:00:00+00:00"><meta property="article:tag" content="Nginx"><meta property="article:tag" content="ç½‘ç»œä»£ç†"><meta name=twitter:card content="summary"><meta name=twitter:title content="Nginxé…ç½®Httpå’ŒHttpsæ­£å‘ä»£ç†"><meta name=twitter:description content="Nginxé…ç½®httpä»£ç†éå¸¸ç®€å•ï¼Œç½‘ä¸Šæ•™ç¨‹ä¹Ÿå¾ˆå¤šï¼Œä½†æ˜¯æ— æ³•å¾ˆæ–¹ä¾¿çš„é…ç½®httpsä»£ç†ï¼Œæœ¬ç‰‡æ–‡ç« å°†è®°å½•æ­å»ºå¯ä»¥åŒæ—¶ä»£ç†httpå’Œhttpsçš„æœåŠ¡å™¨ã€‚"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"ğŸ“š åšå®¢","item":"https://lesanouo.github.io/blog/posts/"},{"@type":"ListItem","position":2,"name":"Nginxé…ç½®Httpå’ŒHttpsæ­£å‘ä»£ç†","item":"https://lesanouo.github.io/blog/posts/operation/nginx%E9%85%8D%E7%BD%AEhttp%E5%92%8Chttps%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Nginxé…ç½®Httpå’ŒHttpsæ­£å‘ä»£ç†","name":"Nginxé…ç½®Httpå’ŒHttpsæ­£å‘ä»£ç†","description":"Nginxé…ç½®httpä»£ç†éå¸¸ç®€å•ï¼Œç½‘ä¸Šæ•™ç¨‹ä¹Ÿå¾ˆå¤šï¼Œä½†æ˜¯æ— æ³•å¾ˆæ–¹ä¾¿çš„é…ç½®httpsä»£ç†ï¼Œæœ¬ç‰‡æ–‡ç« å°†è®°å½•æ­å»ºå¯ä»¥åŒæ—¶ä»£ç†httpå’Œhttpsçš„æœåŠ¡å™¨ã€‚\n","keywords":["Nginx","ç½‘ç»œä»£ç†"],"articleBody":"Nginxé…ç½®httpä»£ç†éå¸¸ç®€å•ï¼Œç½‘ä¸Šæ•™ç¨‹ä¹Ÿå¾ˆå¤šï¼Œä½†æ˜¯æ— æ³•å¾ˆæ–¹ä¾¿çš„é…ç½®httpsä»£ç†ï¼Œæœ¬ç‰‡æ–‡ç« å°†è®°å½•æ­å»ºå¯ä»¥åŒæ—¶ä»£ç†httpå’Œhttpsçš„æœåŠ¡å™¨ã€‚\nå‡†å¤‡å·¥ä½œ é¦–å…ˆæˆ‘ä»¬å¾—éœ€è¦ä¸‹è½½NginxåŠç¬¬ä¸‰æ–¹æ¨¡å—ngx_http_proxy_connect_module\nwget http://nginx.org/download/nginx-1.18.0.tar.gz wget https://github.com/chobits/ngx_http_proxy_connect_module/archive/master.zip å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œngx_http_proxy_connect_moduleç¬¬ä¸‰æ–¹æ¨¡å—ä¸Nginx æœ‰ç‰ˆæœ¬å¯¹åº”å…³ç³»ï¼Œéœ€è¦åœ¨å…¶å®˜ç½‘ç¡®å®šç‰ˆæœ¬å¯¹åº”å…³ç³»ã€‚\nå®‰è£…ç¨‹åº å°†åˆšåˆšä¸‹å¥½çš„ç¨‹åºè¿›è¡Œè§£å‹å®‰è£…\n#è§£å‹Nginx tar -zxvf nginx-1.18.0.tar.gz #è§£å‹ngx_http_proxy_connect_module unzip master.zip cd nginx-1.18.0 #æ‰“è¡¥ä¸ï¼Œç‰ˆæœ¬éœ€æ³¨æ„ patch -p1 \u003c /path/to/ngx_http_proxy_connect_module/patch/proxy_connect.patch #æ‰§è¡Œç¼–è¯‘å‘½ä»¤ ./configure --prefix=/usr/share/nginx --add-module=/path/to/ngx_http_proxy_connect_module make \u0026\u0026 make install é…ç½® Nginx æ­£å‘ä»£ç† é…ç½®nginx.confï¼Œåœ¨httpæ¨¡å—æ·»åŠ å¦‚ä¸‹é…ç½®å³å¯\nserver {\rresolver 114.114.114.114 ipv6=off; #DNSé…ç½®\rresolver_timeout 10s;\rlisten 8888;\rproxy_connect; #å¯ç”¨ CONNECT HTTPæ–¹æ³•\rproxy_connect_allow 443 80; #æŒ‡å®šä»£ç†CONNECTæ–¹æ³•å¯ä»¥è¿æ¥çš„ç«¯å£å·æˆ–èŒƒå›´çš„åˆ—è¡¨\rproxy_connect_connect_timeout 20s; #å®šä¹‰å®¢æˆ·ç«¯ä¸ä»£ç†æœåŠ¡å™¨å»ºç«‹è¿æ¥çš„è¶…æ—¶æ—¶é—´\rproxy_connect_read_timeout 20s; #å®šä¹‰å®¢æˆ·ç«¯ä»ä»£ç†æœåŠ¡å™¨è¯»å–å“åº”çš„è¶…æ—¶æ—¶é—´\rproxy_connect_send_timeout 20s; #è®¾ç½®å®¢æˆ·ç«¯å°†è¯·æ±‚ä¼ è¾“åˆ°ä»£ç†æœåŠ¡å™¨çš„è¶…æ—¶æ—¶é—´\rlocation / {\rproxy_pass $scheme://$http_host$request_uri;\r}\r} é…ç½®å®¢æˆ·ç«¯ä»£ç†æœåŠ¡å™¨ Linux æ‰“å¼€/etc/profileæ–‡ä»¶ï¼Œåœ¨æœ€ä¸‹é¢æ·»åŠ å¦‚ä¸‹é…ç½®å³å¯\n#httpä»£ç†ï¼Œipæ˜¯nginxçš„ipï¼Œç«¯å£æ˜¯nginxé…ç½®çš„ç›‘å¬ç«¯å£\rexport http_proxy=\"http://ip:8888\"\r#httpsä»£ç†\rexport https_proxy=\"http://ip:8888\"\r#ä¸éœ€è¦ä»£ç†çš„ip,è®¿é—®è¿™äº›ipï¼Œä¸ä¼šèµ°ä»£ç†\rexport no_proxy=\"127.0.0.1, localhost\" ä¸ºNginxé…ç½®systemctl åˆ›å»ºä¸€ä¸ªnginx.service åœ¨ /usr/lib/systemd/system/ ç›®å½•ä¸‹é¢æ–°å»ºä¸€ä¸ªnginx.serviceæ–‡ä»¶ï¼Œå¹¶èµ‹äºˆå¯æ‰§è¡Œçš„æƒé™ï¼š\nchmod +x /usr/lib/systemd/system/nginx.service\nç¼–è¾‘serviceå†…å®¹ vim /usr/lib/systemd/system/nginx.service\n[Unit] //å¯¹æœåŠ¡çš„è¯´æ˜\rDescription=nginx - high performance web server //æè¿°æœåŠ¡\rAfter=network.target remote-fs.target nss-lookup.target //æè¿°æœåŠ¡ç±»åˆ«\r[Service] //æœåŠ¡çš„ä¸€äº›å…·ä½“è¿è¡Œå‚æ•°çš„è®¾ç½®\rType=forking //åå°è¿è¡Œçš„å½¢å¼\rPIDFile=/usr/local/nginx/logs/nginx.pid //PIDæ–‡ä»¶çš„è·¯å¾„\rExecStartPre=/usr/local/nginx/sbin/nginx -t -c /usr/local/nginx/conf/nginx.conf //å¯åŠ¨å‡†å¤‡\rExecStart=/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf //å¯åŠ¨å‘½ä»¤\rExecReload=/usr/local/nginx/sbin/nginx -s reload //é‡å¯å‘½ä»¤\rExecStop=/usr/local/nginx/sbin/nginx -s stop //åœæ­¢å‘½ä»¤\rExecQuit=/usr/local/nginx/sbin/nginx -s quit //å¿«é€Ÿåœæ­¢\rPrivateTmp=true //ç»™æœåŠ¡åˆ†é…ä¸´æ—¶ç©ºé—´\r[Install]\rWantedBy=multi-user.target //æœåŠ¡ç”¨æˆ·çš„æ¨¡å¼ å¯åŠ¨æœåŠ¡ åœ¨å¯åŠ¨æœåŠ¡ä¹‹å‰ï¼Œéœ€è¦å…ˆé‡è½½systemctlå‘½ä»¤ systemctl daemon-reload systemctl start nginx.service ","wordCount":"833","inLanguage":"zh-cn","datePublished":"2022-11-26T00:00:00Z","dateModified":"2022-11-26T00:00:00Z","author":{"@type":"Person","name":"Lesan"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://lesanouo.github.io/blog/posts/operation/nginx%E9%85%8D%E7%BD%AEhttp%E5%92%8Chttps%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86/"},"publisher":{"@type":"Organization","name":"Lesan's Blog","logo":{"@type":"ImageObject","url":"https://lesanouo.github.io/blog/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://lesanouo.github.io/blog/ accesskey=h title="Lesan's Blog (Alt + H)">Lesan's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://lesanouo.github.io/blog/archives title="ğŸ“š å½’æ¡£"><span>ğŸ“š å½’æ¡£</span></a></li><li><a href=https://lesanouo.github.io/blog/categories/ title="ğŸ—ƒï¸ åˆ†ç±»"><span>ğŸ—ƒï¸ åˆ†ç±»</span></a></li><li><a href=https://lesanouo.github.io/blog/tags/ title="ğŸ·ï¸ æ ‡ç­¾"><span>ğŸ·ï¸ æ ‡ç­¾</span></a></li><li><a href=https://lesanouo.github.io/blog/search/ title="ğŸ” æœç´¢"><span>ğŸ” æœç´¢</span></a></li><li><a href=https://lesanouo.github.io/blog/about/ title="ğŸ‘¨â€ğŸ’» å…³äºæˆ‘"><span>ğŸ‘¨â€ğŸ’» å…³äºæˆ‘</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://lesanouo.github.io/blog/>Home</a>&nbsp;Â»&nbsp;<a href=https://lesanouo.github.io/blog/posts/>ğŸ“š åšå®¢</a></div><h1 class="post-title entry-hint-parent">Nginxé…ç½®Httpå’ŒHttpsæ­£å‘ä»£ç†</h1><div class=post-meta><span title='2022-11-26 00:00:00 +0000 UTC'>2022-11-26</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;Lesan</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%87%86%e5%a4%87%e5%b7%a5%e4%bd%9c aria-label=å‡†å¤‡å·¥ä½œ>å‡†å¤‡å·¥ä½œ</a></li><li><a href=#%e5%ae%89%e8%a3%85%e7%a8%8b%e5%ba%8f aria-label=å®‰è£…ç¨‹åº>å®‰è£…ç¨‹åº</a></li><li><a href=#%e9%85%8d%e7%bd%ae-nginx-%e6%ad%a3%e5%90%91%e4%bb%a3%e7%90%86 aria-label="é…ç½® Nginx æ­£å‘ä»£ç†">é…ç½® Nginx æ­£å‘ä»£ç†</a></li><li><a href=#%e9%85%8d%e7%bd%ae%e5%ae%a2%e6%88%b7%e7%ab%af%e4%bb%a3%e7%90%86%e6%9c%8d%e5%8a%a1%e5%99%a8 aria-label=é…ç½®å®¢æˆ·ç«¯ä»£ç†æœåŠ¡å™¨>é…ç½®å®¢æˆ·ç«¯ä»£ç†æœåŠ¡å™¨</a><ul><li><a href=#linux aria-label=Linux>Linux</a></li></ul></li><li><a href=#%e4%b8%banginx%e9%85%8d%e7%bd%aesystemctl aria-label=ä¸ºNginxé…ç½®systemctl>ä¸ºNginxé…ç½®systemctl</a><ul><li><a href=#%e5%88%9b%e5%bb%ba%e4%b8%80%e4%b8%aanginxservice aria-label=åˆ›å»ºä¸€ä¸ªnginx.service>åˆ›å»ºä¸€ä¸ªnginx.service</a></li><li><a href=#%e7%bc%96%e8%be%91service%e5%86%85%e5%ae%b9 aria-label=ç¼–è¾‘serviceå†…å®¹>ç¼–è¾‘serviceå†…å®¹</a></li><li><a href=#%e5%90%af%e5%8a%a8%e6%9c%8d%e5%8a%a1 aria-label=å¯åŠ¨æœåŠ¡>å¯åŠ¨æœåŠ¡</a></li></ul></li></ul></div></details></div><div class=post-content><p><code>Nginx</code>é…ç½®<code>http</code>ä»£ç†éå¸¸ç®€å•ï¼Œç½‘ä¸Šæ•™ç¨‹ä¹Ÿå¾ˆå¤šï¼Œä½†æ˜¯æ— æ³•å¾ˆæ–¹ä¾¿çš„é…ç½®<code>https</code>ä»£ç†ï¼Œæœ¬ç‰‡æ–‡ç« å°†è®°å½•æ­å»ºå¯ä»¥åŒæ—¶ä»£ç†<code>http</code>å’Œ<code>https</code>çš„æœåŠ¡å™¨ã€‚</p><h2 id=å‡†å¤‡å·¥ä½œ>å‡†å¤‡å·¥ä½œ<a hidden class=anchor aria-hidden=true href=#å‡†å¤‡å·¥ä½œ>#</a></h2><p>é¦–å…ˆæˆ‘ä»¬å¾—éœ€è¦ä¸‹è½½<code>Nginx</code>åŠç¬¬ä¸‰æ–¹æ¨¡å—<code>ngx_http_proxy_connect_module</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>wget http://nginx.org/download/nginx-1.18.0.tar.gz
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>wget https://github.com/chobits/ngx_http_proxy_connect_module/archive/master.zip
</span></span></code></pre></div><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ<code>ngx_http_proxy_connect_module</code>ç¬¬ä¸‰æ–¹æ¨¡å—ä¸<code>Nginx</code> æœ‰ç‰ˆæœ¬å¯¹åº”å…³ç³»ï¼Œéœ€è¦åœ¨å…¶<a href=https://github.com/chobits/ngx_http_proxy_connect_module>å®˜ç½‘</a>ç¡®å®šç‰ˆæœ¬å¯¹åº”å…³ç³»ã€‚</p><h2 id=å®‰è£…ç¨‹åº>å®‰è£…ç¨‹åº<a hidden class=anchor aria-hidden=true href=#å®‰è£…ç¨‹åº>#</a></h2><p>å°†åˆšåˆšä¸‹å¥½çš„ç¨‹åºè¿›è¡Œè§£å‹å®‰è£…</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>#è§£å‹Nginx</span>
</span></span><span class=line><span class=cl>tar -zxvf nginx-1.18.0.tar.gz
</span></span><span class=line><span class=cl><span class=c1>#è§£å‹ngx_http_proxy_connect_module</span>
</span></span><span class=line><span class=cl>unzip master.zip
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>cd</span> nginx-1.18.0
</span></span><span class=line><span class=cl><span class=c1>#æ‰“è¡¥ä¸ï¼Œç‰ˆæœ¬éœ€æ³¨æ„</span>
</span></span><span class=line><span class=cl>patch -p1 &lt; /path/to/ngx_http_proxy_connect_module/patch/proxy_connect.patch
</span></span><span class=line><span class=cl><span class=c1>#æ‰§è¡Œç¼–è¯‘å‘½ä»¤</span>
</span></span><span class=line><span class=cl>./configure  --prefix<span class=o>=</span>/usr/share/nginx --add-module<span class=o>=</span>/path/to/ngx_http_proxy_connect_module
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>make <span class=o>&amp;&amp;</span> make install
</span></span></code></pre></div><h2 id=é…ç½®-nginx-æ­£å‘ä»£ç†>é…ç½® Nginx æ­£å‘ä»£ç†<a hidden class=anchor aria-hidden=true href=#é…ç½®-nginx-æ­£å‘ä»£ç†>#</a></h2><p>é…ç½®<code>nginx.conf</code>ï¼Œåœ¨<code>http</code>æ¨¡å—æ·»åŠ å¦‚ä¸‹é…ç½®å³å¯</p><pre tabindex=0><code class=language-conf data-lang=conf>server {
    resolver 114.114.114.114 ipv6=off; #DNSé…ç½®
    resolver_timeout 10s;
    listen 8888;
    proxy_connect;                          #å¯ç”¨ CONNECT HTTPæ–¹æ³•
    proxy_connect_allow            443 80;  #æŒ‡å®šä»£ç†CONNECTæ–¹æ³•å¯ä»¥è¿æ¥çš„ç«¯å£å·æˆ–èŒƒå›´çš„åˆ—è¡¨
    proxy_connect_connect_timeout  20s;     #å®šä¹‰å®¢æˆ·ç«¯ä¸ä»£ç†æœåŠ¡å™¨å»ºç«‹è¿æ¥çš„è¶…æ—¶æ—¶é—´
    proxy_connect_read_timeout     20s;     #å®šä¹‰å®¢æˆ·ç«¯ä»ä»£ç†æœåŠ¡å™¨è¯»å–å“åº”çš„è¶…æ—¶æ—¶é—´
    proxy_connect_send_timeout     20s;     #è®¾ç½®å®¢æˆ·ç«¯å°†è¯·æ±‚ä¼ è¾“åˆ°ä»£ç†æœåŠ¡å™¨çš„è¶…æ—¶æ—¶é—´
    location / {
        proxy_pass $scheme://$http_host$request_uri;
    }
}
</code></pre><h2 id=é…ç½®å®¢æˆ·ç«¯ä»£ç†æœåŠ¡å™¨>é…ç½®å®¢æˆ·ç«¯ä»£ç†æœåŠ¡å™¨<a hidden class=anchor aria-hidden=true href=#é…ç½®å®¢æˆ·ç«¯ä»£ç†æœåŠ¡å™¨>#</a></h2><h3 id=linux>Linux<a hidden class=anchor aria-hidden=true href=#linux>#</a></h3><p>æ‰“å¼€/etc/profileæ–‡ä»¶ï¼Œåœ¨æœ€ä¸‹é¢æ·»åŠ å¦‚ä¸‹é…ç½®å³å¯</p><pre tabindex=0><code class=language-profile data-lang=profile>#httpä»£ç†ï¼Œipæ˜¯nginxçš„ipï¼Œç«¯å£æ˜¯nginxé…ç½®çš„ç›‘å¬ç«¯å£
export http_proxy=&#34;http://ip:8888&#34;
#httpsä»£ç†
export https_proxy=&#34;http://ip:8888&#34;
#ä¸éœ€è¦ä»£ç†çš„ip,è®¿é—®è¿™äº›ipï¼Œä¸ä¼šèµ°ä»£ç†
export no_proxy=&#34;127.0.0.1, localhost&#34;
</code></pre><h2 id=ä¸ºnginxé…ç½®systemctl>ä¸º<code>Nginx</code>é…ç½®<code>systemctl</code><a hidden class=anchor aria-hidden=true href=#ä¸ºnginxé…ç½®systemctl>#</a></h2><h3 id=åˆ›å»ºä¸€ä¸ªnginxservice>åˆ›å»ºä¸€ä¸ª<code>nginx.service</code><a hidden class=anchor aria-hidden=true href=#åˆ›å»ºä¸€ä¸ªnginxservice>#</a></h3><p>åœ¨ <code>/usr/lib/systemd/system/</code> ç›®å½•ä¸‹é¢æ–°å»ºä¸€ä¸ª<code>nginx.service</code>æ–‡ä»¶ï¼Œå¹¶èµ‹äºˆå¯æ‰§è¡Œçš„æƒé™ï¼š</p><p><code>chmod +x /usr/lib/systemd/system/nginx.service</code></p><h3 id=ç¼–è¾‘serviceå†…å®¹>ç¼–è¾‘serviceå†…å®¹<a hidden class=anchor aria-hidden=true href=#ç¼–è¾‘serviceå†…å®¹>#</a></h3><p><code>vim /usr/lib/systemd/system/nginx.service</code></p><pre tabindex=0><code>[Unit] //å¯¹æœåŠ¡çš„è¯´æ˜
Description=nginx - high performance web server //æè¿°æœåŠ¡
After=network.target remote-fs.target nss-lookup.target //æè¿°æœåŠ¡ç±»åˆ«

[Service] //æœåŠ¡çš„ä¸€äº›å…·ä½“è¿è¡Œå‚æ•°çš„è®¾ç½®
Type=forking //åå°è¿è¡Œçš„å½¢å¼
PIDFile=/usr/local/nginx/logs/nginx.pid //PIDæ–‡ä»¶çš„è·¯å¾„
ExecStartPre=/usr/local/nginx/sbin/nginx -t -c /usr/local/nginx/conf/nginx.conf //å¯åŠ¨å‡†å¤‡
ExecStart=/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf //å¯åŠ¨å‘½ä»¤
ExecReload=/usr/local/nginx/sbin/nginx -s reload //é‡å¯å‘½ä»¤
ExecStop=/usr/local/nginx/sbin/nginx -s stop //åœæ­¢å‘½ä»¤
ExecQuit=/usr/local/nginx/sbin/nginx -s quit //å¿«é€Ÿåœæ­¢
PrivateTmp=true //ç»™æœåŠ¡åˆ†é…ä¸´æ—¶ç©ºé—´

[Install]
WantedBy=multi-user.target //æœåŠ¡ç”¨æˆ·çš„æ¨¡å¼
</code></pre><h3 id=å¯åŠ¨æœåŠ¡>å¯åŠ¨æœåŠ¡<a hidden class=anchor aria-hidden=true href=#å¯åŠ¨æœåŠ¡>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>åœ¨å¯åŠ¨æœåŠ¡ä¹‹å‰ï¼Œéœ€è¦å…ˆé‡è½½systemctlå‘½ä»¤
</span></span><span class=line><span class=cl>systemctl daemon-reload
</span></span><span class=line><span class=cl>systemctl start nginx.service
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://lesanouo.github.io/blog/tags/nginx/>Nginx</a></li><li><a href=https://lesanouo.github.io/blog/tags/%E7%BD%91%E7%BB%9C%E4%BB%A3%E7%90%86/>ç½‘ç»œä»£ç†</a></li></ul><nav class=paginav><a class=prev href=https://lesanouo.github.io/blog/posts/knowledge/java%E4%B8%AD%E9%93%BE%E5%BC%8F%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0/><span class=title>Â«</span><br><span>Javaä¸­é“¾å¼ç¼–ç¨‹å­¦ä¹ </span>
</a><a class=next href=https://lesanouo.github.io/blog/posts/operation/springboot+redis%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81/><span class=title>Â»</span><br><span>SpringBoot+Rediså®ç°æ¥å£é™æµ</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://lesanouo.github.io/blog/>Lesan's Blog</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>