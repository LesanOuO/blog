<!doctype html><html lang=zh-cn dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Linux | Lesan's Blog</title><meta name=keywords content><meta name=description content="Lesan's Blog"><meta name=author content="Lesan"><link rel=canonical href=https://lesanouo.github.io/blog/tags/linux/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://lesanouo.github.io/blog/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://lesanouo.github.io/blog/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://lesanouo.github.io/blog/favicon.ico><link rel=apple-touch-icon href=https://lesanouo.github.io/blog/favicon.ico><link rel=mask-icon href=https://lesanouo.github.io/blog/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://lesanouo.github.io/blog/tags/linux/index.xml><link rel=alternate hreflang=zh-cn href=https://lesanouo.github.io/blog/tags/linux/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:url" content="https://lesanouo.github.io/blog/tags/linux/"><meta property="og:site_name" content="Lesan's Blog"><meta property="og:title" content="Linux"><meta property="og:description" content="Lesan's Blog"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Linux"><meta name=twitter:description content="Lesan's Blog"></head><body class="list dark" id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://lesanouo.github.io/blog/ accesskey=h title="Lesan's Blog (Alt + H)">Lesan's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://lesanouo.github.io/blog/archives title="ğŸ“š å½’æ¡£"><span>ğŸ“š å½’æ¡£</span></a></li><li><a href=https://lesanouo.github.io/blog/categories/ title="ğŸ—ƒï¸ åˆ†ç±»"><span>ğŸ—ƒï¸ åˆ†ç±»</span></a></li><li><a href=https://lesanouo.github.io/blog/tags/ title="ğŸ·ï¸ æ ‡ç­¾"><span>ğŸ·ï¸ æ ‡ç­¾</span></a></li><li><a href=https://lesanouo.github.io/blog/search/ title="ğŸ” æœç´¢"><span>ğŸ” æœç´¢</span></a></li><li><a href=https://lesanouo.github.io/blog/about/ title="ğŸ‘¨â€ğŸ’» å…³äºæˆ‘"><span>ğŸ‘¨â€ğŸ’» å…³äºæˆ‘</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://lesanouo.github.io/blog/>Home</a>&nbsp;Â»&nbsp;<a href=https://lesanouo.github.io/blog/tags/>ğŸ·ï¸ æ ‡ç­¾</a></div><h1>Linux
<a href=/blog/tags/linux/index.xml title=RSS aria-label=RSS><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="23"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Linuxç³»ç»Ÿä½¿ç”¨systemdé…ç½®.NETé¡¹ç›®å¼€æœºè‡ªå¯åŠ¨</h2></header><div class=entry-content><p>æœ¬ç‰‡æ–‡ç« è®°å½•åœ¨Linuxï¼ˆCentOS7ï¼‰ä¸­å¦‚ä½•ä½¿ç”¨systemctlå‘½ä»¤è¿›è¡Œç³»ç»Ÿå’ŒæœåŠ¡ç®¡ç†
systemctlå‘½ä»¤ # è®¾ç½®å¼€æœºè‡ªå¯åŠ¨ï¼Œå¯åœ¨ä»»æ„ç›®å½•ä¸‹æ‰§è¡Œ systemctl enable xxx.service # å¯åŠ¨nginxæœåŠ¡ systemctl start xxx.service # åœæ­¢å¼€æœºè‡ªå¯åŠ¨ systemctl disable xxx.service # æŸ¥çœ‹æœåŠ¡å½“å‰çŠ¶æ€ systemctl status xxx.service # é‡æ–°å¯åŠ¨æœåŠ¡ systemctl restart xxx.service # æŸ¥çœ‹æ‰€æœ‰å·²å¯åŠ¨çš„æœåŠ¡ systemctl list-units --type=service åˆ›å»ºxxx.service åœ¨/etc/systemd/system/è·¯å¾„ä¸‹ï¼Œæ–°å¢ä¸€ä¸ªmyTest.serviceæ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹
...</p></div><footer class=entry-footer><span title='2024-04-28 00:00:00 +0000 UTC'>2024-04-28</span>&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;Lesan</footer><a class=entry-link aria-label="post link to Linuxç³»ç»Ÿä½¿ç”¨systemdé…ç½®.NETé¡¹ç›®å¼€æœºè‡ªå¯åŠ¨" href=https://lesanouo.github.io/blog/posts/171423360001/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>CentOS7ç³»ç»Ÿå®‰è£…</h2></header><div class=entry-content><p>æœ¬ç‰‡æ–‡ç« è®°å½•ä¸ªäººå®‰è£…CentOS7åœ¨å°å¼ä¸»æœºä¸Šä½œä¸ºå°å‹æœåŠ¡å™¨
åˆ¶ä½œUç›˜å¯åŠ¨ç›˜ 1. isoé•œåƒä¸‹è½½ å¯ä»¥é€šè¿‡é˜¿é‡Œäº‘é•œåƒç«™ä¸‹è½½isoæ–‡ä»¶ï¼Œæœ¬äººä¸‹è½½çš„æ˜¯CentOS-7-x86_64-DVD-2009.iso
2. ä¸‹è½½å¯åŠ¨ç›˜åˆ¶ä½œè½¯ä»¶ å¯ä»¥é€šè¿‡è½¯ä»¶UltraISOè¿›è¡Œå¯åŠ¨ç›˜åˆ¶ä½œ
æ‰“å¼€è½¯ä»¶ -> ç‚¹å‡»å·¦ä¸Šè§’æ–‡ä»¶ -> é€‰æ‹©æ‰“å¼€ -> æ‰“å¼€å¯¹åº”iso ç‚¹å‡»èœå•æ å¯åŠ¨ -> é€‰æ‹©å†™å…¥ç¡¬ç›˜é•œåƒ é€‰æ‹©å¯¹åº”Uç›˜ -> å…¶ä½™å‚æ•°å¯é»˜è®¤ å®‰è£…CentOS7 1. æ’å…¥Uç›˜åˆ°ä¸»æœº 2. é…ç½® Bios åˆ¶ä½œUç›˜å¯åŠ¨ 3. é€‰æ‹©å¯¹åº”Uç›˜åå³å¯å¼€å§‹å®‰è£… æ³¨æ„äº‹é¡¹ é€šè¿‡UltraISOåˆ»å…¥åå®‰è£…ä¼šæŠ¥é”™ï¼Œæ— æ³•æ­£å¸¸å®‰è£… é€‰æ‹©Install CentOS 7æ—¶æŒ‰ä¸‹TABé”®ï¼Œå±å¹•ä¸‹æ–¹ä¼šå‡ºç°ä¸€ä¸²æ–‡å­— vmlinuz initrd=initrd.img inst.stage2=hd:LABEL=CentOS\x207\x20x86_64 rd.live.check quiet
...</p></div><footer class=entry-footer><span title='2022-12-01 00:00:00 +0000 UTC'>2022-12-01</span>&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;Lesan</footer><a class=entry-link aria-label="post link to CentOS7ç³»ç»Ÿå®‰è£…" href=https://lesanouo.github.io/blog/posts/166982400001/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Linuxä¸­ä¿®æ”¹Dockerå­˜å‚¨ä½ç½®</h2></header><div class=entry-content><p>åœ¨ç»´æŠ¤æœåŠ¡å™¨æ—¶ï¼Œå‘ç°dockeræ‰€åœ¨ç›˜å®¹é‡å·²æ»¡ï¼Œå¯¼è‡´mongodbæ’å…¥æ•°æ®å¤±è´¥ä»è€Œå´©æºƒã€‚ç”±æ­¤è®°å½•ä¿®æ”¹Linuxä¸­Dockderä½ç½®æ—¶é‡åˆ°çš„é—®é¢˜
...</p></div><footer class=entry-footer><span title='2022-07-02 00:00:00 +0000 UTC'>2022-07-02</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;Lesan</footer><a class=entry-link aria-label="post link to Linuxä¸­ä¿®æ”¹Dockerå­˜å‚¨ä½ç½®" href=https://lesanouo.github.io/blog/posts/165669120001/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Linuxå¢åŠ SSHç«¯å£</h2></header><div class=entry-content><p>ç®€ä»‹ åœ¨å¤§å‹ä¼ä¸šä¸­ï¼ŒæœåŠ¡å™¨ç½‘ç»œä¸€èˆ¬éƒ½ä¼šæœ‰å„ç§å„æ ·çš„é™åˆ¶ï¼Œå¸¸è§çš„å°±ä¼šæœ‰å ¡å’æœºæˆ–è€…è¿ç»´ç½‘å…³ï¼Œä»¥è¾¾åˆ°æ“ä½œå®¡è®¡ç­‰ç›®çš„ã€‚ä½†å¯¹äºå¼€å‘è€…æ¥è®²ï¼Œè¿™äº›é™åˆ¶å¤§å¤§é™ä½äº†æ•ˆç‡ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–¹ä¾¿çš„æ–¹å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚
...</p></div><footer class=entry-footer><span title='2022-05-21 00:00:00 +0000 UTC'>2022-05-21</span>&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;Lesan</footer><a class=entry-link aria-label="post link to Linuxå¢åŠ SSHç«¯å£" href=https://lesanouo.github.io/blog/posts/165306240001/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Linux ä»£ç ç‰‡æ®µ</h2></header><div class=entry-content><p>Linuxå…³æœº,é‡å¯ # å…³æœº shutdown -h now # é‡å¯ shutdown -r now æŸ¥çœ‹ç³»ç»Ÿ,CPUä¿¡æ¯ # æŸ¥çœ‹ç³»ç»Ÿå†…æ ¸ä¿¡æ¯ uname -a # æŸ¥çœ‹ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬ cat /proc/version # æŸ¥çœ‹å½“å‰ç”¨æˆ·ç¯å¢ƒå˜é‡ env cat /proc/cpuinfo # æŸ¥çœ‹æœ‰å‡ ä¸ªé€»è¾‘cpu, åŒ…æ‹¬cpuå‹å· cat /proc/cpuinfo | grep name | cut -f2 -d: | uniq -c # æŸ¥çœ‹æœ‰å‡ é¢—cpu,æ¯é¢—åˆ†åˆ«æ˜¯å‡ æ ¸ cat /proc/cpuinfo | grep physical | uniq -c # æŸ¥çœ‹å½“å‰CPUè¿è¡Œåœ¨32bitè¿˜æ˜¯64bitæ¨¡å¼ä¸‹, å¦‚æœæ˜¯è¿è¡Œåœ¨32bitä¸‹ä¹Ÿä¸ä»£è¡¨CPUä¸æ”¯æŒ64bit getconf LONG_BIT # ç»“æœå¤§äº0, è¯´æ˜æ”¯æŒ64bitè®¡ç®—. lmæŒ‡long mode, æ”¯æŒlmåˆ™æ˜¯64bit cat /proc/cpuinfo | grep flags | grep ' lm ' | wc -l å»ºç«‹è½¯è¿æ¥ ln -s /usr/local/jdk1.8/ jdk rpmç›¸å…³ # æŸ¥çœ‹æ˜¯å¦é€šè¿‡rpmå®‰è£…äº†è¯¥è½¯ä»¶ rpm -qa | grep è½¯ä»¶å sshkey # åˆ›å»ºsshkey ssh-keygen -t rsa -C your_email@example.com #id_rsa.pub çš„å†…å®¹æ‹·è´åˆ°è¦æ§åˆ¶çš„æœåŠ¡å™¨çš„ home/username/.ssh/authorized_keys ä¸­,å¦‚æœæ²¡æœ‰åˆ™æ–°å»º(.sshæƒé™ä¸º700, authorized_keysæƒé™ä¸º600) å‘½ä»¤é‡å‘½å # åœ¨å„ä¸ªç”¨æˆ·çš„.bash_profileä¸­æ·»åŠ é‡å‘½åé…ç½® alias ll='ls -alF' åŒæ­¥æœåŠ¡å™¨æ—¶é—´ sudo ntpdate -u ntp.api.bz åå°è¿è¡Œ # åå°è¿è¡Œ,å¹¶ä¸”æœ‰nohup.outè¾“å‡º nohup xxx & # åå°è¿è¡Œ, ä¸è¾“å‡ºä»»ä½•æ—¥å¿— nohup xxx > /dev/null & # åå°è¿è¡Œ, å¹¶å°†é”™è¯¯ä¿¡æ¯åšæ ‡å‡†è¾“å‡ºåˆ°æ—¥å¿—ä¸­ nohup xxx >out.log 2>&amp;1 & å¼ºåˆ¶æ´»åŠ¨ç”¨æˆ·é€€å‡º # å‘½ä»¤æ¥å®Œæˆå¼ºåˆ¶æ´»åŠ¨ç”¨æˆ·é€€å‡º.å…¶ä¸­TTYè¡¨ç¤ºç»ˆç«¯åç§° pkill -kill -t [TTY] æŸ¥çœ‹å‘½ä»¤è·¯å¾„ which &lt;å‘½ä»¤> æŸ¥çœ‹è¿›ç¨‹æ‰€æœ‰æ‰“å¼€æœ€å¤§fdæ•° ulimit -n é…ç½®dns vim /etc/resolv.conf nslookup,æŸ¥çœ‹åŸŸåè·¯ç”±è¡¨ nslookup google.com last,æœ€è¿‘ç™»å½•ä¿¡æ¯åˆ—è¡¨ # æœ€è¿‘ç™»å½•çš„5ä¸ªè´¦å· last -n 5 è®¾ç½®å›ºå®šip ifconfig em1 192.168.5.177 netmask 255.255.255.0 æŸ¥çœ‹è¿›ç¨‹å†…åŠ è½½çš„ç¯å¢ƒå˜é‡ # ä¹Ÿå¯ä»¥å» cd /proc ç›®å½•ä¸‹, æŸ¥çœ‹è¿›ç¨‹å†…å­˜ä¸­åŠ è½½çš„ä¸œè¥¿ ps eww -p XXXXX(è¿›ç¨‹å·) æŸ¥çœ‹è¿›ç¨‹æ ‘æ‰¾åˆ°æœåŠ¡å™¨è¿›ç¨‹ ps auwxf æŸ¥çœ‹è¿›ç¨‹å¯åŠ¨è·¯å¾„ cd /proc/xxx(è¿›ç¨‹å·) ls -all # cwdå¯¹åº”çš„æ˜¯å¯åŠ¨è·¯å¾„ æ·»åŠ ç”¨æˆ·,é…ç½®sudoæƒé™ # æ–°å¢ç”¨æˆ· useradd ç”¨æˆ·å passwd ç”¨æˆ·å #å¢åŠ sudoæƒé™ vim /etc/sudoers # ä¿®æ”¹æ–‡ä»¶é‡Œé¢çš„ # root ALL=(ALL) ALL # ç”¨æˆ·å ALL=(ALL) ALL å¼ºåˆ¶å…³é—­è¿›ç¨‹ååŒ…å«xxxçš„æ‰€æœ‰è¿›ç¨‹ ps aux|grep xxx | grep -v grep | awk '{print $2}' | xargs kill -9 vimæ“ä½œ #normalæ¨¡å¼ä¸‹ gè¡¨ç¤ºå…¨å±€, xè¡¨ç¤ºæŸ¥æ‰¾çš„å†…å®¹, yè¡¨ç¤ºæ›¿æ¢åçš„å†…å®¹ :%s/x/y/g #normalæ¨¡å¼ä¸‹ 0 # å…‰æ ‡ç§»åˆ°è¡Œé¦–(æ•°å­—0) $ # å…‰æ ‡ç§»è‡³è¡Œå°¾ shift + g # è·³åˆ°æ–‡ä»¶æœ€å gg # è·³åˆ°æ–‡ä»¶å¤´ # æ˜¾ç¤ºè¡Œå· :set nu # å»é™¤è¡Œå· :set nonu # æ£€ç´¢ /xxx(æ£€ç´¢å†…å®¹) # ä»å¤´æ£€ç´¢, æŒ‰næŸ¥æ‰¾ä¸‹ä¸€ä¸ª ?xxx(æ£€ç´¢å†…å®¹) # ä»å°¾éƒ¨æ£€ç´¢ æ‰“å¼€åªè¯»æ–‡ä»¶,ä¿®æ”¹åéœ€è¦ä¿å­˜æ—¶(ä¸ç”¨åˆ‡æ¢ç”¨æˆ·å³å¯ä¿å­˜çš„æ–¹å¼) # åœ¨normalæ¨¡å¼ä¸‹ :w !sudo tee % æŸ¥çœ‹ç£ç›˜, æ–‡ä»¶ç›®å½•åŸºæœ¬ä¿¡æ¯ # æŸ¥çœ‹ç£ç›˜æŒ‚è½½æƒ…å†µ mount # æŸ¥çœ‹ç£ç›˜åˆ†åŒºä¿¡æ¯ df # æŸ¥çœ‹ç›®å½•åŠå­ç›®å½•å¤§å° du -H -h # æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹å„ä¸ªæ–‡ä»¶, æ–‡ä»¶å¤¹å äº†å¤šå°‘ç©ºé—´, ä¸ä¼šé€’å½’ du -sh * wcå‘½ä»¤ # æŸ¥çœ‹æ–‡ä»¶é‡Œæœ‰å¤šå°‘è¡Œ wc -l filename # çœ‹æ–‡ä»¶é‡Œæœ‰å¤šå°‘ä¸ªword wc -w filename # æ–‡ä»¶é‡Œæœ€é•¿çš„é‚£ä¸€è¡Œæ˜¯å¤šå°‘ä¸ªå­— wc -L filename # ç»Ÿè®¡å­—èŠ‚æ•° wc -c å‹ç¼©å‘½ä»¤ tar czvf xxx.tar å‹ç¼©ç›®å½• zip -r xxx.zip å‹ç¼©ç›®å½• è§£å‹ç¼©å‘½ä»¤ tar zxvf xxx.tar # è§£å‹åˆ°æŒ‡å®šæ–‡ä»¶å¤¹ tar zxvf xxx.tar -C /xxx/yyy/ unzip xxx.zip å˜æ›´æ–‡ä»¶æ‰€å±ç”¨æˆ·, ç”¨æˆ·ç»„ chown eagleye.eagleye xxx.log cp, scp, mkdir #å¤åˆ¶ cp xxx.log # å¤åˆ¶å¹¶å¼ºåˆ¶è¦†ç›–åŒåæ–‡ä»¶ cp -f xxx.log # å¤åˆ¶æ–‡ä»¶å¤¹ cp -r xxx(æºæ–‡ä»¶å¤¹) yyy(ç›®æ ‡æ–‡ä»¶å¤¹) # è¿œç¨‹å¤åˆ¶ scp -P sshç«¯å£ username@10.10.10.101:/home/username/xxx /home/xxx # çº§è”åˆ›å»ºç›®å½• mkdir -p /xxx/yyy/zzz # æ‰¹é‡åˆ›å»ºæ–‡ä»¶å¤¹, ä¼šåœ¨test,mainä¸‹éƒ½åˆ›å»ºjava, resourcesæ–‡ä»¶å¤¹ mkdir -p src/{test,main}/{java,resources} æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶ diff -u 1.txt 2.txt æ—¥å¿—è¾“å‡ºçš„å­—èŠ‚æ•°,å¯ä»¥ç”¨ä½œæ€§èƒ½æµ‹è¯• # å¦‚æœåšæ€§èƒ½æµ‹è¯•, å¯ä»¥æ¯æ‰§è¡Œä¸€æ¬¡, å¾€æ—¥å¿—é‡Œé¢è¾“å‡º â€œ.â€ , è¿™æ ·æ—¥å¿—ä¸­çš„å­—èŠ‚æ•°å°±æ˜¯å®é™…çš„æ€§èƒ½æµ‹è¯•è¿è¡Œçš„æ¬¡æ•°, è¿˜å¯ä»¥çœ‹è§å®æ—¶é€Ÿç‡. tail -f xxx.log | pv -bt æŸ¥çœ‹, å»é™¤ç‰¹æ®Šå­—ç¬¦ # æŸ¥çœ‹ç‰¹æ®Šå­—ç¬¦ cat -v xxx.sh # å»é™¤ç‰¹æ®Šå­—ç¬¦ sed -i 's/^M//gâ€™ env.sh å»é™¤æ–‡ä»¶çš„ç‰¹æ®Šå­—ç¬¦, æ¯”å¦‚^M: éœ€è¦è¿™æ ·è¾“å…¥: ctrl+v+enter å¤„ç†å› ç³»ç»ŸåŸå› å¼•èµ·çš„æ–‡ä»¶ä¸­ç‰¹æ®Šå­—ç¬¦çš„é—®é¢˜ # å¯ä»¥è½¬æ¢ä¸ºè¯¥ç³»ç»Ÿä¸‹çš„æ–‡ä»¶æ ¼å¼ cat file.sh > file.sh_bak # å…ˆå°†file.shä¸­æ–‡ä»¶å†…å®¹å¤åˆ¶ä¸‹æ¥ç„¶åè¿è¡Œ, ç„¶åç²˜è´´å†…å®¹, æœ€åctrl + d ä¿å­˜é€€å‡º cat > file1.sh # åœ¨vimä¸­é€šè¿‡å¦‚ä¸‹è®¾ç½®æ–‡ä»¶ç¼–ç å’Œæ–‡ä»¶æ ¼å¼ :set fileencodings=utf-8 ï¼Œç„¶å w ï¼ˆå­˜ç›˜ï¼‰ä¸€ä¸‹å³å¯è½¬åŒ–ä¸º utf8 æ ¼å¼ï¼Œ :set fileformat=unix # åœ¨macä¸‹ä½¿ç”¨dos2unixè¿›è¡Œæ–‡ä»¶æ ¼å¼åŒ– find . -name "*.sh" | xargs dos2unix tee, é‡å®šå‘çš„åŒæ—¶è¾“å‡ºåˆ°å±å¹• awk â€˜{print $0}â€™ xxx.log | tee test.log grep # åå‘åŒ¹é…, æŸ¥æ‰¾ä¸åŒ…å«xxxçš„å†…å®¹ grep -v xxx # æ’é™¤æ‰€æœ‰ç©ºè¡Œ grep -v '^/pre>' # è¿”å›ç»“æœ 2,åˆ™è¯´æ˜ç¬¬äºŒè¡Œæ˜¯ç©ºè¡Œ grep -n â€œ^$â€ 111.txt # æŸ¥è¯¢ä»¥abcå¼€å¤´çš„è¡Œ grep -n â€œ^abcâ€ 111.txt # åŒæ—¶åˆ—å‡ºè¯¥è¯è¯­å‡ºç°åœ¨æ–‡ç« çš„ç¬¬å‡ è¡Œ grep 'xxx' -n xxx.log # è®¡ç®—ä¸€ä¸‹è¯¥å­—ä¸²å‡ºç°çš„æ¬¡æ•° grep 'xxx' -c xxx.log # æ¯”å¯¹çš„æ—¶å€™ï¼Œä¸è®¡è¾ƒå¤§å°å†™çš„ä¸åŒ grep 'xxx' -i xxx.log awk # ä»¥':' ä¸ºåˆ†éš”ç¬¦,å¦‚æœç¬¬äº”åŸŸæœ‰useråˆ™è¾“å‡ºè¯¥è¡Œ awk -F ':' '{if ($5 ~ /user/) print $0}' /etc/passwd # ç»Ÿè®¡å•ä¸ªæ–‡ä»¶ä¸­æŸä¸ªå­—ç¬¦ï¼ˆä¸²ï¼‰(ä¸­æ–‡æ— æ•ˆ)å‡ºç°çš„æ¬¡æ•° awk -v RS='character' 'END {print --NR}' xxx.txt find # åœ¨ç›®å½•ä¸‹æ‰¾åç¼€æ˜¯.mysqlçš„æ–‡ä»¶ find /home/eagleye -name '*.mysql' -print # ä¼šä» /usr ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾æœ€è¿‘3å¤©ä¹‹å†…å­˜å–è¿‡çš„æ–‡ä»¶ã€‚ find /usr -atime 3 â€“print # ä¼šä» /usr ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾æœ€è¿‘5å¤©ä¹‹å†…ä¿®æ”¹è¿‡çš„æ–‡ä»¶ã€‚ find /usr -ctime 5 â€“print # ä¼šä» /doc ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾jacky çš„ã€æ–‡ä»¶åå¼€å¤´æ˜¯ jçš„æ–‡ä»¶ã€‚ find /doc -user jacky -name 'j*' â€“print # ä¼šä» /doc ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾å¯»æ–‡ä»¶åæ˜¯ ja å¼€å¤´æˆ–è€… maå¼€å¤´çš„æ–‡ä»¶ã€‚ find /doc \( -name 'ja*' -o- -name 'ma*' \) â€“print # ä¼šä» /doc ç›®å½•å¼€å§‹å¾€ä¸‹æ‰¾ï¼Œæ‰¾åˆ°å‡¡æ˜¯æ–‡ä»¶åç»“å°¾ä¸º bakçš„æ–‡ä»¶ï¼ŒæŠŠå®ƒåˆ é™¤æ‰ã€‚-exec é€‰é¡¹æ˜¯æ‰§è¡Œçš„æ„æ€ï¼Œrm æ˜¯åˆ é™¤å‘½ä»¤ï¼Œ{ } è¡¨ç¤ºæ–‡ä»¶åï¼Œâ€œ\;â€æ˜¯è§„å®šçš„å‘½ä»¤ç»“å°¾ã€‚ find /doc -name '*bak' -exec rm {} \; æŸ¥çœ‹ä»€ä¹ˆè¿›ç¨‹ä½¿ç”¨äº†è¯¥ç«¯å£ lsof -i:port è·å–æœ¬æœºipåœ°å€ /sbin/ifconfig -a|grep inet|grep -v 127.0.0.1|grep -v inet6|awk '{print $2}'|tr -d "addr:" iptables # æŸ¥çœ‹iptablesçŠ¶æ€ service iptables status # è¦å°åœä¸€ä¸ªip iptables -I INPUT -s ***.***.***.*** -j DROP # è¦è§£å°ä¸€ä¸ªIPï¼Œä½¿ç”¨ä¸‹é¢è¿™æ¡å‘½ä»¤ï¼š iptables -D INPUT -s ***.***.***.*** -j DROP å¤‡æ³¨: å‚æ•°-Iæ˜¯è¡¨ç¤ºInsertï¼ˆæ·»åŠ ï¼‰ï¼Œ-Dè¡¨ç¤ºDeleteï¼ˆåˆ é™¤ï¼‰ã€‚åé¢è·Ÿçš„æ˜¯è§„åˆ™ï¼ŒINPUTè¡¨ç¤ºå…¥ç«™ï¼Œ***.***.***.***è¡¨ç¤ºè¦å°åœçš„IPï¼ŒDROPè¡¨ç¤ºæ”¾å¼ƒè¿æ¥ã€‚ #å¼€å¯9090ç«¯å£çš„è®¿é—® /sbin/iptables -I INPUT -p tcp --dport 9090 -j ACCEPT # é˜²ç«å¢™å¼€å¯ã€å…³é—­ã€é‡å¯ /etc/init.d/iptables status /etc/init.d/iptables start /etc/init.d/iptables stop /etc/init.d/iptables restart ncå‘½ä»¤, tcpè°ƒè¯•åˆ©å™¨ #ç»™æŸä¸€ä¸ªendpointå‘é€TCPè¯·æ±‚,å°±å°†dataçš„å†…å®¹å‘é€åˆ°å¯¹ç«¯ nc 192.168.0.11 8000 &lt; data.txt #ncå¯ä»¥å½“åšæœåŠ¡å™¨ï¼Œç›‘å¬æŸä¸ªç«¯å£å·,æŠŠæŸä¸€æ¬¡è¯·æ±‚çš„å†…å®¹å­˜å‚¨åˆ°received_dataé‡Œ nc -l 8000 > received_data #ä¸Šè¾¹åªç›‘å¬ä¸€æ¬¡ï¼Œå¦‚æœå¤šæ¬¡å¯ä»¥åŠ ä¸Š-kå‚æ•° nc -lk 8000 tcpdump # dumpå‡ºæœ¬æœº12301ç«¯å£çš„tcpåŒ… tcpdump -i em1 tcp port 12301 -s 1500 -w abc.pcap è·Ÿè¸ªç½‘ç»œè·¯ç”±è·¯å¾„ # tracerouteé»˜è®¤ä½¿ç”¨udpæ–¹å¼, å¦‚æœæ˜¯-Iåˆ™æ”¹æˆicmpæ–¹å¼ traceroute -I www.163.com # ä»ttlç¬¬3è·³è·Ÿè¸ª traceroute -M 3 www.163.com # åŠ ä¸Šç«¯å£è·Ÿè¸ª traceroute -p 8080 192.168.10.11 ss # æ˜¾ç¤ºæœ¬åœ°æ‰“å¼€çš„æ‰€æœ‰ç«¯å£ ss -l # æ˜¾ç¤ºæ¯ä¸ªè¿›ç¨‹å…·ä½“æ‰“å¼€çš„socket ss -pl # æ˜¾ç¤ºæ‰€æœ‰tcp socket ss -t -a # æ˜¾ç¤ºæ‰€æœ‰çš„UDP Socekt ss -u -a # æ˜¾ç¤ºæ‰€æœ‰å·²å»ºç«‹çš„SMTPè¿æ¥ ss -o state established '( dport = :smtp or sport = :smtp )' # æ˜¾ç¤ºæ‰€æœ‰å·²å»ºç«‹çš„HTTPè¿æ¥ ss -o state established '( dport = :http or sport = :http )' æ‰¾å‡ºæ‰€æœ‰è¿æ¥XæœåŠ¡å™¨çš„è¿›ç¨‹ ss -x src /tmp/.X11-unix/* åˆ—å‡ºå½“å‰socketç»Ÿè®¡ä¿¡æ¯ ss -s è§£é‡Šï¼šnetstatæ˜¯éå†/procä¸‹é¢æ¯ä¸ªPIDç›®å½•ï¼Œssç›´æ¥è¯»/proc/netä¸‹é¢çš„ç»Ÿè®¡ä¿¡æ¯ã€‚æ‰€ä»¥ssæ‰§è¡Œçš„æ—¶å€™æ¶ˆè€—èµ„æºä»¥åŠæ¶ˆè€—çš„æ—¶é—´éƒ½æ¯”netstatå°‘å¾ˆå¤š netstat # è¾“å‡ºæ¯ä¸ªipçš„è¿æ¥æ•°ï¼Œä»¥åŠæ€»çš„å„ä¸ªçŠ¶æ€çš„è¿æ¥æ•° netstat -n | awk '/^tcp/ {n=split($(NF-1),array,":");if(n&lt;=2)++S[array[(1)]];else++S[array[(4)]];++s[$NF];++N} END {for(a in S){printf("%-20s %s\n", a, S[a]);++I}printf("%-20s %s\n","TOTAL_IP",I);for(a in s) printf("%-20s %s\n",a, s[a]);printf("%-20s %s\n","TOTAL_LINK",N);}' # ç»Ÿè®¡æ‰€æœ‰è¿æ¥çŠ¶æ€, # CLOSEDï¼šæ— è¿æ¥æ˜¯æ´»åŠ¨çš„æˆ–æ­£åœ¨è¿›è¡Œ # LISTENï¼šæœåŠ¡å™¨åœ¨ç­‰å¾…è¿›å…¥å‘¼å« # SYN_RECVï¼šä¸€ä¸ªè¿æ¥è¯·æ±‚å·²ç»åˆ°è¾¾ï¼Œç­‰å¾…ç¡®è®¤ # SYN_SENTï¼šåº”ç”¨å·²ç»å¼€å§‹ï¼Œæ‰“å¼€ä¸€ä¸ªè¿æ¥ # ESTABLISHEDï¼šæ­£å¸¸æ•°æ®ä¼ è¾“çŠ¶æ€ # FIN_WAIT1ï¼šåº”ç”¨è¯´å®ƒå·²ç»å®Œæˆ # FIN_WAIT2ï¼šå¦ä¸€è¾¹å·²åŒæ„é‡Šæ”¾ # ITMED_WAITï¼šç­‰å¾…æ‰€æœ‰åˆ†ç»„æ­»æ‰ # CLOSINGï¼šä¸¤è¾¹åŒæ—¶å°è¯•å…³é—­ # TIME_WAITï¼šä¸»åŠ¨å…³é—­è¿æ¥ä¸€ç«¯è¿˜æ²¡æœ‰ç­‰åˆ°å¦ä¸€ç«¯åé¦ˆæœŸé—´çš„çŠ¶æ€ # LAST_ACKï¼šç­‰å¾…æ‰€æœ‰åˆ†ç»„æ­»æ‰ netstat -n | awk '/^tcp/ {++state[$NF]} END {for(key in state) print key,"\t",state[key]}' # æŸ¥æ‰¾è¾ƒå¤štime_waitè¿æ¥ netstat -n|grep TIME_WAIT|awk '{print $5}'|sort|uniq -c|sort -rn|head -n20 top dmesg,æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿— iostat,ç£ç›˜IOæƒ…å†µç›‘æ§ iostat -xz 1 # r/s, w/s, rkB/s, wkB/sï¼šåˆ†åˆ«è¡¨ç¤ºæ¯ç§’è¯»å†™æ¬¡æ•°å’Œæ¯ç§’è¯»å†™æ•°æ®é‡ï¼ˆåƒå­—èŠ‚ï¼‰ã€‚è¯»å†™é‡è¿‡å¤§ï¼Œå¯èƒ½ä¼šå¼•èµ·æ€§èƒ½é—®é¢˜ã€‚ # awaitï¼šIOæ“ä½œçš„å¹³å‡ç­‰å¾…æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’ã€‚è¿™æ˜¯åº”ç”¨ç¨‹åºåœ¨å’Œç£ç›˜äº¤äº’æ—¶ï¼Œéœ€è¦æ¶ˆè€—çš„æ—¶é—´ï¼ŒåŒ…æ‹¬IOç­‰å¾…å’Œå®é™…æ“ä½œçš„è€—æ—¶ã€‚å¦‚æœè¿™ä¸ªæ•°å€¼è¿‡å¤§ï¼Œå¯èƒ½æ˜¯ç¡¬ä»¶è®¾å¤‡é‡åˆ°äº†ç“¶é¢ˆæˆ–è€…å‡ºç°æ•…éšœã€‚ # avgqu-szï¼šå‘è®¾å¤‡å‘å‡ºçš„è¯·æ±‚å¹³å‡æ•°é‡ã€‚å¦‚æœè¿™ä¸ªæ•°å€¼å¤§äº1ï¼Œå¯èƒ½æ˜¯ç¡¬ä»¶è®¾å¤‡å·²ç»é¥±å’Œï¼ˆéƒ¨åˆ†å‰ç«¯ç¡¬ä»¶è®¾å¤‡æ”¯æŒå¹¶è¡Œå†™å…¥ï¼‰ã€‚ # %utilï¼šè®¾å¤‡åˆ©ç”¨ç‡ã€‚è¿™ä¸ªæ•°å€¼è¡¨ç¤ºè®¾å¤‡çš„ç¹å¿™ç¨‹åº¦ï¼Œç»éªŒå€¼æ˜¯å¦‚æœè¶…è¿‡60ï¼Œå¯èƒ½ä¼šå½±å“IOæ€§èƒ½ï¼ˆå¯ä»¥å‚ç…§IOæ“ä½œå¹³å‡ç­‰å¾…æ—¶é—´ï¼‰ã€‚å¦‚æœåˆ°è¾¾100%ï¼Œè¯´æ˜ç¡¬ä»¶è®¾å¤‡å·²ç»é¥±å’Œã€‚ # å¦‚æœæ˜¾ç¤ºçš„æ˜¯é€»è¾‘è®¾å¤‡çš„æ•°æ®ï¼Œé‚£ä¹ˆè®¾å¤‡åˆ©ç”¨ç‡ä¸ä»£è¡¨åç«¯å®é™…çš„ç¡¬ä»¶è®¾å¤‡å·²ç»é¥±å’Œã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå³ä½¿IOæ€§èƒ½ä¸ç†æƒ³ï¼Œä¹Ÿä¸ä¸€å®šæ„å‘³è¿™åº”ç”¨ç¨‹åºæ€§èƒ½ä¼šä¸å¥½ï¼Œå¯ä»¥åˆ©ç”¨è¯¸å¦‚é¢„è¯»å–ã€å†™ç¼“å­˜ç­‰ç­–ç•¥æå‡åº”ç”¨æ€§èƒ½ã€‚ free,å†…å­˜ä½¿ç”¨æƒ…å†µ free -m eg: total used free shared buffers cached Mem: 1002 769 232 0 62 421 -/+ buffers/cache: 286 715 Swap: 1153 0 1153 ç¬¬ä¸€éƒ¨åˆ†Memè¡Œ: total å†…å­˜æ€»æ•°: 1002M used å·²ç»ä½¿ç”¨çš„å†…å­˜æ•°: 769M free ç©ºé—²çš„å†…å­˜æ•°: 232M shared å½“å‰å·²ç»åºŸå¼ƒä¸ç”¨,æ€»æ˜¯0 buffers Buffer ç¼“å­˜å†…å­˜æ•°: 62M cached Page ç¼“å­˜å†…å­˜æ•°:421M å…³ç³»ï¼štotal(1002M) = used(769M) + free(232M) ç¬¬äºŒéƒ¨åˆ†(-/+ buffers/cache): (-buffers/cache) usedå†…å­˜æ•°ï¼š286M (æŒ‡çš„ç¬¬ä¸€éƒ¨åˆ†Memè¡Œä¸­çš„used â€“ buffers â€“ cached) (+buffers/cache) freeå†…å­˜æ•°: 715M (æŒ‡çš„ç¬¬ä¸€éƒ¨åˆ†Memè¡Œä¸­çš„free + buffers + cached) å¯è§-buffers/cacheåæ˜ çš„æ˜¯è¢«ç¨‹åºå®å®åœ¨åœ¨åƒæ‰çš„å†…å­˜,è€Œ+buffers/cacheåæ˜ çš„æ˜¯å¯ä»¥æŒªç”¨çš„å†…å­˜æ€»æ•°. ç¬¬ä¸‰éƒ¨åˆ†æ˜¯æŒ‡äº¤æ¢åˆ†åŒº sar,æŸ¥çœ‹ç½‘ç»œååçŠ¶æ€ # sarå‘½ä»¤åœ¨è¿™é‡Œå¯ä»¥æŸ¥çœ‹ç½‘ç»œè®¾å¤‡çš„ååç‡ã€‚åœ¨æ’æŸ¥æ€§èƒ½é—®é¢˜æ—¶ï¼Œå¯ä»¥é€šè¿‡ç½‘ç»œè®¾å¤‡çš„ååé‡ï¼Œåˆ¤æ–­ç½‘ç»œè®¾å¤‡æ˜¯å¦å·²ç»é¥±å’Œ sar -n DEV 1 # sarå‘½ä»¤åœ¨è¿™é‡Œç”¨äºæŸ¥çœ‹TCPè¿æ¥çŠ¶æ€ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š # active/sï¼šæ¯ç§’æœ¬åœ°å‘èµ·çš„TCPè¿æ¥æ•°ï¼Œæ—¢é€šè¿‡connectè°ƒç”¨åˆ›å»ºçš„TCPè¿æ¥ï¼› # passive/sï¼šæ¯ç§’è¿œç¨‹å‘èµ·çš„TCPè¿æ¥æ•°ï¼Œå³é€šè¿‡acceptè°ƒç”¨åˆ›å»ºçš„TCPè¿æ¥ï¼› # retrans/sï¼šæ¯ç§’TCPé‡ä¼ æ•°é‡ï¼› # TCPè¿æ¥æ•°å¯ä»¥ç”¨æ¥åˆ¤æ–­æ€§èƒ½é—®é¢˜æ˜¯å¦ç”±äºå»ºç«‹äº†è¿‡å¤šçš„è¿æ¥ï¼Œè¿›ä¸€æ­¥å¯ä»¥åˆ¤æ–­æ˜¯ä¸»åŠ¨å‘èµ·çš„è¿æ¥ï¼Œè¿˜æ˜¯è¢«åŠ¨æ¥å—çš„è¿æ¥ã€‚TCPé‡ä¼ å¯èƒ½æ˜¯å› ä¸ºç½‘ç»œç¯å¢ƒæ¶åŠ£ï¼Œæˆ–è€…æœåŠ¡å™¨å‹åŠ›è¿‡å¤§å¯¼è‡´ä¸¢åŒ… sar -n TCP,ETCP 1 vmstat, ç»™å®šæ—¶é—´ç›‘æ§CPUä½¿ç”¨ç‡, å†…å­˜ä½¿ç”¨, è™šæ‹Ÿå†…å­˜äº¤äº’, IOè¯»å†™ # 2è¡¨ç¤ºæ¯2ç§’é‡‡é›†ä¸€æ¬¡çŠ¶æ€ä¿¡æ¯, 1è¡¨ç¤ºåªé‡‡é›†ä¸€æ¬¡(å¿½ç•¥æ—¢æ˜¯ä¸€ç›´é‡‡é›†) vmstat 2 1</p></div><footer class=entry-footer><span title='2022-02-16 00:00:00 +0000 UTC'>2022-02-16</span>&nbsp;Â·&nbsp;9 min&nbsp;Â·&nbsp;Lesan</footer><a class=entry-link aria-label="post link to Linux ä»£ç ç‰‡æ®µ" href=https://lesanouo.github.io/blog/posts/snippet/linux/></a></article></main><footer class=footer><span>&copy; 2025 <a href=https://lesanouo.github.io/blog/>Lesan's Blog</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>